<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Elsa Culler">
<meta name="author" content="Nate Quarderer">
<meta name="dcterms.date" content="2025-08-13">
<meta name="description" content="In March 2019, large parts of South Dakota were flooded for weeks. What happened to cause this flooding? What were the impacts on local communities? We will use environmental data to determine where and when flooding happened and how long it lasted. Then, we’ll use that same data to put the floods in context historically and discuss how to plan for future disasters.">

<title>The Midwest underwater</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../notebooks/02-flood/flood-download-stars.html" rel="next">
<link href="../../notebooks/14-osm-map/map-stars.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-77406e41586984d083798d12de5b2266.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed slimcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/ESIIL_portal_dark.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-trying-to-run-some-codebrstrongget-startedstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Trying to run some code?<br><strong>Get Started</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-trying-to-run-some-codebrstrongget-startedstrong">    
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/01-get-started/python/index.html">
 <span class="dropdown-text">Get started with Python for Environmental Data Science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/01-get-started/r/index.html">
 <span class="dropdown-text">Get Started with R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/01-get-started/gee/index.html">
 <span class="dropdown-text">Get started with Google Earth Engine</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/01-get-started/docker/index.html">
 <span class="dropdown-text">Build Your Own Environment with Docker</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-guided-learningbrstrongtextbooksstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Guided learning<br><strong>Textbooks</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-guided-learningbrstrongtextbooksstrong">    
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/02-textbooks/ignite/index.html">
 <span class="dropdown-text">IGNITE Data Analytics for early-career researchers</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-attending-abrstrongclass-or-eventstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Attending a<br><strong>Class or Event</strong>?</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-attending-abrstrongclass-or-eventstrong">    
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04a-courses/foundations/01-fundamentals/index.html">
 <span class="dropdown-text">GEOG 5463/4463: Fundamentals of Earth Data Analytics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04a-courses/stars/index.html">
 <span class="dropdown-text">ESIIL Stars</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04a-courses/shortcourse/01-collaboration/index.html">
 <span class="dropdown-text">SHORT COURSE 1: Cloud Computing, Collaboration, and Communication</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04b-events/hyrsense/index.html">
 <span class="dropdown-text">HYR-SENSE</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04b-events/mefa/index.html">
 <span class="dropdown-text">MEFA 2024</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04b-events/esa25/index.html">
 <span class="dropdown-text">ESA 2025</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04b-events/css/index.html">
 <span class="dropdown-text">Chicago Symposium Series</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-we-want-yourbrstrongcontributionsstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">We want your<br><strong>Contributions</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-we-want-yourbrstrongcontributionsstrong">    
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/05-contribute/submit.html">
 <span class="dropdown-text">Submit a module</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/05-contribute/support.html">
 <span class="dropdown-text">Support the Learning Portal</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="http://earthdatascience.org/classic/"> 
<span class="menu-text">Classic<br>earthdatascience.org</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../notebooks/02-flood/flood-stars.html">UNIT 2: Flooding Coding Challenge</a></li><li class="breadcrumb-item"><a href="../../notebooks/02-flood/flood-stars.html">The Midwest underwater</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../pages/00-overviews/04a-courses/stars/index.html" class="sidebar-logo-link">
      <img src="../../img/ESIIL_Stars_logo.png" alt="ESIIL Stars" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../pages/00-overviews/04a-courses/stars/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ESIIL Stars</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 0: Build Your Online Portfolio</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../pages/03-git-github/03-github-portfolio/portfolio-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Build your Environmental Data Science portfolio</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 1: First Map in Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/14-osm-map/map-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Add a map to your website</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.github.com/a/J_0CvUle" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try it on GitHub!</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 2: Flooding Coding Challenge</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/02-flood/flood-stars.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">The Midwest underwater</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/02-flood/flood-download-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Download streamflow data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.github.com/a/fL15Gx9A" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try it on GitHub!</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 3: Migration</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/03-migration/migration-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spring returns to the Great Plains</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/03-migration/migration-download-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Migration Data Download</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.github.com/a/d1mJm3oE" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try it on GitHub!</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 4: Vegetation Health</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/05-vegetation/vegetation-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Water Rights Restored to the Gila River</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/05-vegetation/vegetation-download-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vegetation Data Access</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.github.com/a/E5IoyfPO" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try it on GitHub!</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#access-streamflow-data" id="toc-access-streamflow-data" class="nav-link active" data-scroll-target="#access-streamflow-data">Access streamflow data</a>
  <ul class="collapse">
  <li><a href="#step-0-get-set-up-to-use-python" id="toc-step-0-get-set-up-to-use-python" class="nav-link" data-scroll-target="#step-0-get-set-up-to-use-python">STEP 0: Get set up to use Python</a></li>
  <li><a href="#step-1-site-description-and-map" id="toc-step-1-site-description-and-map" class="nav-link" data-scroll-target="#step-1-site-description-and-map">STEP 1: Site Description and Map</a>
  <ul class="collapse">
  <li><a href="#site-description" id="toc-site-description" class="nav-link" data-scroll-target="#site-description">Site Description</a></li>
  <li><a href="#site-map-the-cheyenne-river-near-wasta" id="toc-site-map-the-cheyenne-river-near-wasta" class="nav-link" data-scroll-target="#site-map-the-cheyenne-river-near-wasta">Site Map: The Cheyenne River near Wasta</a></li>
  </ul></li>
  <li><a href="#step-2-data-wrangling" id="toc-step-2-data-wrangling" class="nav-link" data-scroll-target="#step-2-data-wrangling">STEP 2 Data wrangling</a>
  <ul class="collapse">
  <li><a href="#load-sample-data" id="toc-load-sample-data" class="nav-link" data-scroll-target="#load-sample-data">Load sample data</a></li>
  <li><a href="#organize-your-data-descriptively" id="toc-organize-your-data-descriptively" class="nav-link" data-scroll-target="#organize-your-data-descriptively">Organize your data descriptively</a></li>
  </ul></li>
  <li><a href="#step-3-visualize-the-flood" id="toc-step-3-visualize-the-flood" class="nav-link" data-scroll-target="#step-3-visualize-the-flood">STEP 3: Visualize the flood</a>
  <ul class="collapse">
  <li><a href="#can-we-see-the-flood-in-the-streamflow-data" id="toc-can-we-see-the-flood-in-the-streamflow-data" class="nav-link" data-scroll-target="#can-we-see-the-flood-in-the-streamflow-data">Can we see the flood in the streamflow data?</a></li>
  <li><a href="#create-a-line-plot-with-python" id="toc-create-a-line-plot-with-python" class="nav-link" data-scroll-target="#create-a-line-plot-with-python">Create a line plot with Python</a></li>
  </ul></li>
  <li><a href="#step-4-analyse-the-flood" id="toc-step-4-analyse-the-flood" class="nav-link" data-scroll-target="#step-4-analyse-the-flood">STEP 4: Analyse the flood</a>
  <ul class="collapse">
  <li><a href="#visualize-all-the-streamflow-data" id="toc-visualize-all-the-streamflow-data" class="nav-link" data-scroll-target="#visualize-all-the-streamflow-data">Visualize all the streamflow data</a></li>
  <li><a href="#select-relevant-data" id="toc-select-relevant-data" class="nav-link" data-scroll-target="#select-relevant-data">Select relevant data</a></li>
  <li><a href="#calculate-the-exceedance-probability-and-return-period-for-2019" id="toc-calculate-the-exceedance-probability-and-return-period-for-2019" class="nav-link" data-scroll-target="#calculate-the-exceedance-probability-and-return-period-for-2019">Calculate the exceedance probability and return period for 2019</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<!-- Modified from https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/html/templates/banner/title-block.html -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../notebooks/02-flood/flood-stars.html">UNIT 2: Flooding Coding Challenge</a></li><li class="breadcrumb-item"><a href="../../notebooks/02-flood/flood-stars.html">The Midwest underwater</a></li></ol></nav>
    <div class="esiil-title-goals page-columns page-full">
        <div class="quarto-title column-body">
                        <h1 class="title">
                The Midwest underwater
            </h1>
                                    <p class="subtitle lead">
                A look at 2019 floods in South Dakota, USA
            </p>
                                    <div class="description">
                <p>In March 2019, large parts of South Dakota were flooded for weeks. What happened to cause this flooding? What were the impacts on local communities? We will use environmental data to determine where and when flooding happened and how long it lasted. Then, we’ll use that same data to put the floods in context historically and discuss how to plan for future disasters.</p>
            </div>
                    
                    </div>
    
        
    <div class="no-row-height column-margin column-container"><div class="">
                        <img src="../../img/earth-analytics/flood-frequency/flood.png" width="100%">
                        
                        <div class="quarto-title-meta">

                            <div>
                            <div class="quarto-title-meta-heading">Authors</div>
                            <div class="quarto-title-meta-contents">
                                     <p>Elsa Culler </p>
                                     <p>Nate Quarderer </p>
                                  </div>
                          </div>
                            
                            <div>
                            <div class="quarto-title-meta-heading">Published</div>
                            <div class="quarto-title-meta-contents">
                              <p class="date">August 13, 2025</p>
                            </div>
                          </div>
                          
                            
                          </div>
                          
        </div></div></div>
</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/pipeline-flooding.jpg" class="img-fluid figure-img"></p>
<figcaption>Image source: <a href="https://theintercept.com/2019/04/05/keystone-xl-pipeline-pine-ridge-floods">The Intercept April 5, 2019</a></figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>Check out what some US government and news sources said about the floods in 2019. Here are some resources from different sources to get you started:</p>
<ul>
<li><a href="https://www.weather.gov/fsd/20190314-Flooding">The National Weather Service</a></li>
<li><a href="https://theintercept.com/2019/04/05/keystone-xl-pipeline-pine-ridge-floods/">The Intercept</a></li>
<li><a href="https://yaleclimateconnections.org/2019/04/did-climate-change-cause-midwest-flooding/">Yale Climate Connections</a></li>
<li><a href="https://www.sdpb.org/news/2019-10-17/cheyenne-river-tribe-says-oahe-dam-has-caused-problems-for-decades">South Dakota Public Radio</a></li>
</ul>
<p>If you know someone who lived through these or similar floods, we also invite you to ask them about that experience.</p>
</div>
</div>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>Based on your reading and conversations, what do you think some of the causes of the 2019 flooding in South Dakota were?</p>
</div>
</div>
<p>We like to keep important values up at the top of the notebook – it makes them easy to modify. You can use the following cell to change parameters about your workflow if you like:</p>
<div id="dc0a0c76" class="cell" data-tags="[&quot;parameters&quot;]" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">id</span> <span class="op">=</span> <span class="st">'stars'</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>site_name <span class="op">=</span> <span class="st">'Cheyenne River near Wasta'</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>year <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>project_title <span class="op">=</span> <span class="st">'Cheyenne River Flood Frequency'</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>project_dirname <span class="op">=</span> <span class="st">'flood-cheyenne'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="access-streamflow-data" class="level1 page-columns page-full">
<h1>Access streamflow data</h1>
<p>One way to express how big a flood is by estimating how often larger floods occur. For example, you might have heard news media talking about a “100-year flood”.</p>
<p>In this notebook, you will write Python code to download and work with a <strong>time series</strong> of streamflow data during the flooding on the Cheyenne River.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <strong>time series</strong> of data is taken at the same location but collected regularly or semi-regularly over time.</p>
</div>
</div>
<p>You will then use the data to assess when the flooding was at it’s worst.</p>
<p>As an <strong>extra challenge</strong> you could consider how the values compared to other years by computing the flood’s <strong>return period</strong>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <strong>return period</strong> is an estimate of how often you might expect to see a flood of at least a particular size. This does <em>NOT</em> mean an extreme flood “has” to occur within the return period, or that it couldn’t occur more than once. However, it does allow us to assess the probability that a sequence of floods would happen and evaluate whether or not we need to change forecasting tools or engineering standards to meet a new reality. For example, it would be really unusual to get three 100-year floods in a ten year period without some kind of underlying change in the climate.</p>
</div>
</div>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here are some resources from your text book you can review to learn more:</p>
<ul>
<li><a href="https://www.earthdatascience.org/courses/use-data-open-source-python/use-time-series-data-in-python/">Introduction to time-series data</a></li>
<li><a href="https://www.earthdatascience.org/courses/use-data-open-source-python/use-time-series-data-in-python/floods-return-period-and-probability/">Flood return period and probability</a></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>Explain what data you will need to complete this analysis, including:</p>
<ol type="1">
<li>What type or types of data do you need?</li>
<li>How many years of data do you think you need to compute the return period of an extreme event like the 2019 Cheyenne River near Wasta floods?</li>
</ol>
</div>
</div>
<section id="step-0-get-set-up-to-use-python" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="step-0-get-set-up-to-use-python">STEP 0: Get set up to use Python</h2>
<p>Use the cell below to add necessary <strong>package imports</strong> to this notebook. It’s best to import everything in your very first code cell because it helps folks who are reading your code to figure out where everything comes from (mostly right now this is <strong>you</strong> in the future). It’s <em>very</em> frustrating to try to figure out what packages need to be installed to get some code to run.</p>

<div class="no-row-height column-margin column-container"><div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Our friend <a href="https://peps.python.org/pep-0008/#imports">the PEP-8 style guide has some things to say about imports</a>. In particular, your imports should be in alphabetical order.</p>
</div>
</div></div><div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the sample code below, we’ve imported a library needed for working with <strong>tabular</strong>, or spreadsheet, data, as well as our own library for common Environmental Data Analytics tasks (in this case, managing files on your computer). You will also need to:</p>
<ol type="1">
<li>Add the <strong>library for working with vector data in Python</strong> and a <strong>library for creating interactive plots of vector and time-series data</strong> to the imports.</li>
<li>Check that your imports follow the PEP-8 guidelines – they should be in alphabetical order.</li>
<li>Run your import cell to make sure everything will work</li>
</ol>
</div>
</div>
<div id="b4791d2c" class="cell student-code" data-highlight="true" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import libraries</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> earthpy</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="196ac92e" class="cell answer-code" data-highlight="true" data-execution_count="3">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import libraries</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> earthpy</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd <span class="co"># Vector data</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hvplot.pandas <span class="co"># Interactive plots</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<script type="esms-options">{"shimMode": true}</script><style>*[data-root-id],
*[data-root-id] > * {
  box-sizing: border-box;
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  color: var(--vscode-editor-foreground, var(--jp-ui-font-color1));
}

/* Override VSCode background color */
.cell-output-ipywidget-background:has(
  > .cell-output-ipywidget-background > .lm-Widget > *[data-root-id]
),
.cell-output-ipywidget-background:has(> .lm-Widget > *[data-root-id]) {
  background-color: transparent !important;
}
</style>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;
  const py_version = '3.7.3'.replace('rc', '-rc.').replace('.dev', '-dev.');
  const reloading = false;
  const Bokeh = root.Bokeh;

  // Set a timeout for this load but only if we are not already initializing
  if (typeof (root._bokeh_timeout) === "undefined" || (force || !root._bokeh_is_initializing)) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks;
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, js_modules, js_exports, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];
    if (js_modules == null) js_modules = [];
    if (js_exports == null) js_exports = {};

    root._bokeh_onload_callbacks.push(callback);

    if (root._bokeh_is_loading > 0) {
      // Don't load bokeh if it is still initializing
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    } else if (js_urls.length === 0 && js_modules.length === 0 && Object.keys(js_exports).length === 0) {
      // There is nothing to load
      run_callbacks();
      return null;
    }

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }
    window._bokeh_on_load = on_load

    function on_error(e) {
      const src_el = e.srcElement
      console.error("failed to load " + (src_el.href || src_el.src));
    }

    const skip = [];
    if (window.requirejs) {
      window.requirejs.config({'packages': {}, 'paths': {}, 'shim': {}});
      root._bokeh_is_loading = css_urls.length + 0;
    } else {
      root._bokeh_is_loading = css_urls.length + js_urls.length + js_modules.length + Object.keys(js_exports).length;
    }

    const existing_stylesheets = []
    const links = document.getElementsByTagName('link')
    for (let i = 0; i < links.length; i++) {
      const link = links[i]
      if (link.href != null) {
        existing_stylesheets.push(link.href)
      }
    }
    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const escaped = encodeURI(url)
      if (existing_stylesheets.indexOf(escaped) !== -1) {
        on_load()
        continue;
      }
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error;
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }    var existing_scripts = []
    const scripts = document.getElementsByTagName('script')
    for (let i = 0; i < scripts.length; i++) {
      var script = scripts[i]
      if (script.src != null) {
        existing_scripts.push(script.src)
      }
    }
    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const escaped = encodeURI(url)
      if (skip.indexOf(escaped) !== -1 || existing_scripts.indexOf(escaped) !== -1) {
        if (!window.requirejs) {
          on_load();
        }
        continue;
      }
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    for (let i = 0; i < js_modules.length; i++) {
      const url = js_modules[i];
      const escaped = encodeURI(url)
      if (skip.indexOf(escaped) !== -1 || existing_scripts.indexOf(escaped) !== -1) {
        if (!window.requirejs) {
          on_load();
        }
        continue;
      }
      var element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      element.type = "module";
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
    for (const name in js_exports) {
      const url = js_exports[name];
      const escaped = encodeURI(url)
      if (skip.indexOf(escaped) >= 0 || root[name] != null) {
        if (!window.requirejs) {
          on_load();
        }
        continue;
      }
      var element = document.createElement('script');
      element.onerror = on_error;
      element.async = false;
      element.type = "module";
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      element.textContent = `
      import ${name} from "${url}"
      window.${name} = ${name}
      window._bokeh_on_load()
      `
      document.head.appendChild(element);
    }
    if (!js_urls.length && !js_modules.length) {
      on_load()
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.holoviz.org/panel/1.7.5/dist/bundled/reactiveesm/es-module-shims@^1.10.0/dist/es-module-shims.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-3.7.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.7.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.7.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.7.3.min.js", "https://cdn.holoviz.org/panel/1.7.5/dist/panel.min.js"];
  const js_modules = [];
  const js_exports = {};
  const css_urls = [];
  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {} // ensure no trailing comma for IE
  ];

  function run_inline_js() {
    if ((root.Bokeh !== undefined) || (force === true)) {
      for (let i = 0; i < inline_js.length; i++) {
        try {
          inline_js[i].call(root, root.Bokeh);
        } catch(e) {
          if (!reloading) {
            throw e;
          }
        }
      }
      // Cache old bokeh versions
      if (Bokeh != undefined && !reloading) {
        var NewBokeh = root.Bokeh;
        if (Bokeh.versions === undefined) {
          Bokeh.versions = new Map();
        }
        if (NewBokeh.version !== Bokeh.version) {
          Bokeh.versions.set(NewBokeh.version, NewBokeh)
        }
        root.Bokeh = Bokeh;
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    }
    root._bokeh_is_initializing = false
  }

  function load_or_wait() {
    // Implement a backoff loop that tries to ensure we do not load multiple
    // versions of Bokeh and its dependencies at the same time.
    // In recent versions we use the root._bokeh_is_initializing flag
    // to determine whether there is an ongoing attempt to initialize
    // bokeh, however for backward compatibility we also try to ensure
    // that we do not start loading a newer (Panel>=1.0 and Bokeh>3) version
    // before older versions are fully initialized.
    if (root._bokeh_is_initializing && Date.now() > root._bokeh_timeout) {
      // If the timeout and bokeh was not successfully loaded we reset
      // everything and try loading again
      root._bokeh_timeout = Date.now() + 5000;
      root._bokeh_is_initializing = false;
      root._bokeh_onload_callbacks = undefined;
      root._bokeh_is_loading = 0
      console.log("Bokeh: BokehJS was loaded multiple times but one version failed to initialize.");
      load_or_wait();
    } else if (root._bokeh_is_initializing || (typeof root._bokeh_is_initializing === "undefined" && root._bokeh_onload_callbacks !== undefined)) {
      setTimeout(load_or_wait, 100);
    } else {
      root._bokeh_is_initializing = true
      root._bokeh_onload_callbacks = []
      const bokeh_loaded = root.Bokeh != null && (root.Bokeh.version === py_version || (root.Bokeh.versions !== undefined && root.Bokeh.versions.has(py_version)));
      if (!reloading && !bokeh_loaded) {
        if (root.Bokeh) {
          root.Bokeh = undefined;
        }
        console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
      }
      load_libs(css_urls, js_urls, js_modules, js_exports, function() {
        console.debug("Bokeh: BokehJS plotting callback run at", now());
        run_inline_js();
      });
    }
  }
  // Give older versions of the autoload script a head-start to ensure
  // they initialize before we start loading newer version.
  setTimeout(load_or_wait, 100)
}(window));
</script>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">

if ((window.PyViz === undefined) || (window.PyViz instanceof HTMLElement)) {
  window.PyViz = {comms: {}, comm_status:{}, kernels:{}, receivers: {}, plot_index: []}
}


    function JupyterCommManager() {
    }

    JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
      if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        comm_manager.register_target(comm_id, function(comm) {
          comm.on_msg(msg_handler);
        });
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
          comm.onMsg = msg_handler;
        });
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        google.colab.kernel.comms.registerTarget(comm_id, (comm) => {
          var messages = comm.messages[Symbol.asyncIterator]();
          function processIteratorResult(result) {
            var message = result.value;
            var content = {data: message.data, comm_id};
            var buffers = []
            for (var buffer of message.buffers || []) {
              buffers.push(new DataView(buffer))
            }
            var metadata = message.metadata || {};
            var msg = {content, buffers, metadata}
            msg_handler(msg);
            return messages.next().then(processIteratorResult);
          }
          return messages.next().then(processIteratorResult);
        })
      }
    }

    JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
      if (comm_id in window.PyViz.comms) {
        return window.PyViz.comms[comm_id];
      } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
        if (msg_handler) {
          comm.on_msg(msg_handler);
        }
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
        let retries = 0;
        const open = () => {
          if (comm.active) {
            comm.open();
          } else if (retries > 3) {
            console.warn('Comm target never activated')
          } else {
            retries += 1
            setTimeout(open, 500)
          }
        }
        if (comm.active) {
          comm.open();
        } else {
          setTimeout(open, 500)
        }
        if (msg_handler) {
          comm.onMsg = msg_handler;
        }
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        var comm_promise = google.colab.kernel.comms.open(comm_id)
        comm_promise.then((comm) => {
          window.PyViz.comms[comm_id] = comm;
          if (msg_handler) {
            var messages = comm.messages[Symbol.asyncIterator]();
            function processIteratorResult(result) {
              var message = result.value;
              var content = {data: message.data};
              var metadata = message.metadata || {comm_id};
              var msg = {content, metadata}
              msg_handler(msg);
              return messages.next().then(processIteratorResult);
            }
            return messages.next().then(processIteratorResult);
          }
        })
        var sendClosure = (data, metadata, buffers, disposeOnDone) => {
          return comm_promise.then((comm) => {
            comm.send(data, metadata, buffers, disposeOnDone);
          });
        };
        var comm = {
          send: sendClosure
        };
      }
      window.PyViz.comms[comm_id] = comm;
      return comm;
    }
    window.PyViz.comm_manager = new JupyterCommManager();
    


var JS_MIME_TYPE = 'application/javascript';
var HTML_MIME_TYPE = 'text/html';
var EXEC_MIME_TYPE = 'application/vnd.holoviews_exec.v0+json';
var CLASS_NAME = 'output';

/**
 * Render data to the DOM node
 */
function render(props, node) {
  var div = document.createElement("div");
  var script = document.createElement("script");
  node.appendChild(div);
  node.appendChild(script);
}

/**
 * Handle when a new output is added
 */
function handle_add_output(event, handle) {
  var output_area = handle.output_area;
  var output = handle.output;
  if ((output.data == undefined) || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {
    return
  }
  var id = output.metadata[EXEC_MIME_TYPE]["id"];
  var toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);
  if (id !== undefined) {
    var nchildren = toinsert.length;
    var html_node = toinsert[nchildren-1].children[0];
    html_node.innerHTML = output.data[HTML_MIME_TYPE];
    var scripts = [];
    var nodelist = html_node.querySelectorAll("script");
    for (var i in nodelist) {
      if (nodelist.hasOwnProperty(i)) {
        scripts.push(nodelist[i])
      }
    }

    scripts.forEach( function (oldScript) {
      var newScript = document.createElement("script");
      var attrs = [];
      var nodemap = oldScript.attributes;
      for (var j in nodemap) {
        if (nodemap.hasOwnProperty(j)) {
          attrs.push(nodemap[j])
        }
      }
      attrs.forEach(function(attr) { newScript.setAttribute(attr.name, attr.value) });
      newScript.appendChild(document.createTextNode(oldScript.innerHTML));
      oldScript.parentNode.replaceChild(newScript, oldScript);
    });
    if (JS_MIME_TYPE in output.data) {
      toinsert[nchildren-1].children[1].textContent = output.data[JS_MIME_TYPE];
    }
    output_area._hv_plot_id = id;
    if ((window.Bokeh !== undefined) && (id in Bokeh.index)) {
      window.PyViz.plot_index[id] = Bokeh.index[id];
    } else {
      window.PyViz.plot_index[id] = null;
    }
  } else if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
    var bk_div = document.createElement("div");
    bk_div.innerHTML = output.data[HTML_MIME_TYPE];
    var script_attrs = bk_div.children[0].attributes;
    for (var i = 0; i < script_attrs.length; i++) {
      toinsert[toinsert.length - 1].childNodes[1].setAttribute(script_attrs[i].name, script_attrs[i].value);
    }
    // store reference to server id on output_area
    output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
  }
}

/**
 * Handle when an output is cleared or removed
 */
function handle_clear_output(event, handle) {
  var id = handle.cell.output_area._hv_plot_id;
  var server_id = handle.cell.output_area._bokeh_server_id;
  if (((id === undefined) || !(id in PyViz.plot_index)) && (server_id !== undefined)) { return; }
  var comm = window.PyViz.comm_manager.get_client_comm("hv-extension-comm", "hv-extension-comm", function () {});
  if (server_id !== null) {
    comm.send({event_type: 'server_delete', 'id': server_id});
    return;
  } else if (comm !== null) {
    comm.send({event_type: 'delete', 'id': id});
  }
  delete PyViz.plot_index[id];
  if ((window.Bokeh !== undefined) & (id in window.Bokeh.index)) {
    var doc = window.Bokeh.index[id].model.document
    doc.clear();
    const i = window.Bokeh.documents.indexOf(doc);
    if (i > -1) {
      window.Bokeh.documents.splice(i, 1);
    }
  }
}

/**
 * Handle kernel restart event
 */
function handle_kernel_cleanup(event, handle) {
  delete PyViz.comms["hv-extension-comm"];
  window.PyViz.plot_index = {}
}

/**
 * Handle update_display_data messages
 */
function handle_update_output(event, handle) {
  handle_clear_output(event, {cell: {output_area: handle.output_area}})
  handle_add_output(event, handle)
}

function register_renderer(events, OutputArea) {
  function append_mime(data, metadata, element) {
    // create a DOM node to render to
    var toinsert = this.create_output_subarea(
    metadata,
    CLASS_NAME,
    EXEC_MIME_TYPE
    );
    this.keyboard_manager.register_events(toinsert);
    // Render to node
    var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
    render(props, toinsert[0]);
    element.append(toinsert);
    return toinsert
  }

  events.on('output_added.OutputArea', handle_add_output);
  events.on('output_updated.OutputArea', handle_update_output);
  events.on('clear_output.CodeCell', handle_clear_output);
  events.on('delete.Cell', handle_clear_output);
  events.on('kernel_ready.Kernel', handle_kernel_cleanup);

  OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
    safe: true,
    index: 0
  });
}

if (window.Jupyter !== undefined) {
  try {
    var events = require('base/js/events');
    var OutputArea = require('notebook/js/outputarea').OutputArea;
    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  } catch(err) {
  }
}

</script>
</div>
<div class="cell-output cell-output-display">
<div id="p1004">
  <div id="a087702d-0fbb-4877-91c2-d120764adbd1" data-root-id="p1004" style="display: contents;"></div>
</div>
<script type="application/javascript">(function(root) {
  var docs_json = {"8b2c2b9c-138a-4659-9ea2-c5e0fd62223c":{"version":"3.7.3","title":"Bokeh Application","roots":[{"type":"object","name":"panel.models.browser.BrowserInfo","id":"p1004"},{"type":"object","name":"panel.models.comm_manager.CommManager","id":"p1005","attributes":{"plot_id":"p1004","comm_id":"ad5b46cb05094da68446836fd22b39b0","client_comm_id":"6622a57c2c444f80a1e4c50e293a2aad"}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"gap","kind":"Any","default":""},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"ReactiveESM1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"JSComponent1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"ReactComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"AnyWidgetComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"max_notifications","kind":"Any","default":5},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_rendered","kind":"Any","default":false},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"TemplateEditor1","properties":[{"name":"layout","kind":"Any","default":[]}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"request_value1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"_synced","kind":"Any","default":null},{"name":"_request_sync","kind":"Any","default":0}]}]}};
  var render_items = [{"docid":"8b2c2b9c-138a-4659-9ea2-c5e0fd62223c","roots":{"p1004":"a087702d-0fbb-4877-91c2-d120764adbd1"},"root_ids":["p1004"]}];
  var docs = Object.values(docs_json)
  if (!docs) {
    return
  }
  const py_version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')
  async function embed_document(root) {
    var Bokeh = get_bokeh(root)
    await Bokeh.embed.embed_items_notebook(docs_json, render_items);
    for (const render_item of render_items) {
      for (const root_id of render_item.root_ids) {
    const id_el = document.getElementById(root_id)
    if (id_el.children.length && id_el.children[0].hasAttribute('data-root-id')) {
      const root_el = id_el.children[0]
      root_el.id = root_el.id + '-rendered'
      for (const child of root_el.children) {
            // Ensure JupyterLab does not capture keyboard shortcuts
            // see: https://jupyterlab.readthedocs.io/en/4.1.x/extension/notebook.html#keyboard-interaction-model
        child.setAttribute('data-lm-suppress-shortcuts', 'true')
      }
    }
      }
    }
  }
  function get_bokeh(root) {
    if (root.Bokeh === undefined) {
      return null
    } else if (root.Bokeh.version !== py_version) {
      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(py_version)) {
    return null
      }
      return root.Bokeh.versions.get(py_version);
    } else if (root.Bokeh.version === py_version) {
      return root.Bokeh
    }
    return null
  }
  function is_loaded(root) {
    var Bokeh = get_bokeh(root)
    return (Bokeh != null && Bokeh.Panel !== undefined)
  }
  if (is_loaded(root)) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (is_loaded(root)) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
      var Bokeh = get_bokeh(root)
      if (Bokeh == null || Bokeh.Panel == null) {
            console.warn("Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing");
      } else {
        console.warn("Panel: WARNING: Attempting to render but not all required libraries could be resolved.")
        embed_document(root)
      }
        }
      }
    }, 25, root)
  }
})(window);</script>
</div>
</div>
<p>Finally, we have arranged some sample data for you, which you can download using the <code>earthpy</code> library. Later on, you’ll learn how to download data from the NWIS using the <code>dataretrieval</code> library. For now, you can use the sample data downloaded with the <code>earthpy</code> library.</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>The following code will download the sample data based on the value of “title”, and store it in the data directory on your computer. It will also save the path to the downloaded data. You can use the <code>project</code> later on to do things like locate data files on the computer or image you’re using to code. You should practice writing descriptive code by:</p>
<ol type="1">
<li>Change <code>'project-folder-name'</code> to a descriptive directory name where you want to store your data.</li>
<li>Change <code>data_path</code> to a descriptive variable name</li>
<li>Run the data download cell to make sure everything will work</li>
</ol>
</div>
</div>
<div id="5bac9b18" class="cell student-code" data-highlight="true" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create project directory</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>project <span class="op">=</span> earthpy.Project(title<span class="op">=</span>project_title, dirname<span class="op">=</span><span class="st">'project-folder-name'</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Download data</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>data_path <span class="op">=</span> project.get_data()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the project data directory location</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>project.project_dir</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="4a3dcde3" class="cell answer-code" data-highlight="true" data-execution_count="5">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create project directory</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>project <span class="op">=</span> earthpy.Project(title<span class="op">=</span>project_title, dirname<span class="op">=</span>project_dirname)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Download data</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>streamflow_path <span class="op">=</span> project.get_data()</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the project data directory location</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>project.project_dir</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Downloading from https://ndownloader.figshare.com/files/54659369</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>PosixPath('/home/runner/.local/share/earth-analytics/flood-cheyenne')</code></pre>
</div>
</div>
<p>You can use an open science tool called <code>bash</code> or the <code>shell</code> to work with files and get information about your file system. For example, this code will <strong>list</strong> (ls) the contents of the project directory</p>
<div id="57a3d132" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>ls <span class="st">"$project.project_dir"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cheyenne_streamflow_1934_2024.csv</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Go check to see if you can find the files using some other method!</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Are you working in the cloud, such as on GitHub Codespaces? Be aware that any files you download to a cloud computer <strong>will not be saved</strong> on the physical computer you are using! They will remain in the cloud. So, you will not be able to see any downloaded files using the File Explorer or Finder on your computer because they aren’t there.</p>
</div>
</div>
</section>
<section id="step-1-site-description-and-map" class="level2">
<h2 class="anchored" data-anchor-id="step-1-site-description-and-map">STEP 1: Site Description and Map</h2>
<p>In our example analysis, we’ll be focusing on the Cheyenne River, which flows into Lake Oahu by looking at a stream gage near Wasta, SD, USA. After we’ve completed this example analysis, we suggest that you look into another flood – perhaps one that you have a personal connection to.</p>
<section id="site-description" class="level3">
<h3 class="anchored" data-anchor-id="site-description">Site Description</h3>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Describe the Cheyenne River area in a few sentences. You can include:</p>
<ul>
<li>Information about the <strong>climatology</strong> of the area, or typical precipitation and temperature at different months of the year</li>
<li>The <strong>runoff ratio</strong> (average annual runoff divided by average annual precipitation)</li>
<li>Which <strong>wildlife and ecosystems</strong> exist in the area</li>
<li>What <strong>communities and infrastructure</strong> are in the area</li>
</ul>
</div>
</div>
</section>
<section id="site-map-the-cheyenne-river-near-wasta" class="level3">
<h3 class="anchored" data-anchor-id="site-map-the-cheyenne-river-near-wasta">Site Map: The Cheyenne River near Wasta</h3>
<p>The code below will create an interactive map of the area. But something is wrong - no one defined the latitude and longitude as <strong>variables</strong>. Try running the code to see what happens when you reference a variable name that doesn’t exist!</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Find the location of the Cheyenne River near Wasta <strong>USGS stream gauge</strong> using the <a href="https://waterdata.usgs.gov/nwis?">National Water Information System</a>. This is not the easiest thing to find if you aren’t used to NWIS, so we’ve provided some screenshots of the process below.</p>
</div>
</div>
<section id="step-1-nwis-mapper" class="level5">
<h5 class="anchored" data-anchor-id="step-1-nwis-mapper">Step 1: NWIS Mapper</h5>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/01-nwis-dash.png" class="img-fluid figure-img"></p>
<figcaption>Go to the <a href="https://dashboard.waterdata.usgs.gov/app/nwd/en/">National Water Information System Mapper</a></figcaption>
</figure>
</div>
</section>
<section id="step-2-search" class="level5">
<h5 class="anchored" data-anchor-id="step-2-search">Step 2: Search</h5>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/02-place-search.png" class="img-fluid figure-img"></p>
<figcaption>Type in <code>Wasta</code> in the <code>Find a Place</code> box</figcaption>
</figure>
</div>
</section>
<section id="step-3-select-gage" class="level5">
<h5 class="anchored" data-anchor-id="step-3-select-gage">Step 3: Select gage</h5>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/03-open-gage.png" class="img-fluid figure-img"></p>
<figcaption>Click on the Cheyenne River near Wasta site. It should open a new window.</figcaption>
</figure>
</div>
</section>
<section id="step-4-open-site-page" class="level5">
<h5 class="anchored" data-anchor-id="step-4-open-site-page">Step 4: Open site page</h5>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/04-open-site-info.png" class="img-fluid figure-img"></p>
<figcaption>Click on <code>Site page</code> at the top</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/05-site-info.png" class="img-fluid figure-img"></p>
<figcaption>You should now be on the Cheyenne River near Wasta gage site page</figcaption>
</figure>
</div>
</section>
<section id="step-5-get-coordinates" class="level5">
<h5 class="anchored" data-anchor-id="step-5-get-coordinates">Step 5: Get coordinates</h5>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/06-get-latlon.png" class="img-fluid figure-img"></p>
<figcaption>Scroll to the bottom and open the <code>Location metadata</code> section. Make a note of the decimal latitude and longitude!</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Now, you’re ready to create your site map!</p>
<ol type="1">
<li>Define latitude and longitude variables to <strong>match the variable names used in the code</strong>.</li>
<li>Rename the variable <code>gdf</code> with something <strong>descriptive</strong> wherever it occurs.</li>
<li>Run and test your cell to make sure everything works.</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-extra callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Looking for an Extra Challenge?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Customize your plot <a href="https://hvplot.holoviz.org/index.html">using the hvplot documentation</a> or by asking your favorite AI tool. For example, you could:</p>
<ul>
<li>Change the size of your map</li>
<li>Change the base map images</li>
<li>Change the color and size of your place marker</li>
<li>Remove the axis labels for a cleaner map</li>
</ul>
</div>
</div>
<div id="0661b755" class="cell student-code" data-highlight="true" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a GeoDataFrame with the gage location</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>gdf <span class="op">=</span> gpd.GeoDataFrame(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create the geometry from lat/lon</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    geometry<span class="op">=</span>gpd.points_from_xy([gage_lon], [gage_lat]),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Coordinate Reference System for lat/lon values</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    crs<span class="op">=</span><span class="st">"EPSG:4326"</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using hvPlot with a basemap</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="bu">buffer</span> <span class="op">=</span> <span class="fl">0.01</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>gdf.hvplot.points(</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use web tile basemap imagery</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    geo<span class="op">=</span><span class="va">True</span>, tiles<span class="op">=</span><span class="st">'OpenTopoMap'</span>, </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set approximate bounding box</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    ylim<span class="op">=</span>(gage_lat<span class="op">-</span><span class="bu">buffer</span>, gage_lat<span class="op">+</span><span class="bu">buffer</span>),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    xlim<span class="op">=</span>(gage_lon<span class="op">-</span><span class="bu">buffer</span>, gage_lon<span class="op">+</span><span class="bu">buffer</span>),</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="3098ad44" class="cell answer-code" data-highlight="true" data-execution_count="8">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>gage_lat <span class="op">=</span> <span class="fl">44.08109849</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>gage_lon <span class="op">=</span> <span class="op">-</span><span class="fl">102.4012746</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a GeoDataFrame with the gage location</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>gage_gdf <span class="op">=</span> gpd.GeoDataFrame(</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create the geometry from lat/lon</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    geometry<span class="op">=</span>gpd.points_from_xy([gage_lon], [gage_lat]),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Coordinate Reference System for lat/lon values</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    crs<span class="op">=</span><span class="st">"EPSG:4326"</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using hvPlot with a basemap</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="bu">buffer</span> <span class="op">=</span> <span class="fl">0.01</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>gage_gdf.hvplot.points(</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use web tile basemap imagery</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    geo<span class="op">=</span><span class="va">True</span>, tiles<span class="op">=</span><span class="st">'EsriImagery'</span>, </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Display the gage name</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    hover_cols<span class="op">=</span>[<span class="st">'name'</span>],</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Format streamgage marker</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'red'</span>, size<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set figure size</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">500</span>, height<span class="op">=</span><span class="dv">300</span>,</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set approximate bounding box</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    ylim<span class="op">=</span>(gage_lat<span class="op">-</span><span class="bu">buffer</span>, gage_lat<span class="op">+</span><span class="bu">buffer</span>),</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    xlim<span class="op">=</span>(gage_lon<span class="op">-</span><span class="bu">buffer</span>, gage_lon<span class="op">+</span><span class="bu">buffer</span>),</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove axis labels</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    xaxis<span class="op">=</span><span class="va">None</span>, yaxis<span class="op">=</span><span class="va">None</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">

</div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div id="p1015">
  <div id="e34a8d75-df1a-4830-8878-7fba205a1593" data-root-id="p1015" style="display: contents;"></div>
</div>
<script type="application/javascript">(function(root) {
  var docs_json = {"859e6e40-a214-4d37-9c90-b4720c41dae3":{"version":"3.7.3","title":"Bokeh Application","roots":[{"type":"object","name":"Row","id":"p1015","attributes":{"name":"Row01670","tags":["embedded"],"stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 400px));\n  -webkit-mask-size: auto calc(min(50%, 400px));\n}",{"type":"object","name":"ImportedStyleSheet","id":"p1018","attributes":{"url":"https://cdn.holoviz.org/panel/1.7.5/dist/css/loading.css"}},{"type":"object","name":"ImportedStyleSheet","id":"p1127","attributes":{"url":"https://cdn.holoviz.org/panel/1.7.5/dist/css/listpanel.css"}},{"type":"object","name":"ImportedStyleSheet","id":"p1016","attributes":{"url":"https://cdn.holoviz.org/panel/1.7.5/dist/bundled/theme/default.css"}},{"type":"object","name":"ImportedStyleSheet","id":"p1017","attributes":{"url":"https://cdn.holoviz.org/panel/1.7.5/dist/bundled/theme/native.css"}}],"min_width":500,"margin":0,"sizing_mode":"stretch_width","align":"start","children":[{"type":"object","name":"Spacer","id":"p1019","attributes":{"name":"HSpacer01676","stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 400px));\n  -webkit-mask-size: auto calc(min(50%, 400px));\n}",{"id":"p1018"},{"id":"p1016"},{"id":"p1017"}],"min_width":0,"margin":0,"sizing_mode":"stretch_width","align":"start"}},{"type":"object","name":"Figure","id":"p1072","attributes":{"width":500,"height":300,"margin":[5,10],"sizing_mode":"fixed","align":"start","x_range":{"type":"object","name":"Range1d","id":"p1035","attributes":{"tags":[[["Longitude",null]],[]],"start":-11401840.224723168,"end":-11396675.265385268,"reset_start":-11401840.224723168,"reset_end":-11396675.265385268,"min_interval":5}},"y_range":{"type":"object","name":"Range1d","id":"p1036","attributes":{"tags":[[["Latitude",null]],{"type":"map","entries":[["invert_yaxis",false],["autorange",false]]}],"start":5476451.593815503,"end":5479550.569418242,"reset_start":5476451.593815503,"reset_end":5479550.569418242,"min_interval":5}},"x_scale":{"type":"object","name":"LinearScale","id":"p1082"},"y_scale":{"type":"object","name":"LinearScale","id":"p1083"},"title":{"type":"object","name":"Title","id":"p1075","attributes":{"text_color":"black","text_font_size":"12pt"}},"renderers":[{"type":"object","name":"TileRenderer","id":"p1105","attributes":{"level":"underlay","tile_source":{"type":"object","name":"WMTSTileSource","id":"p1101","attributes":{"url":"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{Z}/{Y}/{X}.jpg","attribution":"&copy; <a href=\"http://downloads.esri.com/ArcGISOnline/docs/tou_summary.pdf\">Esri</a>, Earthstar Geographics"}}}},{"type":"object","name":"GlyphRenderer","id":"p1118","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1109","attributes":{"selected":{"type":"object","name":"Selection","id":"p1110","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1111"},"data":{"type":"map","entries":[["Longitude",{"type":"ndarray","array":{"type":"bytes","data":"83vXNwu+ZcE="},"shape":[1],"dtype":"float64","order":"little"}],["Latitude",{"type":"ndarray","array":{"type":"bytes","data":"JvTXPJzlVEE="},"shape":[1],"dtype":"float64","order":"little"}]]}}},"view":{"type":"object","name":"CDSView","id":"p1119","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1120"}}},"glyph":{"type":"object","name":"Scatter","id":"p1115","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"Longitude"},"y":{"type":"field","field":"Latitude"},"size":{"type":"value","value":10.0},"line_color":{"type":"value","value":"red"},"fill_color":{"type":"value","value":"red"},"hatch_color":{"type":"value","value":"red"}}},"selection_glyph":{"type":"object","name":"Scatter","id":"p1123","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"Longitude"},"y":{"type":"field","field":"Latitude"},"size":{"type":"value","value":10.0},"angle":{"type":"value","value":0.0},"line_color":{"type":"value","value":"red"},"line_alpha":{"type":"value","value":1.0},"line_width":{"type":"value","value":1},"line_join":{"type":"value","value":"bevel"},"line_cap":{"type":"value","value":"butt"},"line_dash":{"type":"value","value":[]},"line_dash_offset":{"type":"value","value":0},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":1.0},"hatch_color":{"type":"value","value":"red"},"hatch_alpha":{"type":"value","value":1.0},"hatch_scale":{"type":"value","value":12.0},"hatch_pattern":{"type":"value","value":null},"hatch_weight":{"type":"value","value":1.0},"marker":{"type":"value","value":"circle"}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"p1116","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"Longitude"},"y":{"type":"field","field":"Latitude"},"size":{"type":"value","value":10.0},"line_color":{"type":"value","value":"red"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":0.1},"hatch_color":{"type":"value","value":"red"},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Scatter","id":"p1117","attributes":{"tags":["apply_ranges"],"x":{"type":"field","field":"Longitude"},"y":{"type":"field","field":"Latitude"},"size":{"type":"value","value":10.0},"line_color":{"type":"value","value":"red"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"red"},"fill_alpha":{"type":"value","value":0.2},"hatch_color":{"type":"value","value":"red"},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1081","attributes":{"tools":[{"type":"object","name":"WheelZoomTool","id":"p1039","attributes":{"renderers":"auto","zoom_on_axis":false}},{"type":"object","name":"BoxZoomTool","id":"p1047","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p1040","attributes":{"syncable":false,"line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","handles":{"type":"object","name":"BoxInteractionHandles","id":"p1014","attributes":{"all":{"type":"object","name":"AreaVisuals","id":"p1013","attributes":{"fill_color":"white","hover_fill_color":"lightgray"}}}}}},"match_aspect":true}},{"type":"object","name":"HoverTool","id":"p1071","attributes":{"tags":["hv_created"],"renderers":[{"id":"p1118"}],"tooltips":[["Longitude","$x{custom}"],["Latitude","$y{custom}"]],"formatters":{"type":"map","entries":[["$x",{"type":"object","name":"CustomJSHover","id":"p1107","attributes":{"code":"\n        const projections = Bokeh.require(\"core/util/projections\");\n        const {snap_x, snap_y} = special_vars\n        const coords = projections.wgs84_mercator.invert(snap_x, snap_y)\n        return \"\" + (coords[0]).toFixed(4)\n    "}}],["$y",{"type":"object","name":"CustomJSHover","id":"p1108","attributes":{"code":"\n        const projections = Bokeh.require(\"core/util/projections\");\n        const {snap_x, snap_y} = special_vars\n        const coords = projections.wgs84_mercator.invert(snap_x, snap_y)\n        return \"\" + (coords[1]).toFixed(4)\n    "}}]]}}},{"type":"object","name":"PanTool","id":"p1095"},{"type":"object","name":"ResetTool","id":"p1096"}],"active_drag":{"id":"p1095"}}},"left":[{"type":"object","name":"LinearAxis","id":"p1089","attributes":{"visible":false,"ticker":{"type":"object","name":"MercatorTicker","id":"p1099","attributes":{"mantissas":[1,2,5],"dimension":"lat"}},"formatter":{"type":"object","name":"MercatorTickFormatter","id":"p1100","attributes":{"dimension":"lat"}},"axis_label":"Latitude","major_label_policy":{"type":"object","name":"AllLabels","id":"p1092"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p1084","attributes":{"visible":false,"ticker":{"type":"object","name":"MercatorTicker","id":"p1097","attributes":{"mantissas":[1,2,5],"dimension":"lon"}},"formatter":{"type":"object","name":"MercatorTickFormatter","id":"p1098","attributes":{"dimension":"lon"}},"axis_label":"Longitude","major_label_policy":{"type":"object","name":"AllLabels","id":"p1087"}}}],"center":[{"type":"object","name":"Grid","id":"p1088","attributes":{"axis":{"id":"p1084"},"grid_line_color":null}},{"type":"object","name":"Grid","id":"p1093","attributes":{"dimension":1,"axis":{"id":"p1089"},"grid_line_color":null}}],"frame_width":500,"frame_height":300,"min_border_top":10,"min_border_bottom":10,"min_border_left":10,"min_border_right":10,"output_backend":"webgl","match_aspect":true}},{"type":"object","name":"Spacer","id":"p1125","attributes":{"name":"HSpacer01677","stylesheets":["\n:host(.pn-loading):before, .pn-loading:before {\n  background-color: #c3c3c3;\n  mask-size: auto calc(min(50%, 400px));\n  -webkit-mask-size: auto calc(min(50%, 400px));\n}",{"id":"p1018"},{"id":"p1016"},{"id":"p1017"}],"min_width":0,"margin":0,"sizing_mode":"stretch_width","align":"start"}}]}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"gap","kind":"Any","default":""},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"ReactiveESM1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"JSComponent1","properties":[{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"ReactComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"AnyWidgetComponent1","properties":[{"name":"use_shadow_dom","kind":"Any","default":true},{"name":"esm_constants","kind":"Any","default":{"type":"map"}}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"max_notifications","kind":"Any","default":5},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_rendered","kind":"Any","default":false},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"TemplateEditor1","properties":[{"name":"layout","kind":"Any","default":[]}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"request_value1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"_synced","kind":"Any","default":null},{"name":"_request_sync","kind":"Any","default":0}]}]}};
  var render_items = [{"docid":"859e6e40-a214-4d37-9c90-b4720c41dae3","roots":{"p1015":"e34a8d75-df1a-4830-8878-7fba205a1593"},"root_ids":["p1015"]}];
  var docs = Object.values(docs_json)
  if (!docs) {
    return
  }
  const py_version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')
  async function embed_document(root) {
    var Bokeh = get_bokeh(root)
    await Bokeh.embed.embed_items_notebook(docs_json, render_items);
    for (const render_item of render_items) {
      for (const root_id of render_item.root_ids) {
    const id_el = document.getElementById(root_id)
    if (id_el.children.length && id_el.children[0].hasAttribute('data-root-id')) {
      const root_el = id_el.children[0]
      root_el.id = root_el.id + '-rendered'
      for (const child of root_el.children) {
            // Ensure JupyterLab does not capture keyboard shortcuts
            // see: https://jupyterlab.readthedocs.io/en/4.1.x/extension/notebook.html#keyboard-interaction-model
        child.setAttribute('data-lm-suppress-shortcuts', 'true')
      }
    }
      }
    }
  }
  function get_bokeh(root) {
    if (root.Bokeh === undefined) {
      return null
    } else if (root.Bokeh.version !== py_version) {
      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(py_version)) {
    return null
      }
      return root.Bokeh.versions.get(py_version);
    } else if (root.Bokeh.version === py_version) {
      return root.Bokeh
    }
    return null
  }
  function is_loaded(root) {
    var Bokeh = get_bokeh(root)
    return (Bokeh != null && Bokeh.Panel !== undefined)
  }
  if (is_loaded(root)) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (is_loaded(root)) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
      var Bokeh = get_bokeh(root)
      if (Bokeh == null || Bokeh.Panel == null) {
            console.warn("Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing");
      } else {
        console.warn("Panel: WARNING: Attempting to render but not all required libraries could be resolved.")
        embed_document(root)
      }
        }
      }
    }, 25, root)
  }
})(window);</script>
</div>
</div>
</section>
</section>
</section>
<section id="step-2-data-wrangling" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="step-2-data-wrangling">STEP 2 Data wrangling</h2>
<section id="load-sample-data" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="load-sample-data">Load sample data</h3>
<p>You should now have the sample data downloaded, but you still need to open it up so you can use it. First, you’ll need the path to your data.</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Replace <code>data_path</code> with a descriptive name</li>
<li>Check your data directory for the file name of the streamflow data, and put it in the place of <code>data-filename-here</code></li>
</ol>
</div>
</div>
<div id="c3ef559a" class="cell student-code" data-highlight="true" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>data_path <span class="op">=</span> project.project_dir <span class="op">/</span> <span class="st">'data-filename-here.csv'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="be0d6cc3" class="cell answer-code" data-highlight="true" data-execution_count="10">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>nwis_path <span class="op">=</span> project.project_dir <span class="op">/</span> <span class="st">'cheyenne_streamflow_1934_2024.csv'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s take a look at the raw data (make sure to replace <code>nwis_path</code> with the name of your variable!):</p>
<div id="3f007c71" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>head <span class="op">-</span>n <span class="dv">5</span> $nwis_path</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>datetime,site_no,00060_Mean,00060_Mean_cd,00065_Mean,00065_Mean_cd
1934-10-01 00:00:00+00:00,06423500,54.0,A,,
1934-10-02 00:00:00+00:00,06423500,51.0,A,,
1934-10-03 00:00:00+00:00,06423500,51.0,A,,
1934-10-04 00:00:00+00:00,06423500,54.0,A,,</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>The cell below imports <code>CSV</code> data like the flood data into Python. A useful method for looking at the <strong>datatypes</strong> in your <code>pd.DataFrame</code> is the <code>pd.DataFrame.info()</code> method.</p>
<ol type="1">
<li>Replace <code>dataframe</code> with a descriptive name for your DataFrame variable</li>
<li>Run the cell to see the datatypes of each column.</li>
<li>Try <strong>uncommenting</strong> lines one by one by deleting the <code>#</code> at the beginning and running the code again.</li>
</ol>
<p>What changes? Why do you think those lines are needed?</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>In Python, you will see both <strong>methods</strong> and <strong>functions</strong> when you want to give the computer some instructions. This is an <em>important and tricky</em> distinction. For right now – functions have all of their arguments/parameters <strong>inside</strong> the parentheses, as in <code>dataretrieval.nwis.get_discharge_measurements()</code>. For <strong>methods</strong>, the first argument is always some kind of Python object that is placed <strong>before</strong> the method. For example, take a look at the next cell for an example of using the <code>pd.DataFrame.info()</code> <strong>method</strong>.</p>
</div>
</div></div><div id="2042f36e" class="cell student-code" data-highlight="true" data-execution_count="12">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dataframe <span class="op">=</span> pd.read_csv(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    data_path,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#index_col='datetime',</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">#parse_dates=True)</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>dataframe.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b1a8685a" class="cell answer-code" data-highlight="true" data-execution_count="13">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>nwis_df <span class="op">=</span> pd.read_csv(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    nwis_path,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    index_col<span class="op">=</span><span class="st">'datetime'</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    parse_dates<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>nwis_df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 32866 entries, 1934-10-01 00:00:00+00:00 to 2024-09-30 00:00:00+00:00
Data columns (total 5 columns):
 #   Column         Non-Null Count  Dtype  
---  ------         --------------  -----  
 0   site_no        32866 non-null  int64  
 1   00060_Mean     32866 non-null  float64
 2   00060_Mean_cd  32866 non-null  object 
 3   00065_Mean     1592 non-null   float64
 4   00065_Mean_cd  1592 non-null   object 
dtypes: float64(2), int64(1), object(2)
memory usage: 1.5+ MB</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>What column do you think the streamflow, or discharge, measurements are in?</p>
</div>
</div>
</section>
<section id="organize-your-data-descriptively" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="organize-your-data-descriptively">Organize your data descriptively</h3>
<p>It’s important to make sure that your code is easy to read. Even if you don’t plan to share it, <strong>you</strong> will likely need to read code you’ve written in the future!</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Using the code below as a starting point, select the discharge column and rename it to something descriptive:</p>
<ol type="1">
<li>Identify the discharge/streamflow column.</li>
<li>Replace <code>discharge_column_name</code> with the discharge column name.</li>
<li>Replace <code>new_column_name</code> with a descriptive name. We recommend including the <strong>units</strong> of the discharge values in the column name as a way to keep track of them.</li>
</ol>
</div>
</div>
<div id="85b9c775" class="cell student-code" data-highlight="true" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>discharge_df <span class="op">=</span> (</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    nwis_df</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select only the discharge column as a DataFrame</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    [[<span class="st">'discharge_column_name'</span>]]</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Rename the discharge column</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">'discharge_column_name'</span>: <span class="st">'new_column_name'</span>})</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>discharge_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="1efab556" class="cell answer-code" data-highlight="true" data-execution_count="15">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>discharge_df <span class="op">=</span> (</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    nwis_df</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select only the discharge column as a DataFrame</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    [[<span class="st">'00060_Mean'</span>]]</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Rename the discharge column</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">'00060_Mean'</span>: <span class="st">'streamflow_cfs'</span>})</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>discharge_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">streamflow_cfs</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">datetime</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1934-10-01 00:00:00+00:00</td>
<td>54.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1934-10-02 00:00:00+00:00</td>
<td>51.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1934-10-03 00:00:00+00:00</td>
<td>51.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1934-10-04 00:00:00+00:00</td>
<td>54.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1934-10-05 00:00:00+00:00</td>
<td>54.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-09-26 00:00:00+00:00</td>
<td>103.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2024-09-27 00:00:00+00:00</td>
<td>94.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-09-28 00:00:00+00:00</td>
<td>90.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2024-09-29 00:00:00+00:00</td>
<td>83.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-09-30 00:00:00+00:00</td>
<td>73.6</td>
</tr>
</tbody>
</table>

<p>32866 rows × 1 columns</p>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="callout callout-style-default callout-tip callout-titled" title="Strings">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Strings
</div>
</div>
<div class="callout-body-container callout-body">
<p>How does a computer tell the difference between a <strong>name</strong> which is linked to a value, and a <strong>string</strong> of characters to be interpreted as text (like a column name)?</p>
<p>In most programming languages, we have to put quotes around strings of characters that are meant to be interpreted <strong>literally</strong> as text rather than <strong>symbolically</strong> as a variable. In Python, you can use either single <code>'</code> or double <code>"</code> quotes around strings. If you forget to put quotes around your strings, Python will try to interpret them as variable <strong>names</strong> instead, and will probably give you a <code>NameError</code> when it can’t find the linked value.</p>
</div>
</div></div></section>
</section>
<section id="step-3-visualize-the-flood" class="level2">
<h2 class="anchored" data-anchor-id="step-3-visualize-the-flood">STEP 3: Visualize the flood</h2>
<p>Visualizing the data will help make sure that everything is formatted correctly and makes sense. It also helps later on with communicating your results.</p>
<section id="can-we-see-the-flood-in-the-streamflow-data" class="level3">
<h3 class="anchored" data-anchor-id="can-we-see-the-flood-in-the-streamflow-data">Can we see the flood in the streamflow data?</h3>
<p>Let’s take a look at the data from February - September, 2019. This should let us see the peak streamflow values and when they occurred.</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Below, you will see an example of how to subset your streamflow data by date.We do this using the <code>.loc</code> attribute of your <code>DataFrame</code>, which is a powerful tool for selecting the rows you want. Because the dates are in the Python <code>datetime64</code> format, you can select based on the year and month, without needing to type out dates or times!</p>
<ol type="1">
<li>Replace <code>dataframe_name</code> with your streamflow <code>DataFrame</code> name.</li>
<li>Save the result to a descriptive variable name, and call it at the end of the cell for testing.</li>
</ol>
</div>
</div>
<p>You can find some <a href="https://www.earthdatascience.org/courses/use-data-open-source-python/use-time-series-data-in-python/date-time-types-in-pandas-python/subset-time-series-data-python/">examples of subsetting time series data in the textbook</a>.</p>
<div id="25477813" class="cell student-code" data-highlight="true" data-execution_count="16">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>dataframe_name.loc[<span class="st">'2019-02'</span>:<span class="st">'2019-09'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="6f01cdb0" class="cell answer-code" data-highlight="true" data-execution_count="17">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>flood_df <span class="op">=</span> discharge_df.loc[<span class="st">'2019-02'</span>:<span class="st">'2019-09'</span>]</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>flood_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">streamflow_cfs</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">datetime</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2019-02-01 00:00:00+00:00</td>
<td>147.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2019-02-02 00:00:00+00:00</td>
<td>192.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2019-02-03 00:00:00+00:00</td>
<td>233.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2019-02-04 00:00:00+00:00</td>
<td>244.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2019-02-05 00:00:00+00:00</td>
<td>234.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2019-09-26 00:00:00+00:00</td>
<td>419.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2019-09-27 00:00:00+00:00</td>
<td>416.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2019-09-28 00:00:00+00:00</td>
<td>430.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2019-09-29 00:00:00+00:00</td>
<td>631.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2019-09-30 00:00:00+00:00</td>
<td>572.0</td>
</tr>
</tbody>
</table>

<p>242 rows × 1 columns</p>
</div>
</div>
</div>
</section>
<section id="create-a-line-plot-with-python" class="level3">
<h3 class="anchored" data-anchor-id="create-a-line-plot-with-python">Create a line plot with Python</h3>
<p>Next, plot your subsetted data. Don’t forget to label your plot!</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div id="68634dd1" class="cell student-code" data-highlight="true" data-execution_count="18">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    dataframe_name</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    .plot(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>        xlabel<span class="op">=</span><span class="st">''</span>, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>        ylabel<span class="op">=</span><span class="st">''</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">''</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="f4c923f1" class="cell answer-code" data-highlight="true" data-execution_count="19">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    flood_df</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    .plot(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        xlabel<span class="op">=</span><span class="st">'Date'</span>, </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        ylabel<span class="op">=</span><span class="st">'Streamflow (cfs)'</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">'Streamflow on the Cheyenne River during a flood'</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>        legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="flood-stars_files/figure-html/cell-20-output-1.png" width="610" height="464" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>You should be able to see the flood in your data going up above 12000 cfs at its peak! In the next section, you’ll analyze how unusual that is.</p>
</section>
</section>
<section id="step-4-analyse-the-flood" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="step-4-analyse-the-flood">STEP 4: Analyse the flood</h2>
<p>As scientists and engineers, we are interested in not just describing a flood, but in understanding how often we would expect an event that severe or extreme to happen. Some applications we need this information for include:</p>
<ul>
<li>Designing and developing engineering standards for bridges and roads to withstand flooding</li>
<li>Choosing the capacity of water treatment plants to accommodate flood waters</li>
<li>Computing flood risk maps and choosing where to build</li>
<li>Determining flood insurance rates</li>
</ul>
<p>The exceedance probability is a simple, data-driven way to quantify how unusual a flood is and how often we can expect similar events to happen. We calculate exceedance probability by counting how many years with floods the same size or larger have been recorded, or ranking the and dividing by the number of years we have records for:</p>
<p><span class="math display">\[P_e = \frac{\text{Annual peak flow rank}}{\text{Years of record}}\]</span></p>
<p>This value tells us historically what the likelihood was of a flood of a certain size or larger each year, or the <strong>exceedance probability</strong>. We can also express how unusual a flood is with the <strong>return period</strong>, or an amount of time during which we’d expect there to be about one flood the same size or larger. The return period is the reciprocal of the exceedance probability:</p>
<p><span class="math display">\[R = \frac{\text{Years of record}}{\text{Annual peak flow rank}}\]</span></p>
<p>As an example – suppose a streamflow of <span class="math inline">\(10000\)</span> cfs occurs <span class="math inline">\(4\)</span> times over a 100-year record. The exceedance probability would be <span class="math inline">\(\frac{4}{100} = .25\)</span> and the return period would be 25 years.</p>
<p>There are advantages and disadvantages to this method of calculating the <strong>exceedance probability</strong>. On one hand, we are not making any assumptions about how often floods occur, and there is no way to extrapolate to a size of flood that has never been observed. On the other hand, we can’t incorporate any information about how often floods occur nearby or in other locations, and the data record for streamflow is often less than the desired lifetime of the built environment.</p>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can learn more about exceedance probabilities and return periods in <a href="https://www.earthdatascience.org/courses/use-data-open-source-python/use-time-series-data-in-python/floods-return-period-and-probability/">this textbook page on the subject</a></p>
</div>
</div>
<p>Let’s start by accessing and plotting ALL the data available for this site. Then we’ll use a return period <strong>statistic</strong> to quantify how unusual it was.</p>
<section id="visualize-all-the-streamflow-data" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="visualize-all-the-streamflow-data">Visualize all the streamflow data</h3>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the cell below, plot the entire time series of streamflow data, without any parameters.</p>
</div>
</div>
<div id="88029dbf" class="cell student-code" data-highlight="true" data-execution_count="20">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the entire streamflow time series</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="99ddbe0d" class="cell answer-code" data-highlight="true" data-execution_count="21">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the entire streamflow time series</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    discharge_df</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    .plot(</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        xlabel<span class="op">=</span><span class="st">'Date'</span>, </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>        ylabel<span class="op">=</span><span class="st">'Streamflow (cfs)'</span>,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">'90 Years of Streamflow on the Cheyenne River'</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>        legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="flood-stars_files/figure-html/cell-22-output-1.png" width="610" height="422" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do you notice anything about this plot?</p>
</div>
</div>
<p>First things first – this plot looks a little fuzzy because it is trying to fit too many data points in a small area. There aren’t enough pixels in this plot to represent all the data points! One way to improve this is by <strong>resampling</strong> the data to <strong>annual maxima</strong>. That way we still get the same peak streamflows, but the computer will be able to plot all the values without overlapping.</p>

<div class="no-row-height column-margin column-container"><div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Resampling</strong> means changing the time interval between time series observations - in this case from daily to annual.</p>
</div>
</div></div><div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>Read about <a href="https://www.earthdatascience.org/courses/use-data-open-source-python/use-time-series-data-in-python/date-time-types-in-pandas-python/resample-time-series-data-pandas-python/">different ways to resample time series data in your textbook</a></p>
<p>You can use a <a href="https://pandas.pydata.org/docs/dev/user_guide/timeseries.html#timeseries-offset-aliases">list of <strong>offset aliases</strong></a> to look up how to specify the final dates. This list is pretty hard to find - you might want to bookmark it or check back with this page if you need it again.</p>
</div>
</div>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Resample your <code>DataFrame</code> to get an annual maximum:</p>
<ol type="1">
<li>Replace <code>dataframe_name</code> with the name of your <code>DataFrame</code>.</li>
<li>Replace <code>offset_alias</code> with the correct offset alias from the <a href="https://pandas.pydata.org/docs/dev/user_guide/timeseries.html#timeseries-offset-aliases">pandas documentation</a></li>
<li>Save the results to a new, descriptive variable name, and display the results of the resampling.</li>
</ol>
</div>
</div>
<div id="35f61933" class="cell student-code" data-highlight="true" data-execution_count="22">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resample to annual maxima</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>dataframe_name.resample(offset_alias).<span class="bu">max</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="81e2aa81" class="cell answer-code" data-highlight="true" data-execution_count="23">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resample to annual maxima</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>peaks_df <span class="op">=</span> discharge_df.resample(<span class="st">'YS'</span>).<span class="bu">max</span>()</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>peaks_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">streamflow_cfs</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">datetime</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1934-01-01 00:00:00+00:00</td>
<td>2700.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1935-01-01 00:00:00+00:00</td>
<td>39000.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1936-01-01 00:00:00+00:00</td>
<td>1680.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1937-01-01 00:00:00+00:00</td>
<td>16000.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1938-01-01 00:00:00+00:00</td>
<td>4500.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-01-01 00:00:00+00:00</td>
<td>1800.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2021-01-01 00:00:00+00:00</td>
<td>5170.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2022-01-01 00:00:00+00:00</td>
<td>1540.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-01-01 00:00:00+00:00</td>
<td>6740.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-01-01 00:00:00+00:00</td>
<td>3770.0</td>
</tr>
</tbody>
</table>

<p>91 rows × 1 columns</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Plot your resampled data.</p>
</div>
</div>
<div id="e6319a32" class="cell student-code" data-highlight="true" data-execution_count="24">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot annual maximum streamflow values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="5a1d702e" class="cell answer-code" data-highlight="true" data-execution_count="25">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot annual maximum streamflow values</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>peaks_df.plot(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">4</span>),</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    xlabel<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    ylabel<span class="op">=</span><span class="st">'Daily Streamflow (cfs)'</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Annual Maximum Daily Streamflow Values on the Cheyenne River'</span>,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="flood-stars_files/figure-html/cell-26-output-1.png" width="685" height="376" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write a headline and 2-3 sentence description of your plot. What is your visual estimate of the return period was for the flood in 2019?</p>
</div>
</div>
</section>
<section id="select-relevant-data" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="select-relevant-data">Select relevant data</h3>
<p>When calculating exceedance probabilities, we are making an assumption of <strong>stationarity</strong>, meaning that all the peak streamflows are drawn from the same <strong>probability distribution</strong>. Put another way, we only want to include data from years where the conditions on the river are similar to what they are now.</p>
<p>Did you notice that the streamflow values from before 1950 or so? You should investigate any obvious causes of that discrepancy so we know if the pre-1950 data is relevant to current conditions.</p>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>What are some possible causes for peak streamflows to decrease systematically?</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="callout-info" title="Climate Change and Stationarity">
<p>One of the problems with adapting to climate change is that we can no longer assume stationarity in a lot of contexts. As scientists, we don’t yet have standard methods for incorporating climate change into flood return period calculations. You can read more about the debate of stationarity, climate change, and return periods in <a href="https://www.science.org/doi/10.1126/science.1151915">a paper called ‘Stationarity is Dead’</a> and the many related response papers.</p>
</div></div><p>It turns out that construction on the Oahe dam on the Cheyenne River was started in 1948. We therefor don’t want to include any streamflow measurements before that date, because the Cheyenne River now as a much different flood response due to the dam. Dams tend to reduce peak streamflow, depending on how they are managed, but can cause other problems in the process.</p>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>Learn more about the Oahe Dam on <a href="https://en.wikipedia.org/wiki/Oahe_Dam">its Wikipedia page</a>. You can also find some local perspectives on the dam in some of the articles about the 2019 flood at the beginning of this coding challenge.</p>
</div>
</div>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remove years of data before the construction of the Oahe Dam. You can use a colon inside the square brackets of the <code>.loc</code> attribute to show that you would like all dates after a certain value, e.g.&nbsp;<code>'1950':</code></p>
</div>
</div>
<div id="6c3045c3" class="cell student-code" data-highlight="true" data-execution_count="26">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select data from after dam construction</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="00905ad1" class="cell answer-code" data-highlight="true" data-execution_count="27">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>peaks_df <span class="op">=</span> peaks_df.loc[<span class="st">'1948'</span>:]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>peaks_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">streamflow_cfs</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">datetime</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1948-01-01 00:00:00+00:00</td>
<td>4460.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1949-01-01 00:00:00+00:00</td>
<td>6500.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1950-01-01 00:00:00+00:00</td>
<td>3920.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1951-01-01 00:00:00+00:00</td>
<td>1900.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1952-01-01 00:00:00+00:00</td>
<td>8380.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-01-01 00:00:00+00:00</td>
<td>1800.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2021-01-01 00:00:00+00:00</td>
<td>5170.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2022-01-01 00:00:00+00:00</td>
<td>1540.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-01-01 00:00:00+00:00</td>
<td>6740.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-01-01 00:00:00+00:00</td>
<td>3770.0</td>
</tr>
</tbody>
</table>

<p>77 rows × 1 columns</p>
</div>
</div>
</div>
</section>
<section id="calculate-the-exceedance-probability-and-return-period-for-2019" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="calculate-the-exceedance-probability-and-return-period-for-2019">Calculate the exceedance probability and return period for 2019</h3>
<div class="callout callout-style-default callout-extra callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Looking for an Extra Challenge?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Calculate the <strong>exceedance probability</strong> and <strong>return period</strong> for each year of the <strong>annual</strong> data, and add them as columns to your DataFrame.</p>
<ol type="1">
<li>Replace <code>df</code> with the name of your <strong>annual maximum</strong> <code>DataFrame</code>.</li>
<li>Replace <code>col</code> with the name of your streamflow column</li>
<li>Calculate the return period using Python mathematical operators</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you use a Python mathematical operator on a <code>pandas.DataFrame</code> column, Python will do the calculation for every row in the <code>DataFrame</code> automatically!</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you rank the floods in your <code>DataFrame</code> with the <code>.rank()</code> method, you will need the ascending=False<code>parameter, by default the largest floods will have the higher number. We use</code>ascending=Falsa` to reverse the rankings, since higher rank should be lower exceedence probability.</p>
</div>
</div></div><div id="8134cc77" class="cell student-code" data-highlight="true" data-execution_count="28">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'exceed_prob'</span>] <span class="op">=</span> (df.rank(ascending<span class="op">=</span><span class="va">False</span>).col <span class="op">/</span> <span class="bu">len</span>(df))</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'return_period'</span>] <span class="op">=</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>peaks_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="fe173090" class="cell answer-code" data-highlight="true" data-execution_count="29">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a copy so this is a dataframe and not a view</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>peaks_df <span class="op">=</span> peaks_df.copy()</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate exceedance probability</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>peaks_df[<span class="st">'exceed_prob'</span>] <span class="op">=</span> (</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    peaks_df.rank(ascending<span class="op">=</span><span class="va">False</span>).streamflow_cfs </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">/</span> <span class="bu">len</span>(peaks_df)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate return period</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>peaks_df[<span class="st">'return_period'</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> peaks_df.exceed_prob</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>peaks_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">streamflow_cfs</th>
<th data-quarto-table-cell-role="th">exceed_prob</th>
<th data-quarto-table-cell-role="th">return_period</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">datetime</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1948-01-01 00:00:00+00:00</td>
<td>4460.0</td>
<td>0.558442</td>
<td>1.790698</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1949-01-01 00:00:00+00:00</td>
<td>6500.0</td>
<td>0.376623</td>
<td>2.655172</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1950-01-01 00:00:00+00:00</td>
<td>3920.0</td>
<td>0.623377</td>
<td>1.604167</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1951-01-01 00:00:00+00:00</td>
<td>1900.0</td>
<td>0.831169</td>
<td>1.203125</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1952-01-01 00:00:00+00:00</td>
<td>8380.0</td>
<td>0.311688</td>
<td>3.208333</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020-01-01 00:00:00+00:00</td>
<td>1800.0</td>
<td>0.844156</td>
<td>1.184615</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2021-01-01 00:00:00+00:00</td>
<td>5170.0</td>
<td>0.467532</td>
<td>2.138889</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2022-01-01 00:00:00+00:00</td>
<td>1540.0</td>
<td>0.896104</td>
<td>1.115942</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-01-01 00:00:00+00:00</td>
<td>6740.0</td>
<td>0.350649</td>
<td>2.851852</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-01-01 00:00:00+00:00</td>
<td>3770.0</td>
<td>0.649351</td>
<td>1.540000</td>
</tr>
</tbody>
</table>

<p>77 rows × 3 columns</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Select only the value for 2019.</p>
<ol type="1">
<li>Replace <code>dataframe_name</code> with the name of your <code>DataFrame</code></li>
<li>Inside the square brackets, type the year you want to select (2019). Make sure to surround the year with quotes, or Python will interpret this as a <strong>row number</strong>.</li>
</ol>
</div>
</div>
<div id="e3f6a137" class="cell student-code" data-highlight="true" data-execution_count="30">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>dataframe_name.loc[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b058c20d" class="cell answer-code" data-highlight="true" data-execution_count="31">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>peaks_df.loc[<span class="st">'2019'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">streamflow_cfs</th>
<th data-quarto-table-cell-role="th">exceed_prob</th>
<th data-quarto-table-cell-role="th">return_period</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">datetime</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2019-01-01 00:00:00+00:00</td>
<td>18400.0</td>
<td>0.038961</td>
<td>25.666667</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>What is the exceedance probability and return period for the 2019 floods on the Cheyenne River?</p>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("^(?!((http:|https:)\/\/))");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../notebooks/14-osm-map/map-stars.html" class="pagination-link" aria-label="Add a map to your website">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Add a map to your website</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../notebooks/02-flood/flood-download-stars.html" class="pagination-link" aria-label="Download streamflow data">
        <span class="nav-page-text">Download streamflow data</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://esiil.org/">
<p>About ESIIL</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://earthlab.colorado.edu/">
<p>About Earth Lab</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>