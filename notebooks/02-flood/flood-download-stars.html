<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Elsa Culler">
<meta name="author" content="Nate Quarderer">
<meta name="dcterms.date" content="2025-07-14">

<title>Download streamflow data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../notebooks/03-migration/migration-stars.html" rel="next">
<link href="../../notebooks/02-flood/flood-stars.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-f27ce4e7362ebaa9cf482d55f280051c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed slimcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/ESIIL_portal_dark.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-trying-to-run-some-codebrstrongget-startedstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Trying to run some code?<br><strong>Get Started</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-trying-to-run-some-codebrstrongget-startedstrong">    
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/01-get-started/python/index.html">
 <span class="dropdown-text">Get started with Python for Environmental Data Science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/01-get-started/r/index.html">
 <span class="dropdown-text">Get started with R for Environmental Data Science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/01-get-started/gee/index.html">
 <span class="dropdown-text">Get started with Google Earth Engine</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/01-get-started/docker/index.html">
 <span class="dropdown-text">Build Your Own Environment with Docker</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-guided-learningbrstrongtextbooksstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Guided learning<br><strong>Textbooks</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-guided-learningbrstrongtextbooksstrong">    
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/02-textbooks/ignite/index.html">
 <span class="dropdown-text">IGNITE Data Analytics for early-career researchers</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-attending-abrstrongclass-or-eventstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Attending a<br><strong>Class or Event</strong>?</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-attending-abrstrongclass-or-eventstrong">    
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04a-courses/foundations/01-fundamentals/index.html">
 <span class="dropdown-text">GEOG 5463/4463: Fundamentals of Earth Data Analytics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04a-courses/stars/index.html">
 <span class="dropdown-text">ESIIL Stars</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04a-courses/shortcourse/01-collaboration/index.html">
 <span class="dropdown-text">SHORT COURSE 1: Cloud Computing, Collaboration, and Communication</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04b-events/hyrsense/index.html">
 <span class="dropdown-text">HYR-SENSE</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04b-events/mefa/index.html">
 <span class="dropdown-text">MEFA</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/04b-events/css/index.html">
 <span class="dropdown-text">Chicago Symposium Series</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-we-want-yourbrstrongcontributionsstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">We want your<br><strong>Contributions</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-we-want-yourbrstrongcontributionsstrong">    
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/05-contribute/submit.html">
 <span class="dropdown-text">Submit a module</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/00-overviews/05-contribute/support.html">
 <span class="dropdown-text">Support the Learning Portal</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="http://earthdatascience.org"> 
<span class="menu-text">Classic<br>earthdatascience.org</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../notebooks/02-flood/flood-stars.html">UNIT 2: Flooding Coding Challenge</a></li><li class="breadcrumb-item"><a href="../../notebooks/02-flood/flood-download-stars.html">Download streamflow data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../pages/00-overviews/04a-courses/stars/index.html" class="sidebar-logo-link">
      <img src="../../img/ESIIL_Stars_logo.png" alt="ESIIL Stars" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../pages/00-overviews/04a-courses/stars/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ESIIL Stars</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 0: Build Your Online Portfolio</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../pages/03-git-github/03-github-portfolio/portfolio-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Build your Environmental Data Science portfolio</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 1: First Map in Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
 <span class="menu-text">pages/03-git-github/03-github-portfolio/map-stars.qmd</span>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.github.com/a/J_0CvUle" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try it on GitHub!</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 2: Flooding Coding Challenge</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/02-flood/flood-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Midwest underwater</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/02-flood/flood-download-stars.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Download streamflow data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.github.com/a/fL15Gx9A" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try it on GitHub!</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 3: Migration</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/03-migration/migration-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spring returns to the Great Plains</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/03-migration/migration-download-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Migration Data Download</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.github.com/a/d1mJm3oE" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try it on GitHub!</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">UNIT 4: Vegetation Health</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/05-vegetation/vegetation-stars.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Water Rights Restored to the Gila River</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.github.com/a/E5IoyfPO" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try it on GitHub!</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-national-water-information-service" id="toc-the-national-water-information-service" class="nav-link active" data-scroll-target="#the-national-water-information-service">The National Water Information Service</a>
  <ul class="collapse">
  <li><a href="#using-the-nwis-data-website" id="toc-using-the-nwis-data-website" class="nav-link" data-scroll-target="#using-the-nwis-data-website">Using the NWIS data website</a></li>
  <li><a href="#data-description-and-citation" id="toc-data-description-and-citation" class="nav-link" data-scroll-target="#data-description-and-citation">Data description and citation</a></li>
  </ul></li>
  <li><a href="#access-the-data-with-code" id="toc-access-the-data-with-code" class="nav-link" data-scroll-target="#access-the-data-with-code">Access the data with code</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<!-- Modified from https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/html/templates/banner/title-block.html -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../notebooks/02-flood/flood-stars.html">UNIT 2: Flooding Coding Challenge</a></li><li class="breadcrumb-item"><a href="../../notebooks/02-flood/flood-download-stars.html">Download streamflow data</a></li></ol></nav>
    <div class="esiil-title-goals page-columns page-full">
        <div class="quarto-title column-body">
                        <h1 class="title">
                Download streamflow data
            </h1>
                                    <p class="subtitle lead">
                Using the National Water Information Service
            </p>
                                
                    </div>
    
        
    <div class="no-row-height column-margin column-container"><div class="">
                        <img src="../../img/earth-analytics/flood-frequency/flood.png" width="100%">
                        
                        <div class="quarto-title-meta">

                            <div>
                            <div class="quarto-title-meta-heading">Authors</div>
                            <div class="quarto-title-meta-contents">
                                     <p>Elsa Culler </p>
                                     <p>Nate Quarderer </p>
                                  </div>
                          </div>
                            
                            <div>
                            <div class="quarto-title-meta-heading">Published</div>
                            <div class="quarto-title-meta-contents">
                              <p class="date">July 14, 2025</p>
                            </div>
                          </div>
                          
                            
                          </div>
                          
        </div></div></div>
</header>


<section id="the-national-water-information-service" class="level2">
<h2 class="anchored" data-anchor-id="the-national-water-information-service">The National Water Information Service</h2>
<p>US streamflow data are freely available online from the National Water Information Service (NWIS). These data are collected by the US Geological Survey by comparing the height, or <strong>stage</strong> of a river or stream with a series of flow measurements.</p>
<section id="using-the-nwis-data-website" class="level3">
<h3 class="anchored" data-anchor-id="using-the-nwis-data-website">Using the NWIS data website</h3>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>Read more about how the USGS collects streamflow data at the <a href="https://www.usgs.gov/index.php/special-topics/water-science-school/science/how-does-usgs-collect-streamflow-data">USGS Water Science School site</a></p>
</div>
</div>
<p>You’ll start out by previewing the data online so that you can get a feel for what it looks like. Then, you’ll access the data using the <a href="https://doi-usgs.github.io/dataretrieval-python/"><code>dataretrieval</code> Python package</a> maintained by the USGS.</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>To preview the data, follow along with the screenshots below to complete these steps:</p>
<ol type="1">
<li>Return to the Cheyenne River near Wasta site page.</li>
<li>Change the dates on the data.</li>
<li>Try downloading some data with your web browser to see what it looks like</li>
</ol>
</div>
</div>
<section id="step-1-open-up-the-site-page" class="level4">
<h4 class="anchored" data-anchor-id="step-1-open-up-the-site-page">Step 1: Open up the site page</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/11-preview-data.png" class="img-fluid figure-img"></p>
<figcaption>Return to the Cheyenne River near Wasta site page</figcaption>
</figure>
</div>
</section>
<section id="step-2-data-type" class="level4">
<h4 class="anchored" data-anchor-id="step-2-data-type">Step 2: Data type</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/12-data-type.png" class="img-fluid figure-img"></p>
<figcaption>Scroll down and switch the data type to Discharge instead of Gage Height</figcaption>
</figure>
</div>
</section>
<section id="step-2-change-the-plot-dates" class="level4">
<h4 class="anchored" data-anchor-id="step-2-change-the-plot-dates">Step 2: Change the plot dates</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/13-dates.png" class="img-fluid figure-img"></p>
<figcaption>Scroll up and select the dates you want to look at.</figcaption>
</figure>
</div>
</section>
<section id="step-3-look-at-the-data" class="level4">
<h4 class="anchored" data-anchor-id="step-3-look-at-the-data">Step 3: Look at the data</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/14-finish.png" class="img-fluid figure-img"></p>
<figcaption>Take a look at your data. What do you see? You can try changing some dates as well.</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>What do you notice about this data? You can think about:</p>
<ul>
<li>What type of data is it?</li>
<li>What dates in 2019 had the worst flooding?</li>
<li>How unusual were the 2019 floods?</li>
<li>Does anything about the data seem unusual to you?</li>
</ul>
</div>
</div>
</section>
<section id="step-4-look-at-some-raw-data" class="level4">
<h4 class="anchored" data-anchor-id="step-4-look-at-some-raw-data">Step 4: Look at some raw data</h4>
<p><img src="../../img/earth-analytics/flood-frequency/nwis-screenshots/15-download.png" class="img-fluid" alt="Click the Download Data button on the USGS site page, select Continuous Data, and then click the Retrieve button."> Open up the file you downloaded – it should automatically open in your web browser. Does this look like streamflow data to you?</p>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>Check out the <a href="https://waterdata.usgs.gov/nwis/?tab_delimited_format_info">NWIS documentation</a> to find out more about how these data are formatted.</p>
</div>
</div>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>What do you notice about the data? Write down your thoughts on:</p>
<ul>
<li>What separator or <strong>delimiter</strong> does the data use to separate columns?</li>
<li>What should the data types of each column be?</li>
<li>Which column contains the streamflow data?</li>
<li>Do you need to skip any rows that don’t contain data? How can you identify those rows?</li>
<li>Did you notice anything else?</li>
</ul>
</div>
</div>
</section>
</section>
<section id="data-description-and-citation" class="level3">
<h3 class="anchored" data-anchor-id="data-description-and-citation">Data description and citation</h3>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>Describe your data. Include the following information:</p>
<ol type="1">
<li>A 1-2 sentence description of the data</li>
<li>Data citation</li>
<li>What are the units?</li>
<li>What is the time interval for each data point?</li>
<li>Is there a “no data” value, or a value used to indicate when the sensor was broken or didn’t detect anything? (These are also known as NA, N/A, NaN, nan, or nodata values)</li>
</ol>
</div>
</div>
</section>
</section>
<section id="access-the-data-with-code" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="access-the-data-with-code">Access the data with code</h2>
<p>One way to access data is through an <strong>Application Programming Interface</strong>, or <strong>API</strong>. Luckily for us, the USGS has written a Python library to interface with the NWIS API, called <code>dataretrieval</code>. The <code>dataretrieval.nwis</code> <strong>submodule</strong> has a function or command for downloading stream discharge data from the NWIS!</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Import the <code>dataretrieval</code> library.</p>
<p>If you want to store the data so that you are not dependant on the API to keep working, you will also need the <code>earthpy</code> library for managing local files and the <code>pandas</code> library for loading a <code>csv</code> file. If you are going that route, import the libraries you need, making sure to follow PEP-8 guidelines by keeping your libraries in alphabetical order.</p>
</div>
</div>
<div id="a20a5b58" class="cell student-code" data-highlight="true" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import libraries</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="52c56f5a" class="cell answer-code" data-highlight="true" data-execution_count="2">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import libraries</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> dataretrieval</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> earthpy</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, we’ll set some parameters. You can use these to customize your workflow.</p>
<div id="02fba20c" class="cell" data-tags="[&quot;parameters&quot;]" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">id</span> <span class="op">=</span> <span class="st">'stars'</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>site_name <span class="op">=</span> <span class="st">'Cheyenne River'</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>year <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>data_dir <span class="op">=</span> <span class="st">'cheyenne-river-flood'</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>download_title <span class="op">=</span> <span class="st">'Cheyenne River Flood Frequency'</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>csv_filename <span class="op">=</span> <span class="st">'cheyenne_streamflow_1934_2024.csv'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>The sample code below needs some changes from you before it will run.</p>
<ol type="1">
<li>Find the site number on the site page for the Cheyenne River near Wasta gage.</li>
<li>Determine what date range you would like to download. For right now, start by downloading just the data</li>
<li>Define variables for the site number, start date, and end date to match the rest of the code. You can find the site number on the site page.</li>
<li>Download the data using the provided code.</li>
</ol>
<p>Note that the <code>dataretrieval.nwis.get_discharge_measurements()</code> function returns data in a format called a <code>pandas</code> <code>DataFrame</code>, as well as metadata in a format called a <code>NWIS_metadata</code>. That’s why we need two variables to store the results.</p>
</div>
</div>
<div class="callout callout-style-default callout-extra callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Looking for an Extra Challenge?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Try to write some code:</p>
<ol type="1">
<li>Store the data on your computer</li>
<li>Only download the data if it’s not on the computer already.</li>
<li>Load the data from your computer.</li>
</ol>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="callout callout-style-default callout-tip callout-titled" title="Water Years">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Water Years
</div>
</div>
<div class="callout-body-container callout-body">
<p>When we look at streamflow data, we usually try to download <strong>water years</strong> rather than calendar years. The water year in the Northern Hemisphere starts on October 1 of the previous calendar year and runs through September 31. For example, water year 2018 (or WY2018) runs from October 1, 2017 to September 31, 2018.</p>
<p>Why is the water year different? In most of the Northern Hemisphere, the snowpack is as low as it gets around October 1, and begins to build up for the winter at that point. When we’re keeping track of water fluxes, it’s easiest if we don’t need a count on how much water is in the snow pack at the start of the year.</p>
</div>
</div></div><div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>What parameter would you change in the code below if you wanted to switch locations?</p>
</div>
</div>
<div id="d23de56e" class="cell student-code" data-highlight="true" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define download parameters HERE</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get discharge data and metadata from NWIS</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>nwis_df, meta <span class="op">=</span> dataretrieval.nwis.get_discharge_measurements(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    sites<span class="op">=</span>site_number,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    start<span class="op">=</span>start_date,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    end<span class="op">=</span>end_date)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>nwis_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="0e2cf5a4" class="cell answer-code" data-highlight="true" data-execution_count="5">
<details class="code-fold">
<summary>See our solution!</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define download parameters</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>site_number <span class="op">=</span> <span class="st">'06423500'</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>start_date <span class="op">=</span> <span class="st">'1934-10-01'</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>end_date <span class="op">=</span> <span class="st">'2024-09-30'</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Get discharge data and metadata from NWIS if not already downloaded</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>project <span class="op">=</span> earthpy.project.Project(dirname<span class="op">=</span>data_dir)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>nwis_path <span class="op">=</span> project.project_dir <span class="op">/</span> csv_filename</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># NWIS is not reliable -- may take a few tries</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="kw">not</span> nwis_path.exists():</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        nwis_df, meta <span class="op">=</span> dataretrieval.nwis.get_dv(</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>            sites<span class="op">=</span>site_number,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            start<span class="op">=</span>start_date,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>            end<span class="op">=</span>end_date)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        nwis_df.to_csv(nwis_path)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>:</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Load from file</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>nwis_df <span class="op">=</span> pd.read_csv(nwis_path, index_col<span class="op">=</span><span class="st">'datetime'</span>, parse_dates<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Display downloaded data</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>nwis_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
**Final Configuration Loaded:**
{}</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">site_no</th>
<th data-quarto-table-cell-role="th">00060_Mean</th>
<th data-quarto-table-cell-role="th">00060_Mean_cd</th>
<th data-quarto-table-cell-role="th">00065_Mean</th>
<th data-quarto-table-cell-role="th">00065_Mean_cd</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">datetime</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1934-10-01 00:00:00+00:00</td>
<td>6423500</td>
<td>54.0</td>
<td>A</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1934-10-02 00:00:00+00:00</td>
<td>6423500</td>
<td>51.0</td>
<td>A</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1934-10-03 00:00:00+00:00</td>
<td>6423500</td>
<td>51.0</td>
<td>A</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1934-10-04 00:00:00+00:00</td>
<td>6423500</td>
<td>54.0</td>
<td>A</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1934-10-05 00:00:00+00:00</td>
<td>6423500</td>
<td>54.0</td>
<td>A</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-09-26 00:00:00+00:00</td>
<td>6423500</td>
<td>103.0</td>
<td>A</td>
<td>0.44</td>
<td>A</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2024-09-27 00:00:00+00:00</td>
<td>6423500</td>
<td>94.9</td>
<td>A</td>
<td>0.40</td>
<td>A</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-09-28 00:00:00+00:00</td>
<td>6423500</td>
<td>90.7</td>
<td>A</td>
<td>0.39</td>
<td>A</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2024-09-29 00:00:00+00:00</td>
<td>6423500</td>
<td>83.9</td>
<td>A</td>
<td>0.36</td>
<td>A</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-09-30 00:00:00+00:00</td>
<td>6423500</td>
<td>73.6</td>
<td>A, e</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>32866 rows × 5 columns</p>
</div>
</div>
</div>
<p>Now, let’s check the data:</p>
<div id="fdacf5e1" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>nwis_df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 32866 entries, 1934-10-01 00:00:00+00:00 to 2024-09-30 00:00:00+00:00
Data columns (total 5 columns):
 #   Column         Non-Null Count  Dtype  
---  ------         --------------  -----  
 0   site_no        32866 non-null  int64  
 1   00060_Mean     32866 non-null  float64
 2   00060_Mean_cd  32866 non-null  object 
 3   00065_Mean     1592 non-null   float64
 4   00065_Mean_cd  1592 non-null   object 
dtypes: float64(2), int64(1), object(2)
memory usage: 1.5+ MB</code></pre>
</div>
</div>
<p>The <code>dataretrieval</code> library has taken care of a lot of the work of accessing and importing NWIS data. However, we still want to clean up the data a little, by selecting the column we want and renaming it with a descriptive label. You should also double-check that any <code>NODATA</code> values are properly encoded, and that the data types make sense! For example, plotting a histogram can be a useful way to see if the data values are what you expect.</p>
<div class="callout callout-style-default callout-respond callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflect and Respond
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do you see any problems with your data? List out three things that you checked to make sure that you won’t have problems down the line.</p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("^(?!((http:|https:)\/\/))");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../notebooks/02-flood/flood-stars.html" class="pagination-link" aria-label="The Midwest underwater">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">The Midwest underwater</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../notebooks/03-migration/migration-stars.html" class="pagination-link" aria-label="Spring returns to the Great Plains">
        <span class="nav-page-text">Spring returns to the Great Plains</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://esiil.org/">
<p>About ESIIL</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://earthlab.colorado.edu/">
<p>About Earth Lab</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>