<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.34">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Vector data is one of the two most common spatial data types, representing points, lines, and polygons. You can use vector data for earth data sciencewith the Geopandas package in Python.">

<title>Introduction to Spatial Vector Data File Formats in Open Source Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../pages/02-file-formats-eds/04-text-file-formats-eds/02-markdown.html" rel="prev">
<script src="../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-c8ad9e5dbd60b7b70b38521ab19b7da4.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-514e886b990c1bda1114661601344f56.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed slimcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../img/ESIIL_portal_dark.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-trying-to-run-some-codebrstrongget-startedstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Trying to run some code?<br><strong>Get Started</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-trying-to-run-some-codebrstrongget-startedstrong">    
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/01-get-started/python/index.html">
 <span class="dropdown-text">Get started with Python for Environmental Data Science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/01-get-started/r/index.html">
 <span class="dropdown-text">Get Started with R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/01-get-started/gee/index.html">
 <span class="dropdown-text">Get started with Google Earth Engine</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/01-get-started/docker/index.html">
 <span class="dropdown-text">Build Your Own Environment with Docker</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-guided-learningbrstrongtextbooksstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Guided learning<br><strong>Textbooks</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-guided-learningbrstrongtextbooksstrong">    
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/02-textbooks/ignite/index.html">
 <span class="dropdown-text">IGNITE Data Analytics for early-career researchers</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-attending-abrstrongclass-or-eventstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Attending a<br><strong>Class or Event</strong>?</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-attending-abrstrongclass-or-eventstrong">    
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/04a-courses/eda/01-fundamentals/index.html">
 <span class="dropdown-text">GEOG 5463/4463: Fundamentals of Earth Data Analytics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/04a-courses/stars/index.html">
 <span class="dropdown-text">ESIIL Stars</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/04a-courses/shortcourse/01-collaboration/index.html">
 <span class="dropdown-text">SHORT COURSE 1: Cloud Computing, Collaboration, and Communication</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/04b-events/hyrsense/index.html">
 <span class="dropdown-text">HYR-SENSE</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/04b-events/mefa/index.html">
 <span class="dropdown-text">MEFA 2024</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/04b-events/esa25/index.html">
 <span class="dropdown-text">ESA 2025</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/04b-events/css/index.html">
 <span class="dropdown-text">Chicago Symposium Series</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-we-want-yourbrstrongcontributionsstrong" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">We want your<br><strong>Contributions</strong></span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-we-want-yourbrstrongcontributionsstrong">    
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/05-contribute/submit.html">
 <span class="dropdown-text">Submit a module</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../pages/00-overviews/05-contribute/support.html">
 <span class="dropdown-text">Support the Learning Portal</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="http://earthdatascience.org/classic/"> 
<span class="menu-text">Classic<br>earthdatascience.org</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../pages/02-file-formats-eds/05-spatial-data-formats-eds/03-vector-data.html">Spatial Data Formats</a></li><li class="breadcrumb-item"><a href="../../../pages/02-file-formats-eds/05-spatial-data-formats-eds/03-vector-data.html">Introduction to Spatial Vector Data File Formats in Open Source Python</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../../pages/00-overviews/01-get-started/r/index.html" class="sidebar-logo-link">
      <img src="../../../img/R-logo.png" alt="Get Started with R" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../pages/03-git-github/01-intro-version-control/01-intro-version-control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Version Control</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../pages/03-git-github/02-github-collaboration/01-intro-collaboration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Use GitHub to Collaborate on Open Science Projects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../pages/03-git-github/02-github-collaboration/02-pull-requests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Propose changes to GitHub repositories</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../pages/03-git-github/02-github-collaboration/06-pr-activity-fork.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practice Forking a GitHub Repository and Submitting Pull Requests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../pages/03-git-github/02-github-collaboration/07-pr-activity-branch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practice Submitting Pull Requests</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../pages/01-reproducible-science-tools/open-reproducible-science/01-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Open Science Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../pages/01-reproducible-science-tools/open-reproducible-science/02-open-science-tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tools For Open Reproducible Science</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../pages/01-reproducible-science-tools/open-reproducible-science/03-best-practices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How To Organize Your Project: Best Practices for Open Reproducible Science</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Text File Formats</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../pages/02-file-formats-eds/04-text-file-formats-eds/02-markdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Format Text With Markdown</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Spatial Data Formats</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../pages/02-file-formats-eds/05-spatial-data-formats-eds/03-vector-data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Introduction to Spatial Vector Data File Formats in Open Source Python</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#about-spatial-vector-data" id="toc-about-spatial-vector-data" class="nav-link active" data-scroll-target="#about-spatial-vector-data">About Spatial Vector Data</a></li>
  <li><a href="#introduction-to-the-shapefile-file-format-which-stores-points-lines-and-polygons" id="toc-introduction-to-the-shapefile-file-format-which-stores-points-lines-and-polygons" class="nav-link" data-scroll-target="#introduction-to-the-shapefile-file-format-which-stores-points-lines-and-polygons">Introduction to the Shapefile File Format Which Stores Points, Lines, and Polygons</a></li>
  <li><a href="#geojson-files-and-other-vector-formats" id="toc-geojson-files-and-other-vector-formats" class="nav-link" data-scroll-target="#geojson-files-and-other-vector-formats">GeoJSON Files and Other Vector Formats</a></li>
  <li><a href="#what-data-are-stored-in-spatial-vector-formats" id="toc-what-data-are-stored-in-spatial-vector-formats" class="nav-link" data-scroll-target="#what-data-are-stored-in-spatial-vector-formats">What Data Are Stored In Spatial Vector Formats?</a></li>
  <li><a href="#import-shapefile-data-into-python-using-geopandas" id="toc-import-shapefile-data-into-python-using-geopandas" class="nav-link" data-scroll-target="#import-shapefile-data-into-python-using-geopandas">Import Shapefile Data Into Python Using Geopandas</a>
  <ul class="collapse">
  <li><a href="#geopandas-creates-geodataframes-which-have-the-same-structure-as-pandas-dataframes" id="toc-geopandas-creates-geodataframes-which-have-the-same-structure-as-pandas-dataframes" class="nav-link" data-scroll-target="#geopandas-creates-geodataframes-which-have-the-same-structure-as-pandas-dataframes">GeoPandas Creates GeoDataFrames Which Have the Same Structure As Pandas DataFrames</a></li>
  <li><a href="#check-the-spatial-vector-data-type" id="toc-check-the-spatial-vector-data-type" class="nav-link" data-scroll-target="#check-the-spatial-vector-data-type">Check the Spatial Vector Data Type</a></li>
  </ul></li>
  <li><a href="#open-vector-point-data" id="toc-open-vector-point-data" class="nav-link" data-scroll-target="#open-vector-point-data">Open Vector Point Data</a></li>
  <li><a href="#creating-maps-using-multiple-shapefiles" id="toc-creating-maps-using-multiple-shapefiles" class="nav-link" data-scroll-target="#creating-maps-using-multiple-shapefiles">Creating Maps Using Multiple Shapefiles</a></li>
  <li><a href="#challenge-2-create-a-global-map" id="toc-challenge-2-create-a-global-map" class="nav-link" data-scroll-target="#challenge-2-create-a-global-map">Challenge 2: Create a Global Map</a></li>
  <li><a href="#spatial-data-attributes" id="toc-spatial-data-attributes" class="nav-link" data-scroll-target="#spatial-data-attributes">Spatial Data Attributes</a>
  <ul class="collapse">
  <li><a href="#challenge-plot-cities-data" id="toc-challenge-plot-cities-data" class="nav-link" data-scroll-target="#challenge-plot-cities-data">Challenge: Plot Cities Data</a></li>
  </ul></li>
  <li><a href="#optional-geoprocessing-vector-data-geoprocessing-in-python-clip-data" id="toc-optional-geoprocessing-vector-data-geoprocessing-in-python-clip-data" class="nav-link" data-scroll-target="#optional-geoprocessing-vector-data-geoprocessing-in-python-clip-data">Optional: Geoprocessing Vector Data Geoprocessing in Python: Clip Data</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<!-- Modified from https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/html/templates/banner/title-block.html -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../pages/02-file-formats-eds/05-spatial-data-formats-eds/03-vector-data.html">Spatial Data Formats</a></li><li class="breadcrumb-item"><a href="../../../pages/02-file-formats-eds/05-spatial-data-formats-eds/03-vector-data.html">Introduction to Spatial Vector Data File Formats in Open Source Python</a></li></ol></nav>
    <div class="esiil-title-goals page-columns page-full">
        <div class="quarto-title column-body">
                        <h1 class="title">
                Introduction to Spatial Vector Data File Formats in Open Source Python
            </h1>
                                                <div class="description">
                <p>Vector data is one of the two most common spatial data types, representing points, lines, and polygons. You can use vector data for earth data sciencewith the <strong>Geopandas</strong> package in <strong>Python</strong>.</p>
            </div>
                    
                        <div class="esiil-learning-goals-title">Learning Goals:</div>
            <ul class="esiil-learning-goals">
                                <li class="esiil-learning-goal">true</li>
                                <li class="esiil-learning-goal">Open a shapefile in <strong>Python</strong> using <strong>Geopandas</strong> - <code>gpd.read_file()</code>.</li>
                                <li class="esiil-learning-goal">Plot a shapfile in <strong>Python</strong> using <strong>Geopandas</strong> - <code>gpd.plot()</code>.</li>
                            </ul>
                    </div>
    
        
    <div class="no-row-height column-margin column-container"><div class="">
                        
                        <div class="quarto-title-meta">

                            <div>
                            <div class="quarto-title-meta-heading">Authors</div>
                            <div class="quarto-title-meta-contents">
                                     <p>Leah Wasser </p>
                                     <p>Nathan Korinek </p>
                                     <p>Elsa Culler </p>
                                  </div>
                          </div>
                            
                          
                            
                          </div>
                          
        </div></div></div>
</header>


<p>After completing this lesson, you will be able to:</p>
<ul>
<li>Describe the characteristics of 3 key vector data structures: points, lines and polygons.</li>
<li>Open a shapefile in <strong>Python</strong> using <strong>Geopandas</strong> - <code>gpd.read_file()</code>.</li>
<li>Plot a shapfile in <strong>Python</strong> using <strong>Geopandas</strong> - <code>gpd.plot()</code>.</li>
</ul>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>This lesson is an introduction to working with spatial data. If you wish to dive more deeply into working with spatial data, check out the intermediate earth data science textbook <a href="https://www.earthdatascience.org/courses/use-data-open-source-python/intro-vector-data-python/spatial-data-vector-shapefiles/" target="_blank">chapter on spatial vector data.</a></p>
</div>
</div>
<section id="about-spatial-vector-data" class="level2">
<h2 class="anchored" data-anchor-id="about-spatial-vector-data">About Spatial Vector Data</h2>
<p>Vector data are composed of discrete geometric locations (x, y values) known as <strong>vertices</strong> that define the “shape” of the spatial object. The organization of the vertices determines the type of vector that you are working with. There are three types of vector data:</p>
<ul>
<li><p><strong>Points:</strong> Each individual point is defined by a single x, y coordinate. Examples of point data include: sampling locations, the location of individual trees or the location of plots.</p></li>
<li><p><strong>Lines:</strong> Lines are composed of many (at least 2) vertices, or points, that are connected. For instance, a road or a stream may be represented by a line. This line is composed of a series of segments, each “bend” in the road or stream represents a vertex that has defined <code>x, y</code> location.</p></li>
<li><p><strong>Polygons:</strong> A polygon consists of 3 or more vertices that are connected and “closed”. Thus, the outlines of plot boundaries, lakes, oceans, and states or countries are often represented by polygons.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../../img/earth-analytics/spatial-data/points-lines-polygons-vector-data-types.png" class="img-fluid figure-img"></p>
<figcaption>There are 3 types of vector objects: points, lines or polygons. Each object type has a different structure. Image Source: Colin Williams (NEON)</figcaption>
</figure>
</div>
</section>
<section id="introduction-to-the-shapefile-file-format-which-stores-points-lines-and-polygons" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-the-shapefile-file-format-which-stores-points-lines-and-polygons">Introduction to the Shapefile File Format Which Stores Points, Lines, and Polygons</h2>
<p>Geospatial data in vector format are often stored in a <code>shapefile</code> format (<code>.shp</code>). Because the structure of points, lines, and polygons are different, each individual shapefile can only contain one vector type (all points, all lines or all polygons). You will not find a mixture of point, line and polygon objects in a single shapefile.</p>
<p>Objects stored in a shapefile often have a set of associated <code>attributes</code> that describe the data. For example, a line shapefile that contains the locations of streams might also contain the associated stream name, stream “order” and other information about each stream line object.</p>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>More about shapefiles can found on <a href="https://en.wikipedia.org/wiki/Shapefile" target="_blank">Wikipedia</a>.</p>
</div>
</div>
</section>
<section id="geojson-files-and-other-vector-formats" class="level2">
<h2 class="anchored" data-anchor-id="geojson-files-and-other-vector-formats">GeoJSON Files and Other Vector Formats</h2>
<p>The shapefile is not the only way that vector data are stored. Geospatial data can also be delivered in a <a href="https://en.wikipedia.org/wiki/GeoJSON" target="_blank">GeoJSON format</a>, or even a tabular format where the spatial information is contained in columns.</p>
</section>
<section id="what-data-are-stored-in-spatial-vector-formats" class="level2">
<h2 class="anchored" data-anchor-id="what-data-are-stored-in-spatial-vector-formats">What Data Are Stored In Spatial Vector Formats?</h2>
<p>Some examples of data that often are provided in a vector format include:</p>
<ul>
<li>census data including municipal boundaries</li>
<li>roads, powerlines and other infrastructure boundaries</li>
<li>political boundaries</li>
<li>building outlines</li>
<li>water bodies and river systems</li>
<li>ecological boundaries</li>
<li>city locations</li>
<li>object locations including plots, stream gages, and building locations</li>
</ul>
</section>
<section id="import-shapefile-data-into-python-using-geopandas" class="level2">
<h2 class="anchored" data-anchor-id="import-shapefile-data-into-python-using-geopandas">Import Shapefile Data Into Python Using Geopandas</h2>
<p>You will use the <strong>geopandas</strong> library to work with vector data in <strong>Python</strong>. <strong>Geopandas</strong> is built on top of the <strong>Python</strong> <strong>Pandas</strong> library. It stores spatial data in a tabular, <code>dataframe</code> format.</p>
<p>To begin, set your working directory to <code>earth-analytics</code> and then download a single shapefile. You will start with working with the Natural Earth country boundary lines layer.</p>
<div class="callout-info">
<p>Note that below you are using <strong>EarthPy</strong> to download a dataset from naturalearthdata.com. <strong>EarthPy</strong> creates the earth-analytics directory for you when you use it. You set the working directory after you download the data as a precaution to ensure that the earth-analytics directory already exists on your computer. This is not a standard order of operations but we are demonstrating it here to ensure the notebook runs on all computers!</p>
</div>
<div id="2b3b32d0" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> earthpy <span class="im">as</span> et</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the data and set working directory</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>boundary_url<span class="op">=</span>(</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://naciscdn.org/naturalearth/50m/cultural"</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"/ne_50m_admin_0_boundary_lines_land.zip"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>et.data.get_data(url<span class="op">=</span>boundary_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Downloading from https://naciscdn.org/naturalearth/50m/cultural/ne_50m_admin_0_boundary_lines_land.zip
Extracted output to /home/runner/earth-analytics/data/ne_50m_admin_0_boundary_lines_land</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>PosixPath('/home/runner/earth-analytics/data/ne_50m_admin_0_boundary_lines_land')</code></pre>
</div>
</div>
<p>Next, you open the data using <strong>Geopandas</strong>. You can view the first 5 rows of the data using <code>.head()</code> in the same way you used <code>.head()</code> for <strong>Pandas</strong> dataframes.</p>
<div id="3c1f8c3d" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>coastlines_url <span class="op">=</span> (</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://naciscdn.org/naturalearth/50m/physical"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"/ne_50m_coastline.zip"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>coastlines_path <span class="op">=</span> et.data.get_data(url<span class="op">=</span>coastlines_url)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>coastlines <span class="op">=</span> gpd.read_file(coastlines_path)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>coastlines.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Downloading from https://naciscdn.org/naturalearth/50m/physical/ne_50m_coastline.zip
Extracted output to /home/runner/earth-analytics/data/ne_50m_coastline</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>ERROR 1: PROJ: proj_create_from_database: Open of /usr/share/miniconda/envs/learning-portal/share/proj failed</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">scalerank</th>
<th data-quarto-table-cell-role="th">featurecla</th>
<th data-quarto-table-cell-role="th">min_zoom</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0</td>
<td>Coastline</td>
<td>1.5</td>
<td>LINESTRING (180 -16.15293, 179.84814 -16.21426...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>0</td>
<td>Coastline</td>
<td>4.0</td>
<td>LINESTRING (177.25752 -17.0542, 177.2874 -17.0...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>0</td>
<td>Coastline</td>
<td>4.0</td>
<td>LINESTRING (127.37266 0.79131, 127.35381 0.847...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>0</td>
<td>Coastline</td>
<td>3.0</td>
<td>LINESTRING (-81.32231 24.68506, -81.42007 24.7...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>0</td>
<td>Coastline</td>
<td>4.0</td>
<td>LINESTRING (-80.79941 24.84629, -80.83887 24.8...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="geopandas-creates-geodataframes-which-have-the-same-structure-as-pandas-dataframes" class="level3">
<h3 class="anchored" data-anchor-id="geopandas-creates-geodataframes-which-have-the-same-structure-as-pandas-dataframes">GeoPandas Creates GeoDataFrames Which Have the Same Structure As Pandas DataFrames</h3>
<p>The structure of a <strong>Geopandas</strong> <code>GeoDataFrame</code> is very similar to a <strong>Pandas</strong> dataframe. A few differences include:</p>
<ul>
<li>the <code>GeoDataFrame</code> contains a geometry column which stores spatial information. The geometry column in your <code>GeoDataFrame</code> stores the boundary information (the lines that make up each shape in your data). This allows you to plot points, lines or polygons.</li>
<li>the<code>GeoDataFrame</code> stores spatial attributes such as coordinate reference systems and spatial extents.</li>
</ul>
<p>Similar to <strong>Pandas</strong>, you can plot the data using <code>.plot()</code></p>
<div id="f9aa585f" class="cell" data-caption="Global coastline boundaries." data-execution_count="3">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>f, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>coastlines.plot(ax<span class="op">=</span>ax1)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a title to your plot</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>ax1.<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Global Coastline Boundaries"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-4-output-1.png" width="950" height="480" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="check-the-spatial-vector-data-type" class="level3">
<h3 class="anchored" data-anchor-id="check-the-spatial-vector-data-type">Check the Spatial Vector Data Type</h3>
<p>You can look at the data to figure out what type of data are stored in the shapefile (points, line or polygons). However, you can also get that information by calling <code>.geom_type</code></p>
<div id="9e09f2f2" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Is the geometry type point, line or polygon?</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>coastlines.geom_type</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>0       LineString
1       LineString
2       LineString
3       LineString
4       LineString
           ...    
1423    LineString
1424    LineString
1425    LineString
1426    LineString
1427    LineString
Length: 1428, dtype: object</code></pre>
</div>
</div>
<p>Also similar to <strong>Pandas</strong>, you can view descriptive information about the <code>GeoDataFrame</code> using <code>.info()</code>. This includes the number of columns, rows and the header name and type of each column.</p>
<div id="d841d032" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>coastlines.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'geopandas.geodataframe.GeoDataFrame'&gt;
RangeIndex: 1428 entries, 0 to 1427
Data columns (total 4 columns):
 #   Column      Non-Null Count  Dtype   
---  ------      --------------  -----   
 0   scalerank   1428 non-null   int64   
 1   featurecla  1428 non-null   object  
 2   min_zoom    1428 non-null   float64 
 3   geometry    1428 non-null   geometry
dtypes: float64(1), geometry(1), int64(1), object(1)
memory usage: 44.8+ KB</code></pre>
</div>
</div>
</section>
</section>
<section id="open-vector-point-data" class="level2">
<h2 class="anchored" data-anchor-id="open-vector-point-data">Open Vector Point Data</h2>
<p>Next, you will open up another shapefile using <strong>Geopandas</strong>.</p>
<div id="f14eea51" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Open populated places</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>places_url<span class="op">=</span>(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'https://naciscdn.org/naturalearth/50m/cultural'</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'/ne_50m_populated_places_simple.zip'</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>places_path <span class="op">=</span> et.data.get_data(url<span class="op">=</span>places_url)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the populated places shapefile</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>cities <span class="op">=</span> gpd.read_file(places_path)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>cities.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Downloading from https://naciscdn.org/naturalearth/50m/cultural/ne_50m_populated_places_simple.zip
Extracted output to /home/runner/earth-analytics/data/ne_50m_populated_places_simple</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">scalerank</th>
<th data-quarto-table-cell-role="th">natscale</th>
<th data-quarto-table-cell-role="th">labelrank</th>
<th data-quarto-table-cell-role="th">featurecla</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">namepar</th>
<th data-quarto-table-cell-role="th">namealt</th>
<th data-quarto-table-cell-role="th">nameascii</th>
<th data-quarto-table-cell-role="th">adm0cap</th>
<th data-quarto-table-cell-role="th">capalt</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">pop_max</th>
<th data-quarto-table-cell-role="th">pop_min</th>
<th data-quarto-table-cell-role="th">pop_other</th>
<th data-quarto-table-cell-role="th">rank_max</th>
<th data-quarto-table-cell-role="th">rank_min</th>
<th data-quarto-table-cell-role="th">meganame</th>
<th data-quarto-table-cell-role="th">ls_name</th>
<th data-quarto-table-cell-role="th">min_zoom</th>
<th data-quarto-table-cell-role="th">ne_id</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>10</td>
<td>1</td>
<td>5</td>
<td>Admin-1 region capital</td>
<td>Bombo</td>
<td>None</td>
<td>None</td>
<td>Bombo</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>75000</td>
<td>21000</td>
<td>0.0</td>
<td>8</td>
<td>7</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159113923</td>
<td>POINT (32.5333 0.5833)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>10</td>
<td>1</td>
<td>5</td>
<td>Admin-1 region capital</td>
<td>Fort Portal</td>
<td>None</td>
<td>None</td>
<td>Fort Portal</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>42670</td>
<td>42670</td>
<td>0.0</td>
<td>7</td>
<td>7</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159113959</td>
<td>POINT (30.275 0.671)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>10</td>
<td>1</td>
<td>3</td>
<td>Admin-1 region capital</td>
<td>Potenza</td>
<td>None</td>
<td>None</td>
<td>Potenza</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>69060</td>
<td>69060</td>
<td>0.0</td>
<td>8</td>
<td>8</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159117259</td>
<td>POINT (15.799 40.642)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10</td>
<td>1</td>
<td>3</td>
<td>Admin-1 region capital</td>
<td>Campobasso</td>
<td>None</td>
<td>None</td>
<td>Campobasso</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>50762</td>
<td>50762</td>
<td>0.0</td>
<td>8</td>
<td>8</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159117283</td>
<td>POINT (14.656 41.563)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>10</td>
<td>1</td>
<td>3</td>
<td>Admin-1 region capital</td>
<td>Aosta</td>
<td>None</td>
<td>None</td>
<td>Aosta</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>34062</td>
<td>34062</td>
<td>0.0</td>
<td>7</td>
<td>7</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159117361</td>
<td>POINT (7.315 45.737)</td>
</tr>
</tbody>
</table>

<p>5 rows × 32 columns</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>What Geometry Type Are Your Data? Check the geometry type of the <code>cities</code> object that you opened above in your code.</p>
</div>
</div>
<div id="62984599" class="cell" data-tags="[&quot;hide&quot;]" data-execution_count="7">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the code here to check the geometry type of the cities object</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>cities.geom_type</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>0       Point
1       Point
2       Point
3       Point
4       Point
        ...  
1246    Point
1247    Point
1248    Point
1249    Point
1250    Point
Length: 1251, dtype: object</code></pre>
</div>
</div>
</section>
<section id="creating-maps-using-multiple-shapefiles" class="level2">
<h2 class="anchored" data-anchor-id="creating-maps-using-multiple-shapefiles">Creating Maps Using Multiple Shapefiles</h2>
<p>You can create maps using multiple shapefiles with <strong>Geopandas</strong> in a similar way that you may do so using a graphical user interface (GUI) tool like ArcGIS or QGIS (open source alternative to ArcGIS). To do this you will need to open a second spatial file. Below you will use the Natural Earth populated places shapefile to add additional layers to your map.</p>
<p>To plot two datasets together, you will first create a <strong>Matplotlib</strong> figure object. Notice in the example below that you define the figure <code>ax1</code> in the first line. You then tell <strong>GeoPandas</strong> to plot the data on that particular figure using the parameter <code>ax=</code></p>
<p>The code looks like this:</p>
<p><code>boundary_lines.plot(ax=ax1)</code></p>
<div id="058feba2" class="cell" data-caption="Global coastline boundaries." data-execution_count="8">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>f, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>coastlines.plot(ax<span class="op">=</span>ax1)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-9-output-1.png" width="801" height="390" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>To add another layer to your map, you can add a second <code>.plot()</code> call and specify the <code>ax=</code> to be <code>ax1</code> again. This tells <strong>Python</strong> to layer the two datasets in the same figure.</p>
<div id="8d363d42" class="cell" data-caption="Global coastline boundaries and major cities plotted together." data-execution_count="9">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a map or plot with two data layers</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>f, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>coastlines.plot(ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">"black"</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>cities.plot(ax<span class="op">=</span>ax1)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a title</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>ax1.<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Map of Cities and Global Lines"</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-10-output-1.png" width="801" height="422" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>If you don’t specify the axis when you plot using <code>ax=</code>, each layer will be plotted on a separate figure! See the example below.</p>
<div id="edc05832" class="cell" data-caption="Global coastline boundaries plotted in one plot, and another plot with global cities." data-execution_count="10">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>f, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>coastlines.plot(ax<span class="op">=</span>ax1)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>cities.plot()</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-11-output-1.png" width="801" height="390" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-11-output-2.png" width="578" height="290" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="challenge-2-create-a-global-map" class="level2">
<h2 class="anchored" data-anchor-id="challenge-2-create-a-global-map">Challenge 2: Create a Global Map</h2>
<p>The code below will download one additional file for you that contains global country boundaries.</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Your goal is to create a map that contains 3 layers:</p>
<ol type="1">
<li>the cities or populated places layer that you opened above</li>
<li>the coastlines layer that you opened above and</li>
<li>the countries layer that you will open using the code below</li>
</ol>
<p>To create a map with the three layers, you can: 1. Copy the code below that downloads the countries layer. 2. Next, use <strong>Geopandas</strong> <code>read_file()</code> to open the countries layer as a <code>GeoDataFrame</code>. 3. Create a map of all three layers - in the same figure using the same <code>ax=</code>. The countries should be the bottom layer, and the cities and lines should be on top of that layer.</p>
</div>
</div>
<div id="1173c353" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>country_data_url <span class="op">=</span> (</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://naciscdn.org/naturalearth"</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"/50m/cultural/ne_50m_admin_0_countries.zip"</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>country_path <span class="op">=</span> et.data.get_data(url<span class="op">=</span>country_data_url)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the countries data</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>countries <span class="op">=</span> gpd.read_file(country_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Downloading from https://naciscdn.org/naturalearth/50m/cultural/ne_50m_admin_0_countries.zip
Extracted output to /home/runner/earth-analytics/data/ne_50m_admin_0_countries</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-extra callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Looking for an Extra Challenge?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Customize your map as follows:</p>
<ul>
<li>Adjust the linewidth of lines with <code>linewidth=4</code></li>
<li>Adjust the edge color of polygons using: <code>edgecolor="grey"</code></li>
<li>Adjust the color of your objects (the line color, or point color) using: <code>color='springgreen'</code>.</li>
</ul>
<p>Finally, add a title to your map using <code>ax1.set(title="my title here")</code></p>
</div>
</div>
<div id="81410188" class="cell" data-caption="Global political boundaries with major cities." data-tags="[&quot;hide&quot;]" data-execution_count="12">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a map or plot with two data layers</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>f, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">12</span>))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>coastlines.plot(ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">"grey"</span>, edgecolor<span class="op">=</span><span class="st">"grey"</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>countries.plot(ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">"white"</span>, edgecolor<span class="op">=</span><span class="st">"grey"</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>cities.plot(ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">"springgreen"</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a title</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>ax1.<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Map of Cities, Countries, and Coastlines"</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-13-output-1.png" width="1396" height="711" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are many options to customize plots in Python. Below are a few lessons that cover some of this information!</p>
<ul>
<li><p><a href="https://www.earthdatascience.org/courses/scientists-guide-to-plotting-data-in-python/plot-spatial-data/customize-vector-plots/python-customize-map-legends-geopandas/" target="_blank">Earth data science plotting textbook.</a></p></li>
<li><p><a href="https://geopandas.org/gallery/plotting_with_geoplot.html" target="_blank">Geopandas plotting tutorial</a></p></li>
</ul>
</div>
</div>
</section>
<section id="spatial-data-attributes" class="level2">
<h2 class="anchored" data-anchor-id="spatial-data-attributes">Spatial Data Attributes</h2>
<p>Each object in a shapefile has one or more attributes associated with it. Shapefile attributes are similar to fields or columns in a spreadsheet. Each row in the spreadsheet has a set of columns associated with it that describe the row element. In the case of a shapefile, each row represents a spatial object - for example, a road, represented as a line in a line shapefile, will have one “row” of attributes associated with it.</p>
<figure class="figure">
<a href="https://www.earthdatascience.org/images/earth-analytics/spatial-data/spatial-attribute-tables.png"> <img src="https://www.earthdatascience.org/images/earth-analytics/spatial-data/spatial-attribute-tables.png" alt="A shapefile has an associated attribute table. Each spatial feature in a spatial object has the same set of
    associated attributes that describe or characterize the feature.
    Attribute data are stored in a separate .dbf file. Attribute data can be
    compared to a spreadsheet. Each row in a spreadsheet represents one feature
    in the spatial object. Image Source: National Ecological Observatory Network (NEON)" class="figure-img"></a>
<figcaption>
Each spatial feature in a spatial object has the same set of associated attributes that describe or characterize the feature. Attribute data are stored in a separate *.dbf file. Attribute data can be compared to a spreadsheet. Each row in a spreadsheet represents one feature in the spatial object. Image Source: National Ecological Observatory Network (NEON)
</figcaption>
</figure>
<p>The attributes for a shapefile imported into a GeoDataFrame can be viewed in the GeoDataFrame itself.</p>
<div id="576398a6" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View first 5 rows of GeoDataFrame</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>cities.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">scalerank</th>
<th data-quarto-table-cell-role="th">natscale</th>
<th data-quarto-table-cell-role="th">labelrank</th>
<th data-quarto-table-cell-role="th">featurecla</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">namepar</th>
<th data-quarto-table-cell-role="th">namealt</th>
<th data-quarto-table-cell-role="th">nameascii</th>
<th data-quarto-table-cell-role="th">adm0cap</th>
<th data-quarto-table-cell-role="th">capalt</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">pop_max</th>
<th data-quarto-table-cell-role="th">pop_min</th>
<th data-quarto-table-cell-role="th">pop_other</th>
<th data-quarto-table-cell-role="th">rank_max</th>
<th data-quarto-table-cell-role="th">rank_min</th>
<th data-quarto-table-cell-role="th">meganame</th>
<th data-quarto-table-cell-role="th">ls_name</th>
<th data-quarto-table-cell-role="th">min_zoom</th>
<th data-quarto-table-cell-role="th">ne_id</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>10</td>
<td>1</td>
<td>5</td>
<td>Admin-1 region capital</td>
<td>Bombo</td>
<td>None</td>
<td>None</td>
<td>Bombo</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>75000</td>
<td>21000</td>
<td>0.0</td>
<td>8</td>
<td>7</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159113923</td>
<td>POINT (32.5333 0.5833)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>10</td>
<td>1</td>
<td>5</td>
<td>Admin-1 region capital</td>
<td>Fort Portal</td>
<td>None</td>
<td>None</td>
<td>Fort Portal</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>42670</td>
<td>42670</td>
<td>0.0</td>
<td>7</td>
<td>7</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159113959</td>
<td>POINT (30.275 0.671)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>10</td>
<td>1</td>
<td>3</td>
<td>Admin-1 region capital</td>
<td>Potenza</td>
<td>None</td>
<td>None</td>
<td>Potenza</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>69060</td>
<td>69060</td>
<td>0.0</td>
<td>8</td>
<td>8</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159117259</td>
<td>POINT (15.799 40.642)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10</td>
<td>1</td>
<td>3</td>
<td>Admin-1 region capital</td>
<td>Campobasso</td>
<td>None</td>
<td>None</td>
<td>Campobasso</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>50762</td>
<td>50762</td>
<td>0.0</td>
<td>8</td>
<td>8</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159117283</td>
<td>POINT (14.656 41.563)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>10</td>
<td>1</td>
<td>3</td>
<td>Admin-1 region capital</td>
<td>Aosta</td>
<td>None</td>
<td>None</td>
<td>Aosta</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>34062</td>
<td>34062</td>
<td>0.0</td>
<td>7</td>
<td>7</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159117361</td>
<td>POINT (7.315 45.737)</td>
</tr>
</tbody>
</table>

<p>5 rows × 32 columns</p>
</div>
</div>
</div>
<div id="6ab68b38" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View data just in the pop_max column of the cities object</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>cities.pop_max</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>0          75000
1          42670
2          69060
3          50762
4          34062
          ...   
1246    11748000
1247    18845000
1248     4630000
1249     5183700
1250     7206000
Name: pop_max, Length: 1251, dtype: int64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>The spatial and attribute data are not the only important aspects of a shapefile. The metadata of a shapefile are also very important. The metadata includes data on the Coordinate Reference System (CRS), the extent, and much more. For more information on what the metadata is, and how to access it, see the full lesson on vector data on the Earth Lab website, <a href="https://www.earthdatascience.org/courses/use-data-open-source-python/intro-vector-data-python/spatial-data-vector-shapefiles/">here</a>.</p>
</div>
</div>
<div id="2f285486" class="cell" data-caption="Countries symbolized on a color gradient by how large their population is." data-execution_count="15">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mpl_toolkits.axes_grid1 <span class="im">import</span> make_axes_locatable</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>f, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>divider <span class="op">=</span> make_axes_locatable(ax1)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>cax <span class="op">=</span> divider.append_axes(<span class="st">"right"</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>                          size<span class="op">=</span><span class="st">"5%"</span>,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>                          pad<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>countries.plot(column<span class="op">=</span><span class="st">'POP_EST'</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>               legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>               ax<span class="op">=</span>ax1,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>               cax<span class="op">=</span>cax)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-16-output-1.png" width="831" height="393" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="challenge-plot-cities-data" class="level3">
<h3 class="anchored" data-anchor-id="challenge-plot-cities-data">Challenge: Plot Cities Data</h3>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>Plot the cities object so each point is colored according to the max population value.</p>
</div>
</div>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>Check out <a href="https://geopandas.org/mapping.html" target="_blank">this page on creating maps with Geopandas </a> for more information on customizing maps in <strong>Geopandas</strong>:</p>
</div>
</div>
<div id="6417c575" class="cell" data-caption="Global cities plotted without boundaries." data-tags="[&quot;hide&quot;]" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the geom_type and the first few rows</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cities.geom_type)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>display(cities.head())</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>f, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">12</span>))</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>cities.plot(ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">"purple"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0       Point
1       Point
2       Point
3       Point
4       Point
        ...  
1246    Point
1247    Point
1248    Point
1249    Point
1250    Point
Length: 1251, dtype: object</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">scalerank</th>
<th data-quarto-table-cell-role="th">natscale</th>
<th data-quarto-table-cell-role="th">labelrank</th>
<th data-quarto-table-cell-role="th">featurecla</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">namepar</th>
<th data-quarto-table-cell-role="th">namealt</th>
<th data-quarto-table-cell-role="th">nameascii</th>
<th data-quarto-table-cell-role="th">adm0cap</th>
<th data-quarto-table-cell-role="th">capalt</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">pop_max</th>
<th data-quarto-table-cell-role="th">pop_min</th>
<th data-quarto-table-cell-role="th">pop_other</th>
<th data-quarto-table-cell-role="th">rank_max</th>
<th data-quarto-table-cell-role="th">rank_min</th>
<th data-quarto-table-cell-role="th">meganame</th>
<th data-quarto-table-cell-role="th">ls_name</th>
<th data-quarto-table-cell-role="th">min_zoom</th>
<th data-quarto-table-cell-role="th">ne_id</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>10</td>
<td>1</td>
<td>5</td>
<td>Admin-1 region capital</td>
<td>Bombo</td>
<td>None</td>
<td>None</td>
<td>Bombo</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>75000</td>
<td>21000</td>
<td>0.0</td>
<td>8</td>
<td>7</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159113923</td>
<td>POINT (32.5333 0.5833)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>10</td>
<td>1</td>
<td>5</td>
<td>Admin-1 region capital</td>
<td>Fort Portal</td>
<td>None</td>
<td>None</td>
<td>Fort Portal</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>42670</td>
<td>42670</td>
<td>0.0</td>
<td>7</td>
<td>7</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159113959</td>
<td>POINT (30.275 0.671)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>10</td>
<td>1</td>
<td>3</td>
<td>Admin-1 region capital</td>
<td>Potenza</td>
<td>None</td>
<td>None</td>
<td>Potenza</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>69060</td>
<td>69060</td>
<td>0.0</td>
<td>8</td>
<td>8</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159117259</td>
<td>POINT (15.799 40.642)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>10</td>
<td>1</td>
<td>3</td>
<td>Admin-1 region capital</td>
<td>Campobasso</td>
<td>None</td>
<td>None</td>
<td>Campobasso</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>50762</td>
<td>50762</td>
<td>0.0</td>
<td>8</td>
<td>8</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159117283</td>
<td>POINT (14.656 41.563)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>10</td>
<td>1</td>
<td>3</td>
<td>Admin-1 region capital</td>
<td>Aosta</td>
<td>None</td>
<td>None</td>
<td>Aosta</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>34062</td>
<td>34062</td>
<td>0.0</td>
<td>7</td>
<td>7</td>
<td>None</td>
<td>None</td>
<td>7.0</td>
<td>1159117361</td>
<td>POINT (7.315 45.737)</td>
</tr>
</tbody>
</table>

<p>5 rows × 32 columns</p>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-17-output-3.png" width="1396" height="681" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>You can plot your data according to categorical groups similar to what you might do in a tool like ArcGIS or QGIS.</p>
<div class="callout callout-style-default callout-task callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try It
</div>
</div>
<div class="callout-body-container callout-body">
<p>See what happens when you customize your plot code above.</p>
<p>Set the following parameters:</p>
<ul>
<li><code>legend=True</code> and</li>
<li><code>scheme="quantiles</code></li>
</ul>
</div>
</div>
<div id="672e2c77" class="cell" data-caption="Global cities symoblized on a color gradient by population." data-tags="[&quot;hide&quot;]" data-execution_count="17">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize cities plot</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>f, ax1 <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>cities.plot(ax<span class="op">=</span>ax1, markersize<span class="op">=</span><span class="dv">15</span>, legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>            column<span class="op">=</span><span class="st">"pop_max"</span>, scheme<span class="op">=</span><span class="st">'quantiles'</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-18-output-1.png" width="801" height="397" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="optional-geoprocessing-vector-data-geoprocessing-in-python-clip-data" class="level2">
<h2 class="anchored" data-anchor-id="optional-geoprocessing-vector-data-geoprocessing-in-python-clip-data">Optional: Geoprocessing Vector Data Geoprocessing in Python: Clip Data</h2>
<p>Sometimes you have spatial data for a larger area than you need to process. For example you may be working on a project for your state or country. But perhaps you have data for the entire globe.</p>
<p>You can clip the data spatially to another boundary to make it smaller. Once the data are clipped, your processing operations will be faster. It will also make creating maps of your study area easier and cleaner.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../../img/earth-analytics/spatial-data/vector-clip.png" class="img-fluid figure-img"></p>
<figcaption>When you clip a vector data set with another layer, you remove points, lines or polygons that are outside of the spatial extent of the area that you use to clip the data. This images shows a circular clip region - you will be using a rectangular region in this example. Image Source: ESRI</figcaption>
</figure>
</div>
<p>In the bonus challenge below, you will clip the cities point data to the boundary of a single country. This will make the data smaller and easier to use.</p>
<div class="callout callout-style-default callout-read callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read More
</div>
</div>
<div class="callout-body-container callout-body">
<p>Check out the <a href="https://www.earthdatascience.org/courses/use-data-open-source-python/intro-vector-data-python/vector-data-processing/clip-vector-data-in-python-geopandas-shapely/">spatial data lessons in the intermediate earth-analytics textbook for a more in depth look at clipping data.</a></p>
</div>
</div>
<p>Below you do the following:</p>
<ol type="1">
<li>you subset the countries layer to just the boundary of the United State of America</li>
<li>you then plot the data to look at the newly subsetted data!</li>
<li>Finally you clip the cities data to only include cities that fall within the boundary of the United States</li>
</ol>
<div id="09e5249b" class="cell" data-caption="Plot of the United States using Geopandas." data-execution_count="18">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset the countries data to just a single</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>united_states_boundary <span class="op">=</span> (</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    countries.loc[countries[<span class="st">'SOVEREIGNT'</span>]<span class="op">==</span><span class="st">'United States of America'</span>])</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice in the plot below, that only the boundary for the USA is in the new variable</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>f, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>united_states_boundary.plot(ax<span class="op">=</span>ax)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-19-output-1.png" width="790" height="244" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="d672ca7f" class="cell" data-caption="Plot of cities in the United States using Geopandas." data-execution_count="19">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clip the cities data to the USA boundary</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note -- this operation may take some time to run - be patient</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>cities_in_usa <span class="op">=</span> gpd.clip(cities, united_states_boundary)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot your final clipped data</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>f, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>cities_in_usa.plot(ax<span class="op">=</span>ax)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Cities clipped to the USA Boundary"</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-20-output-1.png" width="566" height="222" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-extra callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Looking for an Extra Challenge?
</div>
</div>
<div class="callout-body-container callout-body">
<p>For this bonus challenge, you will clip the cities data that you opened above to the extent of a single country - Canada.</p>
<p><code>gpd.clip(data_to_clip, boundary_to_clip_to)</code>.</p>
<p>Follow the example above to perform your clip operation.</p>
<p>To perform the clip you need the following:</p>
<ol type="1">
<li>Create the boundary for Canada by subsetting the countries object</li>
<li>Clip the cities layer to the Canada boundary layer</li>
<li>Plot your final cities clipped layer!</li>
</ol>
<p>When you clip, all of the spatial data outside of the spatial clip boundary (Canada) will not be included in the output dataset.</p>
</div>
</div>
<div id="b7cb0dc8" class="cell" data-tags="[&quot;hide&quot;]" data-execution_count="20">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset the countries data to just a single</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>canada_boundary <span class="op">=</span> (</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    countries.loc[countries[<span class="st">'SOVEREIGNT'</span>] <span class="op">==</span> <span class="st">'Canada'</span>])</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Below this line clip the cities data to the Canada boundary that you created above.</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>cities_in_canada <span class="op">=</span> gpd.clip(cities, canada_boundary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="1b899a7b" class="cell" data-caption="Plot of cities clipped to the Canadian border." data-tags="[&quot;hide&quot;]" data-execution_count="21">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot your final clipped data here</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>f, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>cities_in_canada.plot(ax<span class="op">=</span>ax)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Cities clipped to the Canada Boundary"</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="03-vector-data_files/figure-html/cell-22-output-1.png" width="566" height="398" class="figure-img"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("^(?!((http:|https:)\/\/|/))");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../pages/02-file-formats-eds/04-text-file-formats-eds/02-markdown.html" class="pagination-link" aria-label="Format Text With Markdown">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Format Text With Markdown</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://esiil.org/">
<p>About ESIIL</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://earthlab.colorado.edu/">
<p>About Earth Lab</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>