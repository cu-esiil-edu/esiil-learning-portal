


<!doctype html>
<html lang="en" class="no-js">
  <head>
    


<meta charset="utf-8">




<!-- begin SEO -->









<title>GIS in R: Plot Spatial Data and Create Custom Legends in R | Earth Data Science - Earth Lab </title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Earth Data Science - Earth Lab">
<meta property="og:title" content="GIS in R: Plot Spatial Data and Create Custom Legends in R">


  <link rel="canonical" href="https://earthdatascience.org/courses/earth-analytics/spatial-data-r/r-create-custom-legend-with-base-plot/">
  <meta property="og:url" content="https://earthdatascience.org/courses/earth-analytics/spatial-data-r/r-create-custom-legend-with-base-plot/">



  <meta content="In this lesson you break down the steps required to create a custom legend for spatial data in R. You learn about creating unique symbols per category, customizing colors and placing your legend outside of the plot using the xpd argument combined with x,y placement and margin settings." name="description">
  <meta property="og:description" content="In this lesson you break down the steps required to create a custom legend for spatial data in R. You learn about creating unique symbols per category, customizing colors and placing your legend outside of the plot using the xpd argument combined with x,y placement and margin settings.">


<!-- twitter cards -->

  <meta name="twitter:site" content="@earthlabcu">
  <meta name="twitter:title" content="GIS in R: Plot Spatial Data and Create Custom Legends in R">
  <meta name="twitter:description" content="In this lesson you break down the steps required to create a custom legend for spatial data in R. You learn about creating unique symbols per category, customizing colors and placing your legend outside of the plot using the xpd argument combined with x,y placement and margin settings.">
  <meta name="twitter:url" content="https://earthdatascience.org/courses/earth-analytics/spatial-data-r/r-create-custom-legend-with-base-plot/">

  
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://earthdatascience.org/images/earth_sm_twit.png">
    <meta name="twitter:image:alt" content="The Earthlab Logo - image of a globe with courses, lessons and tutorials">

    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-02-15T00:00:00-06:00">
  
    <link rel="next" href="https://earthdatascience.org/courses/earth-analytics/remote-sensing-uncertainty/about-uncertainty-lidar/" title="Sources of Error in Lidar and Human Measured Estimates of Tree Height">
  
  
    <link rel="prev" href="https://earthdatascience.org/courses/earth-analytics/spatial-data-r/reproject-vector-data/" title="GIS in R: How to Reproject Vector Data in Different Coordinate Reference Systems (crs) in R">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Earth Analytics",
      "url" : "https://earthdatascience.org",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://earthdatascience.org/feed.xml" type="application/atom+xml" rel="alternate" title="Earth Data Science - Earth Lab Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="google-site-verification" content="LfpevjsE0wlELv5KKOZv1T2RhRimGSiRckWv5ZC19GU" />
<!-- don't use the old cataloged meta tags -->
<meta name="googlebot" content="noodp">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>


<!-- For all browsers
<link rel="stylesheet" href="https://earthdatascience.org/assets/css/main.css">-->
<link rel="stylesheet" href="https://earthdatascience.org/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->


    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>

    <script src="https://earthdatascience.org/assets/js/copy-code.js"></script>
  </head>

  <body>


    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<!-- search bar begin  - turning off for now-->

<div class="search">
<form role="search" method="get" action="https://earthdatascience.org/search/">
    <input id="q" name="q"
           placeholder="Search earth data science site" type="text">
</form>
<!--<span class='cu-boulder'><a href="http://www.colorado.edu/earthlab" target="_blank">Earth Lab University of Colorado - Boulder Home </a></span> -->
</div>


<!-- search bar END -->

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://earthdatascience.org/"><img src="/images/earth-lab-logo.png" alt="Earth Lab - Earth Data Science" style="height:80%;width:85%"></a></li>
          
            
            <li class="masthead__menu-item"><a href="https://earthdatascience.org/tutorials/">Tutorials</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://earthdatascience.org/courses/">Courses</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://earthdatascience.org/workshops/">Workshops</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://earthdatascience.org/tools/">Tools</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://earthdatascience.org/blog/">Blog</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://earthdatascience.org/about/">About</a></li>
          

        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    



  <div class="page__hero--overlay" style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://earthdatascience.org/images/header-images/earth-data-analytics-professional-certificate-banner.jpg');">
  <div class="wrapper">
        <h1 class="page__title" itemprop="headline">
          Earth Data Analytics Online Certificate
        </h1>
        <p><a href="https://earthlab.colorado.edu/earth-data-analytics-professional-graduate-certificate?utm_source=earthdatascience&utm_medium=website&utm_campaign=certificate-2022&utm_id=certificate-2022" target = "_blank" class="btn btn--light-outline btn--large">Enroll now! Learn more.</a></p>
  </div>
</div>





  
    













<nav class="breadcrumbs" role="menubar" aria-label="breadcrumbs">
 <ol itemscope itemtype="http://schema.org/BreadcrumbList">
 <a href="https://earthdatascience.org"></a>
 
 
 <!-- there is an offset of 1 so subtract 2 from the final crumb number-->
 
   
   
     <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
       <a href="https://earthdatascience.org/" itemprop="item"><span itemprop="name">Home</span></a>
       <meta itemprop="position" content="1" />
     </li>
     <span class="sep">/</span>
   
    
        
        <li><a href="https://earthdatascience.org/courses/">Courses </a>
        <meta itemprop="position" content="2" />
        <span class="sep">/</span></li>
    
  
   
    
        
        <li><a href="https://earthdatascience.org/courses/earth-analytics/">Earth analytics </a>
        <meta itemprop="position" content="3" />
        <span class="sep">/</span></li>
    
  
   
    
        
        <li><a href="https://earthdatascience.org/courses/earth-analytics/spatial-data-r/">Spatial data r </a>
        <meta itemprop="position" content="4" />
        <span class="sep">/</span></li>
    
  
   
    
        <li class="current">GIS in R: Plot Spatial Data and Create Custom Legends in R</li>
    
  
</ol>
</nav>

<!-- from min mistakes -->




  


<div id="main" role="main">
  



  <div class="sidebar sticky">
  
  
    
      
      
      
    
    


    

    
     <!--  Might be able to delete this This is the code that populates the side bar navigation if there is a class-->
      







<!-- make sure we're only grabbing pages for the course -->



<!--<h3>Week 4 Lessons</h3>-->
<!-- i don't think the code below is used as modules is defined lower down as well. -->

<!-- This is how modules are sorted on the left hand side bar -->






<h5><a href="https://earthdatascience.org/courses/earth-analytics/" ><i class="fa fa-home" aria-hidden="true"></i> Earth analytics</a></h5>

<!-- Just get the pages from this course -->






<nav class="nav__list">







<ul>
  <li><span class="nav__sub-title"><i class="fa fa-book" aria-hidden="true"></i> Units</span>
   <ul>

       

        

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 1 <a href="https://earthdatascience.org/courses/earth-analytics/document-your-science/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 DOCUMENT YOUR SCIENCE USING R MARKDOWN AND R</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/document-your-science/google-earth-time-series/"> 1.1   Use data for science </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/document-your-science/setup-r-rstudio/"> 1.2   Set up R </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/document-your-science/about-open-science-and-why-open-science-is-important/"> 1.3   R Markdown Intro </a>
                                </li>
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 2 <a href="https://earthdatascience.org/courses/earth-analytics/time-series-data/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 INTRO TO R & WORK WITH TIME SERIES DATA</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/time-series-data/write-clean-code-with-r/"> 2.   Clean Code & Getting Help with R </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/time-series-data/basic-r-syntax-scientific-programming/"> 2.1   Get to Know R </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/time-series-data/date-class-in-r/"> 2.2   Time Series Data in R </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 3 <a href="https://earthdatascience.org/courses/earth-analytics/lidar-raster-data-r/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 LIDAR RASTER DATA IN R</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/lidar-raster-data-r/ggmap-basemap/"> 3.   Refine R Markdown Reports with Images and Basemaps </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/lidar-raster-data-r/lidar-intro/"> 3.1   Intro to Lidar Data </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/lidar-raster-data-r/open-lidar-raster-r/"> 3.2   Lidar Raster Data in R </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            

            <!-- This is for the activate section in the nav which is grey -->

            
                
                    <li class='active-section'> <a href="https://earthdatascience.org/courses/earth-analytics/spatial-data-r/"><i class="fa fa-folder-open" aria-hidden="true"></i>
                     4. SPATIAL DATA IN R</a></li>

            

<div class='active-menu'>
      <ul>
        
        <!-- Note that class-order allows you to sort modules by class order if there are more than 1 in a class -->
        

        

        

        
        
        <!-- If it's a textbook with a chapter number write "chapter", else assume it is a week -->

          <li><span class="nav__sub-title grey"><i class="fa fa-caret-down" aria-hidden="true"></i>   4. Spatial data in r  </span></li>
        <ul>

      
      <!-- count lessons -->

        
        
        

        
        
        

        
        
        
          
          <li><a href= https://earthdatascience.org/courses/earth-analytics/spatial-data-r/intro-vector-data-r/><!--4.1 --> - Vector Data in R</a></li>
          
          

        
        
        

        
        
        
          
          <li><a href= https://earthdatascience.org/courses/earth-analytics/spatial-data-r/shapefile-structure/><!--4.2 --> - Shapefile Structure</a></li>
          
          

        
        
        
          
          <li><a href= https://earthdatascience.org/courses/earth-analytics/spatial-data-r/intro-to-coordinate-reference-systems/><!--4.3 --> - Coordinate Reference Systems</a></li>
          
          

        
        
        

        
        
        
          
          <li><a href= https://earthdatascience.org/courses/earth-analytics/spatial-data-r/geographic-vs-projected-coordinate-reference-systems-UTM/><!--4.4 --> - Geographic vs Projected CRS</a></li>
          
          

        
        
        
          
          <li><a href= https://earthdatascience.org/courses/earth-analytics/spatial-data-r/understand-epsg-wkt-and-other-crs-definition-file-types/><!--4.5 --> - EPSG, Proj4, WKT crs Formats</a></li>
          
          

        
        
        
          
          <li><a href= https://earthdatascience.org/courses/earth-analytics/spatial-data-r/reproject-vector-data/><!--4.6 --> - Reproject Vector Data</a></li>
          
          

        
       </ul>
        

        
        
        <!-- If it's a textbook with a chapter number write "chapter", else assume it is a week -->

          <li><span class="nav__sub-title grey"><i class="fa fa-caret-down" aria-hidden="true"></i>   4.2 Custom maps in r  </span></li>
        <ul>

      
      <!-- count lessons -->

        
        
        

        
        
        
          
          <li><a href= https://earthdatascience.org/courses/earth-analytics/spatial-data-r/r-create-custom-legend-with-base-plot/ class='active'> <!--4.1 -->- Maps with Base Plot</a></li>
          
          

        
        
        

        
        
        
          
          <li><a href= https://earthdatascience.org/courses/earth-analytics/spatial-data-r/make-maps-with-ggplot-in-R/><!--4.2 --> - Maps with ggplot</a></li>
          
          

        
        
        

        
        
        

        
        
        
          
          <li><a href= https://earthdatascience.org/courses/earth-analytics/spatial-data-r/make-interactive-maps-with-leaflet-r/><!--4.3 --> - Interactive Leaflet Maps</a></li>
          
          

        
        
        

        
        
        

        
        
        

        
       </ul>
        

        
      </ul>

      <!-- BEGIN Learn how to lessons -->
       <ul>
         
         
       </ul>


     </div>


      <!-- END BEGIN Learn how to lessons -->

      <!--  -->
      

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 5 <a href="https://earthdatascience.org/courses/earth-analytics/remote-sensing-uncertainty/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 LIDAR DATA IN R - REMOTE SENSING UNCERTAINTY</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/remote-sensing-uncertainty/about-uncertainty-lidar/"> 5.   Uncertainty in Scientific Data & Metadata  </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 6 <a href="https://earthdatascience.org/courses/earth-analytics/automate-science-workflows/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 FUNCTIONS & AUTOMATION</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/automate-science-workflows/write-efficient-code-for-science-r/"> 6.   Efficient Programming Using Functions </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 7 <a href="https://earthdatascience.org/courses/earth-analytics/multispectral-remote-sensing-data/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 MULTISPECTRAL IMAGERY R - NAIP, LANDSAT, FIRE & REMOTE SENSING</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/multispectral-remote-sensing-data/introduction-multispectral-imagery-r/"> 7.   Fire / Spectral Remote Sensing Data in R </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/multispectral-remote-sensing-data/source-function-in-R/"> 7.2   Source Functions in R </a>
                                </li>
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 8 <a href="https://earthdatascience.org/courses/earth-analytics/multispectral-remote-sensing-modis/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 QUANTIFY FIRE IMPACTS - REMOTE SENSING</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/multispectral-remote-sensing-modis/intro-spectral-data-r/"> 8.1   Fire / spectral remote sensing data - in R </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/multispectral-remote-sensing-modis/add-variables-to-rmarkdown-report/"> 8.2   Refine Rmarkdown Reports </a>
                                </li>
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 9 <a href="https://earthdatascience.org/courses/earth-analytics/week-9/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 STUDY FIRE USING REMOTE SENSING DATA</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 10 <a href="https://earthdatascience.org/courses/earth-analytics/communicate-your-science/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 MIDTERM REVIEW / PRESENTATION BEST PRACTICES</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 11 <a href="https://earthdatascience.org/courses/earth-analytics/week-11/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 MIDTERM PRESENTATIONS</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 12 <a href="https://earthdatascience.org/courses/earth-analytics/week-12/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 FALL BREAK: NO CLASS!</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 13 <a href="https://earthdatascience.org/courses/earth-analytics/get-data-using-apis/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 PROGRAMMATIC DATA ACCESS</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/get-data-using-apis/intro-to-social-media-text-mining-r/"> 13.1   twitter APIs </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://earthdatascience.org/courses/earth-analytics/get-data-using-apis/intro-to-programmatic-data-access-r/"> 13.2   APIs </a>
                                </li>
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 14 <a href="https://earthdatascience.org/courses/earth-analytics/earth-analytics-final-projects/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 FINAL PROJECTS & COURSE FEEDBACK DISCUSSION</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 15 <a href="https://earthdatascience.org/courses/earth-analytics/earth-analytics-final-week/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 LAST CLASS: FINAL PROJECT PRESENTATIONS</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    
  </ul></li>
 </ul>


 <ul>
   <li><span class="nav__sub-title"><i class="fa fa-folder-open" aria-hidden="true"></i> Overview</span>
    <ul>
     
          
         <li> <a href="https://earthdatascience.org/courses/earth-analytics/">
           Course Home Page </a></li>
         

     
          
         <li> <a href="https://earthdatascience.org/courses/earth-analytics/earth-analytics-syllabus/">
           Course Syllabus </a></li>
         

     
          
         <li> <a href="https://earthdatascience.org/courses/earth-analytics/mid-term/">
           Midterm Project </a></li>
         

     
          
         <li> <a href="https://earthdatascience.org/courses/earth-analytics/final-project/">
           Final Project </a></li>
         

     
          
         <li> <a href="https://earthdatascience.org/courses/earth-analytics/data-sources/">
           Data Source List </a></li>
         

     
          
         <li> <a href="https://earthdatascience.org/courses/earth-analytics/search-course-lessons/">
           Search Course Lessons </a></li>
         

     
   </ul>
 </li>
</ul>
</nav>

<h5><a href="https://earthdatascience.org/courses/earth-analytics/" ><i class="fa fa-home" aria-hidden="true"></i> earth-analytics Home</a></h5>

    

    

  
  </div>






<!-- begin science / science themes side bar nav -->



  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">

    <meta itemprop="headline" content="GIS in R: Plot Spatial Data and Create Custom Legends in R">
    <meta itemprop="description" content="In this lesson you break down the steps required to create a custom legend for spatial data in R. You learn about creating unique symbols per category, customizing colors and placing your legend outside of the plot using the xpd argument combined with x,y placement and margin settings.">
    <meta itemprop="datePublished" content="February 15, 2017">
    <meta itemprop="dateModified" content="March 30, 2020">

    <div class="page__inner-wrap">
        <header>
          

          <!-- BEGIN: insert a welcome to the module block on pages that are part of a module set -->

          <!-- END: insert welcome block -->

          
              

            
                <h1 class="page__title" itemprop="headline">
                Lesson 1. 
                 GIS in R: Plot Spatial Data and Create Custom Legends in R

                
                </h1>
            

          

          
            <div class="page__meta">
              
              
              <a href="https://earthdatascience.org/authors/leah-wasser">Leah Wasser</a>
              
            </div>
          

            <br/>

            
            <div class="notice--warning header" markdown="1">
            
              
                  <h1> <i class="fa fa-6 fa-book" aria-hidden="true"></i> Create Maps and Custom Legends in R with ggplot and Base Plot - Earth analytics course module</h1>
                  Welcome to the first lesson in the <strong>Create Maps and Custom Legends in R with ggplot and Base Plot</strong> module.
                  Learn how to create maps with custom colors and legends in both base R and with ggplot in R.
               
            
            </div>
            

              
            

            <!-- For tools pages add authors and tool title -->

            
        </header>



      <section class="page__content" itemprop="text">

        <!-- would like to include the TOC automatically but this does weird things-->
        
          
            <aside class="sidebar__right">
<nav class="toc">
    <header><h4 class="nav__title"><i class="fa fa-file-text"></i> In This Lesson</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#learning-objectives" id="markdown-toc-learning-objectives"><i class="fa fa-graduation-cap" aria-hidden="true"></i> Learning Objectives</a></li>
  <li><a href="#what-you-need" id="markdown-toc-what-you-need"><i class="fa fa-check-square-o fa-2" aria-hidden="true"></i> What You Need</a></li>
  <li><a href="#plot-lines-by-attribute-value" id="markdown-toc-plot-lines-by-attribute-value">Plot Lines by Attribute Value</a></li>
  <li><a href="#optional-challenge-plot-line-width-by-attribute" id="markdown-toc-optional-challenge-plot-line-width-by-attribute"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Optional Challenge: Plot Line Width by Attribute</a></li>
  <li><a href="#add-plot-legend" id="markdown-toc-add-plot-legend">Add Plot Legend</a></li>
  <li><a href="#plot-lines-by-attribute" id="markdown-toc-plot-lines-by-attribute">Plot Lines by Attribute</a></li>
  <li><a href="#adding-points-and-lines-to-a-legend" id="markdown-toc-adding-points-and-lines-to-a-legend">Adding Points and Lines to a Legend</a></li>
  <li><a href="#force-the-legend-to-plot-next-to-your-plot" id="markdown-toc-force-the-legend-to-plot-next-to-your-plot">Force the Legend to Plot Next to Your Plot</a></li>
  <li><a href="#bonus" id="markdown-toc-bonus">BONUS!</a></li>
</ul>

  </nav>
</aside>

<div class="notice--success">

  <h2 id="learning-objectives"><i class="fa fa-graduation-cap" aria-hidden="true"></i> Learning Objectives</h2>

  <p>After completing this tutorial, you will be able to:</p>

  <ul>
    <li>Add a custom legend to a map in <code class="language-plaintext highlighter-rouge">R</code>.</li>
    <li>Plot a vector dataset by attributes in <code class="language-plaintext highlighter-rouge">R</code>.</li>
  </ul>

  <h2 id="what-you-need"><i class="fa fa-check-square-o fa-2" aria-hidden="true"></i> What You Need</h2>

  <p>You will need a computer with internet access to complete this lesson and the data for week 4 of the course.</p>

  <p><a href="https://ndownloader.figshare.com/files/7525363" data-proofer-ignore="" class="btn"><i class="fa fa-download" aria-hidden="true"></i> Download Week 4 Data (~500 MB)</a></p>

</div>

<h2 id="plot-lines-by-attribute-value">Plot Lines by Attribute Value</h2>
<p>To plot vector data with the color of each objected determined by it’s associated attribute values, the
attribute values must be class = <code class="language-plaintext highlighter-rouge">factor</code>. A <strong>factor</strong> is similar to a category</p>
<ul>
  <li>you can group vector objects by a particular category value - for example you
can group all lines of <code class="language-plaintext highlighter-rouge">TYPE=footpath</code>. However, in <code class="language-plaintext highlighter-rouge">R</code>, a factor can also have
a determined <em>order</em>.</li>
</ul>

<p>By default, <code class="language-plaintext highlighter-rouge">R</code> will import spatial object attributes as <code class="language-plaintext highlighter-rouge">factors</code>.</p>

<p class="notice--success"><i class="fa fa-star"></i> <strong>Data Tip:</strong> If your data attribute values are not
read in as factors, you can convert the categorical
attribute values using <code class="language-plaintext highlighter-rouge">as.factor()</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># load libraries</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">raster</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">rgdal</span><span class="p">)</span><span class="w">
</span><span class="n">options</span><span class="p">(</span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Next, import and explore the data.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># import roads</span><span class="w">
</span><span class="n">sjer_roads</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">readOGR</span><span class="p">(</span><span class="s2">"data/week-04/california/madera-county-roads/tl_2013_06039_roads.shp"</span><span class="p">)</span><span class="w">
</span><span class="c1">## OGR data source with driver: ESRI Shapefile </span><span class="w">
</span><span class="c1">## Source: "/root/earth-analytics/data/week-04/california/madera-county-roads/tl_2013_06039_roads.shp", layer: "tl_2013_06039_roads"</span><span class="w">
</span><span class="c1">## with 9640 features</span><span class="w">
</span><span class="c1">## It has 4 fields</span><span class="w">
</span><span class="c1"># view the original class of the TYPE column</span><span class="w">
</span><span class="nf">class</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "character"</span><span class="w">
</span><span class="n">unique</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "M" NA  "S" "C"</span><span class="w">
</span></code></pre></div></div>

<p>It looks like you have some missing values in your road types. You want to plot all
road types even those that are <code class="language-plaintext highlighter-rouge">NA</code>. Let’s change the roads with an <code class="language-plaintext highlighter-rouge">RTTYP</code> attribute of
<code class="language-plaintext highlighter-rouge">NA</code> to “unknown”.</p>

<p>Following, you can convert the road attribute to a factor.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># set all NA values to "unknown" so they still plot</span><span class="w">
</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Unknown"</span><span class="w">
</span><span class="n">unique</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "M"       "Unknown" "S"       "C"</span><span class="w">

</span><span class="c1"># view levels or categories - note that there are no categories yet in your data!</span><span class="w">
</span><span class="c1"># the attributes are just read as a list of character elements.</span><span class="w">
</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## NULL</span><span class="w">

</span><span class="c1"># Convert the TYPE attribute into a factor</span><span class="w">
</span><span class="c1"># Only do this IF the data do not import as a factor!</span><span class="w">
</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="nf">class</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "factor"</span><span class="w">
</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "C"       "M"       "S"       "Unknown"</span><span class="w">

</span><span class="c1"># how many features are in each category or level?</span><span class="w">
</span><span class="n">summary</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">##       C       M       S Unknown </span><span class="w">
</span><span class="c1">##      10    4456      25    5149</span><span class="w">
</span></code></pre></div></div>

<p>When you use <code class="language-plaintext highlighter-rouge">plot()</code>, you can specify the colors to use for each attribute using
the <code class="language-plaintext highlighter-rouge">col = </code> element. To ensure that <code class="language-plaintext highlighter-rouge">R</code> renders each feature by it’s associated
factor / attribute value, you need to create a <code class="language-plaintext highlighter-rouge">vector</code> or colors - one for each
feature, according to its associated attribute value / <code class="language-plaintext highlighter-rouge">factor</code> value.</p>

<p>To create this vector you can use the following syntax:</p>

<p><code class="language-plaintext highlighter-rouge">c("colorOne", "colorTwo", "colorThree")[object$factor]</code></p>

<p>Note in the above example you have</p>

<ol>
  <li>A vector of colors - one for each factor value (unique attribute value).</li>
  <li>The attribute itself (<code class="language-plaintext highlighter-rouge">[object$factor]</code>) of class <code class="language-plaintext highlighter-rouge">factor</code>.</li>
</ol>

<p>Let’s give this a try.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># count the number of unique values or levels</span><span class="w">
</span><span class="nf">length</span><span class="p">(</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">))</span><span class="w">
</span><span class="c1">## [1] 4</span><span class="w">

</span><span class="c1"># create a color palette of 4 colors - one for each factor level</span><span class="w">
</span><span class="n">road_palette</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"green"</span><span class="p">,</span><span class="w"> </span><span class="s2">"grey"</span><span class="p">,</span><span class="w"> </span><span class="s2">"purple"</span><span class="p">)</span><span class="w">
</span><span class="n">road_palette</span><span class="w">
</span><span class="c1">## [1] "blue"   "green"  "grey"   "purple"</span><span class="w">
</span><span class="c1"># create a vector of colors - one for each feature in your vector object</span><span class="w">
</span><span class="c1"># according to its attribute value</span><span class="w">
</span><span class="n">all_road_colors</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"green"</span><span class="p">,</span><span class="w"> </span><span class="s2">"grey"</span><span class="p">,</span><span class="w"> </span><span class="s2">"purple"</span><span class="p">)[</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">]</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">all_road_colors</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "green" "green" "green" "green" "green" "green"</span><span class="w">

</span><span class="c1"># plot the lines data, apply a diff color to each factor level)</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">all_road_colors</span><span class="p">,</span><span class="w">
     </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/palette-and-plot-1.png" title="Adjust colors on map by creating a palette." alt="Adjust colors on map by creating a palette." width="90%" /></p>

<h3 id="adjust-line-width">Adjust Line Width</h3>
<p>You can also adjust the width of your plot lines using <code class="language-plaintext highlighter-rouge">lwd</code>. You can set all lines
to be thicker or thinner using <code class="language-plaintext highlighter-rouge">lwd=</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># make all lines thicker</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">all_road_colors</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads\n All Lines Thickness=6"</span><span class="p">,</span><span class="w">
     </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">6</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/adjust-line-width-1.png" title="map of madera roads" alt="map of madera roads" width="90%" /></p>

<h3 id="adjust-line-width-by-attribute">Adjust Line Width by Attribute</h3>

<p>If you want a unique line width for each factor level or attribute category
in your spatial object, you can use the same syntax that you used for colors, above.</p>

<p><code class="language-plaintext highlighter-rouge">lwd = c("widthOne", "widthTwo","widthThree")[object$factor]</code></p>

<p>Note that this requires the attribute to be of class <code class="language-plaintext highlighter-rouge">factor</code>. Let’s give it a
try.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">class</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "factor"</span><span class="w">
</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "C"       "M"       "S"       "Unknown"</span><span class="w">
</span><span class="c1"># create vector of line widths</span><span class="w">
</span><span class="n">lineWidths</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">))[</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">]</span><span class="w">
</span><span class="c1"># adjust line width by level</span><span class="w">
</span><span class="c1"># in this case, boardwalk (the first level) is the widest.</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">all_road_colors</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads \n Line width varies by TYPE Attribute Value"</span><span class="p">,</span><span class="w">
     </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lineWidths</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/line-width-unique-1.png" title="Map with legend that shows unique line widths." alt="Map with legend that shows unique line widths." width="90%" /></p>

<div class="notice--warning">

  <h2 id="optional-challenge-plot-line-width-by-attribute"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Optional Challenge: Plot Line Width by Attribute</h2>

  <p>You can customize the width of each line, according to specific attribute value,
too. To do this, you create a vector of line width values, and map that vector
to the factor levels - using the same syntax that you used above for colors.
HINT: <code class="language-plaintext highlighter-rouge">lwd=(vector of line width thicknesses)[spatialObject$factorAttribute]</code></p>

  <p>Create a plot of roads using the following line thicknesses:</p>

  <ol>
    <li><strong>unknown</strong> lwd = 3</li>
    <li><strong>M</strong> lwd = 1</li>
    <li><strong>S</strong> lwd = 2</li>
    <li><strong>C</strong> lwd = 1.5</li>
  </ol>

</div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/roads-map-1.png" title="roads map modified" alt="roads map modified" width="90%" /></p>

<p class="notice--success"><i class="fa fa-star"></i> <strong>Data Tip:</strong> Given you have a factor with 4 levels,
you can create an vector of numbers, each of which specifies the thickness of each
feature in your <code class="language-plaintext highlighter-rouge">SpatialLinesDataFrame</code> by factor level (category): <code class="language-plaintext highlighter-rouge">c(6,4,1,2)[sjer_roads$RTTYP]</code></p>

<h2 id="add-plot-legend">Add Plot Legend</h2>
<p>You can add a legend to your plot too. When you add a legend, you use the following
elements to specify labels and colors:</p>

<ul>
  <li><strong>location</strong>: you can specify an x and Y location of the plot Or generally specify the location e.g. ‘bottomright’
keyword. You could also use <code class="language-plaintext highlighter-rouge">top</code>, <code class="language-plaintext highlighter-rouge">topright</code>, etc.</li>
  <li><code class="language-plaintext highlighter-rouge">levels(objectName$attributeName)</code>: Label the <strong>legend elements</strong> using the
categories of <code class="language-plaintext highlighter-rouge">levels</code> in an attribute (e.g., levels(sjer_roads$RTTYP) means use
the levels C, S, footpath, etc).</li>
  <li><code class="language-plaintext highlighter-rouge">fill = </code>: apply unique <strong>colors</strong> to the boxes in your legend. <code class="language-plaintext highlighter-rouge">palette()</code> is
the default set of colors that <code class="language-plaintext highlighter-rouge">R</code> applies to all plots.</li>
</ul>

<p>Let’s add a legend to your plot.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># add legend to plot</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">all_road_colors</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads\n Default Legend"</span><span class="p">)</span><span class="w">

</span><span class="c1"># you can use the color object that you created above to color the legend objects</span><span class="w">
</span><span class="n">road_palette</span><span class="w">
</span><span class="c1">## [1] "blue"   "green"  "grey"   "purple"</span><span class="w">

</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w">   </span><span class="c1"># location of legend</span><span class="w">
      </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">),</span><span class="w"> </span><span class="c1"># categories or elements to render in</span><span class="w">
			 </span><span class="c1"># the legend</span><span class="w">
      </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">road_palette</span><span class="p">)</span><span class="w"> </span><span class="c1"># color palette to use to fill objects in legend.</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/add-legend-to-plot-1.png" title="SJER roads map with custom legend." alt="SJER roads map with custom legend." width="90%" /></p>

<p>You can tweak the appearance of your legend too.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">bty = "n"</code>: turn off the legend BORDER</li>
  <li><code class="language-plaintext highlighter-rouge">cex</code>: change the font size</li>
</ul>

<p>Let’s try it out.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># adjust legend</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">road_palette</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads \n Modified Legend - smaller font and no border"</span><span class="p">)</span><span class="w">
</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w">
       </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">),</span><span class="w">
       </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">road_palette</span><span class="p">,</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="c1"># turn off the legend border</span><span class="w">
       </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.8</span><span class="p">)</span><span class="w"> </span><span class="c1"># decrease the font / legend size</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/modify-legend-plot-1.png" title="modified custom legend" alt="modified custom legend" width="90%" /></p>

<p>You can modify the colors used to plot your lines by creating a new color vector,
directly in the plot code too rather than creating a separate object.</p>

<p><code class="language-plaintext highlighter-rouge">col = (newColors)[sjer_roads$RTTYP]</code></p>

<p>Let’s try it!</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">
</span><span class="c1"># manually set the colors for the plot!</span><span class="w">
</span><span class="n">newColors</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"springgreen"</span><span class="p">,</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"magenta"</span><span class="p">,</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">)</span><span class="w">
</span><span class="n">newColors</span><span class="w">
</span><span class="c1">## [1] "springgreen" "blue"        "magenta"     "orange"</span><span class="w">

</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">newColors</span><span class="p">)[</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">],</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads \n Pretty Colors"</span><span class="p">)</span><span class="w">

</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w">
       </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">),</span><span class="w">
       </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newColors</span><span class="p">,</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.8</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/plot-different-colors-1.png" title="adjust colors" alt="adjust colors" width="90%" /></p>

<p class="notice--success"><i class="fa fa-star"></i> <strong>Data tip:</strong> You can modify the defaul R color palette
using the palette method. For example <code class="language-plaintext highlighter-rouge">palette(rainbow(6))</code> or
<code class="language-plaintext highlighter-rouge">palette(terrain.colors(6))</code>. You can reset the palette colors using
<code class="language-plaintext highlighter-rouge">palette("default")</code>!</p>

<h2 id="plot-lines-by-attribute">Plot Lines by Attribute</h2>

<p>Create a plot that emphasizes only roads designated as C or S (County or State).
To emphasize these types of roads, make the lines that are C or S, THICKER than
the other lines.
NOTE: this attribute information is located in the <code class="language-plaintext highlighter-rouge">sjer_roads$RTTYP</code>
attribute.</p>

<p>Be sure to add a title and legend to your map! You might consider a color
palette that has all County and State roads displayed in a bright color. All
other lines can be grey.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># view levels</span><span class="w">
</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "C"       "M"       "S"       "Unknown"</span><span class="w">
</span><span class="c1"># make sure the attribute is of class "factor"</span><span class="w">
</span><span class="nf">class</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "factor"</span><span class="w">

</span><span class="c1"># convert to factor if necessary</span><span class="w">
</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "C"       "M"       "S"       "Unknown"</span><span class="w">

</span><span class="c1"># count factor levels</span><span class="w">
</span><span class="nf">length</span><span class="p">(</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">))</span><span class="w">
</span><span class="c1">## [1] 4</span><span class="w">
</span><span class="c1"># set colors so only the allowed roads are magenta</span><span class="w">
</span><span class="c1"># note there are 3 levels so you need 3 colors</span><span class="w">
</span><span class="n">challenge_colors</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"magenta"</span><span class="p">,</span><span class="s2">"grey"</span><span class="p">,</span><span class="s2">"magenta"</span><span class="p">,</span><span class="s2">"grey"</span><span class="p">)</span><span class="w">
</span><span class="n">challenge_colors</span><span class="w">
</span><span class="c1">## [1] "magenta" "grey"    "magenta" "grey"</span><span class="w">

</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">challenge_colors</span><span class="p">)[</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">],</span><span class="w">
     </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">)[</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">],</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SJER Roads"</span><span class="p">)</span><span class="w">

</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w">
       </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">),</span><span class="w">
       </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">challenge_colors</span><span class="p">,</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="c1"># turn off border</span><span class="w">
       </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.8</span><span class="p">)</span><span class="w"> </span><span class="c1"># adjust font size</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/road-map-2-1.png" title="emphasize some attributes" alt="emphasize some attributes" width="90%" /></p>

<p>Finall, let’s adjust the legend. You want the legend SYMBOLS to represent the
actual symbology in the map - which contains lines, not polygons.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">challenge_colors</span><span class="p">)[</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">],</span><span class="w">
     </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">)[</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">],</span><span class="w"> </span><span class="c1"># color each line in the map by attribute</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads\n County and State recognized roads"</span><span class="p">)</span><span class="w">

</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w">
       </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">),</span><span class="w">
       </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="c1"># tell are which objects to be drawn as a line in the legend.</span><span class="w">
       </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w">  </span><span class="c1"># set the WIDTH of each legend line</span><span class="w">
       </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">challenge_colors</span><span class="p">,</span><span class="w"> </span><span class="c1"># set the color of each legend line</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="c1"># turn off border</span><span class="w">
       </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.8</span><span class="p">)</span><span class="w"> </span><span class="c1"># adjust font size</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/final-custom-legend-1.png" title="Custom legend with lines" alt="Custom legend with lines" width="90%" /></p>

<!-- C = County
I = Interstate
M = Common Name
O = Other
S = State recognized
U = U.S.-->

<h2 id="adding-points-and-lines-to-a-legend">Adding Points and Lines to a Legend</h2>

<p>The last step in customizing a legend is adding different types of symbols to
the plot. In the example above, you just added lines. But what if you wanted to add
some POINTS too? You will do that next.</p>

<p>In the data below, you’ve create a custom legend where each symbol type and color
is defined using a vector. You have 3 levels: grass, soil and trees. Thus you
need to define 3 symbols and 3 colors for your legend and your plot.</p>

<p><code class="language-plaintext highlighter-rouge">pch = c(8,18,8)</code></p>

<p><code class="language-plaintext highlighter-rouge">plot_colors &lt;- c("chartreuse4", "burlywood4", "darkgreen")</code></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># import points layer</span><span class="w">
</span><span class="n">sjer_plots</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">readOGR</span><span class="p">(</span><span class="s2">"data/week-04/california/SJER/vector_data/SJER_plot_centroids.shp"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">)</span><span class="w">
</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">)</span><span class="w">
</span><span class="c1">## [1] "grass" "soil"  "trees"</span><span class="w">
</span><span class="c1"># grass, soil trees</span><span class="w">
</span><span class="n">plot_colors</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"chartreuse4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"burlywood4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"darkgreen"</span><span class="p">)</span><span class="w">

</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_plots</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">plot_colors</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads\n County and State recognized roads"</span><span class="p">)</span><span class="w">


</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w">
       </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">)),</span><span class="w">
       </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">),</span><span class="w">  </span><span class="c1"># set the WIDTH of each legend line</span><span class="w">
       </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plot_colors</span><span class="p">,</span><span class="w"> </span><span class="c1"># set the color of each legend line</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="c1"># turn off border</span><span class="w">
       </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.9</span><span class="p">)</span><span class="w"> </span><span class="c1"># adjust legend font size</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/legend-points-lines-1.png" title="plot legend with points and lines" alt="plot legend with points and lines" width="90%" /></p>

<p>Next, let’s try to plot your roads on top of the plot locations. Then let’s create
a custom legend that contains both lines and points. NOTE: In this example I’ve
fixed the projection for the roads layer and cropped it! You will have to do the same before
this code will work.</p>

<p>When you create a legend, you will have to add the labels for both the points
layer and the lines layer.</p>

<p><code class="language-plaintext highlighter-rouge">c(levels(sjer_plots$plot_type), levels(sjer_roads$RTTYP))</code></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># view all elements in legend</span><span class="w">
</span><span class="nf">c</span><span class="p">(</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">),</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">))</span><span class="w">
</span><span class="c1">## [1] "grass"   "soil"    "trees"   "C"       "M"       "S"       "Unknown"</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">
</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_plots</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">plot_colors</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads and plot locations"</span><span class="p">)</span><span class="w">

</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads_utm</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">challenge_colors</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w">
       </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">),</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)),</span><span class="w">
       </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">),</span><span class="w">  </span><span class="c1"># set the WIDTH of each legend line</span><span class="w">
       </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plot_colors</span><span class="p">,</span><span class="w"> </span><span class="c1"># set the color of each legend line</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="c1"># turn off border</span><span class="w">
       </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.9</span><span class="p">)</span><span class="w"> </span><span class="c1"># adjust legend font size</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/custom-legend-points-lines-1.png" title="final plot custom legend." alt="final plot custom legend." width="90%" /></p>

<p>Next you have to tell <code class="language-plaintext highlighter-rouge">R</code>, which symbols are lines and which are point symbols. You
can do that using the <code class="language-plaintext highlighter-rouge">lty</code> argument. You have 3 unique point symbols and 4 unique
line symbols. You can include a <code class="language-plaintext highlighter-rouge">NA</code> for each element that should not be a line in
the <code class="language-plaintext highlighter-rouge">lty</code> argument:</p>

<p><code class="language-plaintext highlighter-rouge">lty = c(NA, NA, NA, 1, 1, 1, 1)</code></p>

<p>And you include a <code class="language-plaintext highlighter-rouge">NA</code> value for each element that should not be a symbol in the
<code class="language-plaintext highlighter-rouge">pch</code> argument:</p>

<p><code class="language-plaintext highlighter-rouge">pch = c(8, 18, 8, NA, NA, NA, NA)</code>`</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">
</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_plots</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">plot_colors</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads and plot locations"</span><span class="p">)</span><span class="w">

</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads_utm</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">challenge_colors</span><span class="p">)[</span><span class="n">sjer_roads_utm</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="s2">"bottomright"</span><span class="p">,</span><span class="w">
       </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">),</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)),</span><span class="w">
       </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">),</span><span class="w">  </span><span class="c1"># set the symbol for each point</span><span class="w">
       </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w">
       </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">plot_colors</span><span class="p">,</span><span class="w"> </span><span class="n">challenge_colors</span><span class="p">),</span><span class="w"> </span><span class="c1"># set the color of each legend line</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="c1"># turn off border</span><span class="w">
       </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.9</span><span class="p">)</span><span class="w"> </span><span class="c1"># adjust legend font size</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/custom-legend-points-lines-2-1.png" title="Plot with points and lines customized." alt="Plot with points and lines customized." width="90%" /></p>

<h2 id="force-the-legend-to-plot-next-to-your-plot">Force the Legend to Plot Next to Your Plot</h2>

<p>Refining the look of your plots takes a bit of patience in <code class="language-plaintext highlighter-rouge">R</code>, but it can be
done! Play with the code below to see if you can make your legend plot NEXT TO
rather than on top of your plot.</p>

<p>The steps are:</p>

<ol>
  <li>Place your legend on the OUTSIDE of the plot extent by grabbing the <code class="language-plaintext highlighter-rouge">xmax</code> and
<code class="language-plaintext highlighter-rouge">ymax</code> values from one of the objects that you are plotting’s <code class="language-plaintext highlighter-rouge">extent()</code>. This
allows you to be precise in your legend placement.</li>
  <li>Set the <code class="language-plaintext highlighter-rouge">xpd = TRUE</code> argument in your legend to enforce plotting outside of the plot
extent and</li>
  <li>OPTIONAL:  adjust the plot <strong>PAR</strong>ameters using <code class="language-plaintext highlighter-rouge">par()</code>. You can set the <strong>mar</strong>gin
of your plot using <code class="language-plaintext highlighter-rouge">mar =</code>. This provides extra space on the right (if you’d like your
legend to plot on the right) for your legend and avoids things being “chopped off”.
Provide the <code class="language-plaintext highlighter-rouge">mar =</code> argument in the format: <code class="language-plaintext highlighter-rouge">c(bottom, left, top, right)</code>. The code
below is telling <code class="language-plaintext highlighter-rouge">R</code> to add 7 units of padding on the RIGHT hand side of your plot.
The default units are INCHES.</li>
</ol>

<p><strong>IMPORTANT:</strong> Be cautious with margins. Sometimes they can cause problems when you
knit - particularly if they are too large.</p>

<p>Let’s give this a try. First, you grab the northwest corner location x and y. You
will use this to place your legend.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># figure out where the upper RIGHT hand corner of your plot extent is</span><span class="w">
</span><span class="n">the_plot_extent</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">extent</span><span class="p">(</span><span class="n">sjer_aoi</span><span class="p">)</span><span class="w">

</span><span class="c1"># grab the upper right hand corner coordinates</span><span class="w">
</span><span class="n">furthest_pt_east</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">the_plot_extent</span><span class="o">@</span><span class="n">xmax</span><span class="w">
</span><span class="n">furthest_pt_north</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">the_plot_extent</span><span class="o">@</span><span class="n">ymax</span><span class="w">
</span><span class="c1"># view values</span><span class="w">
</span><span class="n">furthest_pt_east</span><span class="w">
</span><span class="c1">## [1] 258867.4</span><span class="w">
</span><span class="n">furthest_pt_north</span><span class="w">
</span><span class="c1">## [1] 4112362</span><span class="w">

</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_plots</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">plot_colors</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads and plot locations"</span><span class="p">)</span><span class="w">

</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads_utm</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">challenge_colors</span><span class="p">)[</span><span class="n">sjer_roads_utm</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">furthest_pt_east</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">furthest_pt_north</span><span class="p">,</span><span class="w">
       </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">),</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)),</span><span class="w">
       </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">),</span><span class="w">  </span><span class="c1"># set the symbol for each point</span><span class="w">
       </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="p">,</span><span class="w">
       </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">plot_colors</span><span class="p">,</span><span class="w"> </span><span class="n">challenge_colors</span><span class="p">),</span><span class="w"> </span><span class="c1"># set the color of each legend line</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="c1"># turn off border</span><span class="w">
       </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.9</span><span class="p">,</span><span class="w"> </span><span class="c1"># adjust legend font size</span><span class="w">
       </span><span class="n">xpd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1"># force the legend to plot outside of your extent</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/adjust-legend-1.png" title="plot with fixed legend" alt="plot with fixed legend" width="90%" /></p>

<p>Let’s use the margin parameter to clean things up. Also notice I’m using the
AOI extent layer to create a “box” around my plot. Now things are starting to
look much cleaner!</p>

<p>I’ve also added some “fake” legend elements to create subheadings like you
might add to a map legend in <code class="language-plaintext highlighter-rouge">QGIS</code> or <code class="language-plaintext highlighter-rouge">ArcGIS</code>.</p>

<p><code class="language-plaintext highlighter-rouge">legend = c("Plots", levels(sjer_plots$plot_type), "Road Types", levels(sjer_roads$RTTYP))</code></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># adjust margin to make room for the legend</span><span class="w">
</span><span class="n">par</span><span class="p">(</span><span class="n">mar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">))</span><span class="w">
</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_aoi</span><span class="p">,</span><span class="w">
     </span><span class="n">border</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grey"</span><span class="p">,</span><span class="w">
     </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads and plot locations"</span><span class="p">)</span><span class="w">
</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_plots</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">plot_colors</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads_utm</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">challenge_colors</span><span class="p">)[</span><span class="n">sjer_roads_utm</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">furthest_pt_east</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">50</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">furthest_pt_north</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">15</span><span class="p">),</span><span class="w">
       </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Plots"</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">),</span><span class="w"> </span><span class="s2">"Road Types"</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)),</span><span class="w">
       </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">),</span><span class="w">  </span><span class="c1"># set the symbol for each point</span><span class="w">
       </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w">
       </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">plot_colors</span><span class="p">,</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">challenge_colors</span><span class="p">),</span><span class="w"> </span><span class="c1"># set the color of each legend line</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="c1"># turn off border</span><span class="w">
       </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.9</span><span class="p">,</span><span class="w"> </span><span class="c1"># adjust legend font size</span><span class="w">
       </span><span class="n">xpd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/custom-legend-points-lines-22-1.png" title="final legend with points and lines customized 2ß." alt="final legend with points and lines customized 2ß." width="90%" /></p>

<p>Let’s take customization a step further. You can adjust the font styles in the legend
too to make it look <strong>even prettier</strong>. To do this, you use the <code class="language-plaintext highlighter-rouge">text.font</code> argument.</p>

<p>The possible values for the <code class="language-plaintext highlighter-rouge">text.font</code> argument are:</p>

<ul>
  <li>1: normal</li>
  <li>2: bold</li>
  <li>3: italic</li>
  <li>4: bold and italic</li>
</ul>

<p>Notice below, I am passing a vector of values, one value to represent each
element in the legend.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># adjust margin to make room for the legend</span><span class="w">
</span><span class="n">par</span><span class="p">(</span><span class="n">mar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">))</span><span class="w">
</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_aoi</span><span class="p">,</span><span class="w">
     </span><span class="n">border</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grey"</span><span class="p">,</span><span class="w">
     </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Madera County Roads and plot locations"</span><span class="p">)</span><span class="w">
</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_plots</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">plot_colors</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">)[</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">],</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1"># plot using new colors</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sjer_roads_utm</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">challenge_colors</span><span class="p">)[</span><span class="n">sjer_roads_utm</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">],</span><span class="w">
     </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="c1"># add a legend to your map</span><span class="w">
</span><span class="n">legend</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">furthest_pt_east</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">50</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">furthest_pt_north</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">15</span><span class="p">),</span><span class="w">
       </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Plots"</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_plots</span><span class="o">$</span><span class="n">plot_type</span><span class="p">),</span><span class="w"> </span><span class="s2">"Road Types"</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">sjer_roads</span><span class="o">$</span><span class="n">RTTYP</span><span class="p">)),</span><span class="w">
       </span><span class="n">pch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">),</span><span class="w">  </span><span class="c1"># set the symbol for each point</span><span class="w">
       </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w">
       </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">plot_colors</span><span class="p">,</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">challenge_colors</span><span class="p">),</span><span class="w"> </span><span class="c1"># set the color of each legend line</span><span class="w">
       </span><span class="n">bty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="c1"># turn off border</span><span class="w">
       </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.9</span><span class="p">,</span><span class="w"> </span><span class="c1"># adjust legend font size</span><span class="w">
       </span><span class="n">xpd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
       </span><span class="n">text.font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/custom-legend-points-lines-3-1.png" title="final legend with points and lines customized 2ß." alt="final legend with points and lines customized 2ß." width="90%" /></p>

<p>Now, if you want to move the legend out a bit further, what would you do?</p>

<h2 id="bonus">BONUS!</h2>

<p>Any idea how I added a space to the legend below to create “sections”?</p>

<p><img src="https://earthdatascience.org/images/courses/earth-analytics-r/04-vector-data-gis-r/review-materials/2017-02-15-plot01-custom-legend-R/custom-legend-points-lines-4-1.png" title="final legend with points and lines customized." alt="final legend with points and lines customized." width="90%" /></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># important: once you are done, reset par which resets plot margins</span><span class="w">
</span><span class="c1"># otherwise margins will carry over to your next plot and cause problems!</span><span class="w">
</span><span class="n">dev.off</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

          

        

        <!-- if the page is a course lesson, add pagination -->

        
         <!-- This is clunky code that forces pagination across lesson sets -->
<!-- NOTE: it won't include slideshows as written which makes sense -->
<!-- add forced pagination -->
<!-- first, get total lesson count -->

<div class="previous--next">





<!-- if it's page one - then no previous button -->
<!-- how do i figure out the link? i have to loop through again? -->


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


    

    
      

      
      
    
  
  <!-- ELSE if it's a module -->
  


    

    
      

      
      
       <a href="https://earthdatascience.org/courses/earth-analytics/spatial-data-r/make-maps-with-ggplot-in-R/" class="btn btn--info btn--large btn-success" style="float:right" >
         Maps with ggplot
         <i class="fa fa-4 fa-arrow-circle-right" aria-hidden="true"></i></a>
      
    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    

    
      

      
      
    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    

</div>

        
      </section>

      <footer class="page__meta">
        
        



  






  

  <i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags
  
  <span class="a-main-tag">
  <i class="fa fa-fw fa-tag" aria-hidden="true"></i><a href=https://earthdatascience.org/tags/spatial-data-and-gis/>Spatial data and gis</a>:
  </span>
  
    
    <a href=https://earthdatascience.org/tags/spatial-data-and-gis/vector-data/>vector data</a> 
    
    , 
  
    
    <a href=https://earthdatascience.org/tags/spatial-data-and-gis/coordinate-reference-systems/>coordinate reference systems</a> 
    
    , 
  
    
    <a href=https://earthdatascience.org/tags/spatial-data-and-gis/maps-in-r/>maps in r</a> 
    
    
  

  <span class="a-main-tag">
  <i class="fa fa-fw fa-tag" aria-hidden="true"></i><a href=https://earthdatascience.org/tags/reproducible-science-and-programming/>Reproducible science and programming</a>:
  </span>
  










        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-03-30">March 30, 2020</time></p>
        
        <!-- Add license information w/ DOI to the bottom -->
        
  
  

  
     The Earth analytics course is subject to the
     <a href="https://earthdatascience.org/license" target="_blank">CC BY-SA 4.0 License </a>.
      Citation DOI: <a href="https://zenodo.org/badge/latestdoi/143348761" target="_blank"> https://zenodo.org/badge/latestdoi/143348761</a>
  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  


      </footer>

      


<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=https://earthdatascience.org/courses/earth-analytics/spatial-data-r/r-create-custom-legend-with-base-plot/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://earthdatascience.org/courses/earth-analytics/spatial-data-r/r-create-custom-legend-with-base-plot/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://earthdatascience.org/courses/earth-analytics/spatial-data-r/r-create-custom-legend-with-base-plot/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://earthdatascience.org/courses/earth-analytics/spatial-data-r/r-create-custom-legend-with-base-plot/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
<br><br>
  <a href="https://earthlab.colorado.edu/earth-data-analytics-professional-graduate-certificate?utm_source=earthdatascience&utm_medium=website&utm_campaign=certificate-2022&utm_id=certificate-2022" target="_blank">
    <img src="https://earthdatascience.org/images/earth-data-analytics-professional-certificate-banner.png" alt="Get a professional Certificate in Earth Data Analytics at University of Colorado, Boulder" width="40%"></a>
</section>


       
    </div>

    
  </article>

  
  
    <div class="page__related">
      
        <h4 class="page__related-title">You May Also Enjoy</h4>
      
      <div class="grid__wrapper">
        
          




<div class="grid__item">
  
    <a href="https://earthdatascience.org/courses/earth-analytics-bootcamp/plot-data-python">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Plot Data With Matplotlib
</h2>


     
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  1 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">

     This Week

  


</p>
    </article>
  </a>
</div>

        
          




<div class="grid__item">
  
    <a href="https://earthdatascience.org/courses/use-data-open-source-python/hierarchical-data-formats-hdf/summarize-climate-data-by-season/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Calculate Seasonal Summary Values from Climate Data Variables Stored in NetCDF 4 Format: Work With MACA v2 Climate Data in Python
</h2>


     
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  26 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">Learn how to calculate seasonal summary values for MACA 2 climate data using xarray and region mask in open source Python.
</p>
    </article>
  </a>
</div>

        
          




<div class="grid__item">
  
    <a href="https://earthdatascience.org/courses/use-data-open-source-python/hierarchical-data-formats-hdf/subset-netcdf4-climate-data-spatially-aoi/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Calculate Summary Values Using Spatial Areas of Interest (AOIs) including Shapefiles for Climate Data Variables Stored in NetCDF 4 Format: Work With MACA v2 Climate Data in Python
</h2>


     
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  32 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">Climate datasets stored in netcdf 4 format often cover the entire globe or an entire country. Learn how to subset climate data spatially and by time slices u...</p>
    </article>
  </a>
</div>

        
          




<div class="grid__item">
  
    <a href="https://earthdatascience.org/courses/use-data-open-source-python/hierarchical-data-formats-hdf/use-netcdf-in-python-xarray/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">How to Open and Process NetCDF 4 Data Format in Open Source Python
</h2>


     
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  26 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">Historic and projected climate data are most often stored in netcdf 4 format. Learn how to open and process MACA version 2 climate data for the Continental U...</p>
    </article>
  </a>
</div>

        
      </div>
    </div>
  
</div>



    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->


<!-- Adding analytics code -->

        



<div class="page__footer-follow">
  <ul class="social-icons">
    <li>
      <strong>&copy; 2025 Earth Lab -
      <a href="https://earthdatascience.org/license"> All materials on this site
        are subject to the CC BY-SA 4.0 License. </a>
      </strong>
    </li>
  </ul>
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/earthlabcu"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/earthlab"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://earthdatascience.org/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<!--
<div class="page__footer-copyright">Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
-->

      </footer>
    </div>

    <script src="https://earthdatascience.org/assets/js/main.min.js"></script>





<script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>

    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-84081999-1', 'auto');
    ga('send', 'pageview');
</script>



  </body>
</html>

