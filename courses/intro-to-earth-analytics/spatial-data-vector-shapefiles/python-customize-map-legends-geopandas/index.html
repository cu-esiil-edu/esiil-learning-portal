


<!doctype html>
<html lang="en" class="no-js">
  <head>
    


<meta charset="utf-8">




<!-- begin SEO -->









<title>Customize your Maps in Python using Matplotlib: GIS in Python | Earth Data Science - Earth Lab </title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Earth Data Science - Earth Lab">
<meta property="og:title" content="Customize your Maps in Python using Matplotlib: GIS in Python">


  <link rel="canonical" href="https://www.earthdatascience.org/courses/intro-to-earth-analytics/spatial-data-vector-shapefiles/python-customize-map-legends-geopandas/">
  <meta property="og:url" content="https://www.earthdatascience.org/courses/intro-to-earth-analytics/spatial-data-vector-shapefiles/python-customize-map-legends-geopandas/">



  <meta content="In this lesson you will review how to customize matplotlib maps created using vector data in Python. You will review how to add legends, titles and how to customize map colors." name="description">
  <meta property="og:description" content="In this lesson you will review how to customize matplotlib maps created using vector data in Python. You will review how to add legends, titles and how to customize map colors.">


<!-- twitter cards -->

  <meta name="twitter:site" content="@earthlabcu">
  <meta name="twitter:title" content="Customize your Maps in Python using Matplotlib: GIS in Python">
  <meta name="twitter:description" content="In this lesson you will review how to customize matplotlib maps created using vector data in Python. You will review how to add legends, titles and how to customize map colors.">
  <meta name="twitter:url" content="https://www.earthdatascience.org/courses/intro-to-earth-analytics/spatial-data-vector-shapefiles/python-customize-map-legends-geopandas/">

  
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://earthdatascience.org/images/earth_sm_twit.png">
    <meta name="twitter:image:alt" content="The Earthlab Logo - image of a globe with courses, lessons and tutorials">

    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2019-09-11T00:00:00-05:00">
  
    <link rel="next" href="https://www.earthdatascience.org/courses/scientists-guide-to-plotting-data-in-python/" title="Scientist&#39;s Guide to Plotting Data in Python Textbook | Earth Lab CU Boulder">
  
  
    <link rel="prev" href="https://www.earthdatascience.org/courses/scientists-guide-to-plotting-data-in-python/plot-with-matplotlib/introduction-to-matplotlib-plots/plot-time-series-data-in-python/" title="Customize Matplotlibe Dates Ticks on the x-axis in Python">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Earth Analytics",
      "url" : "https://www.earthdatascience.org",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://www.earthdatascience.org/feed.xml" type="application/atom+xml" rel="alternate" title="Earth Data Science - Earth Lab Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="google-site-verification" content="LfpevjsE0wlELv5KKOZv1T2RhRimGSiRckWv5ZC19GU" />
<!-- don't use the old cataloged meta tags -->
<meta name="googlebot" content="noodp">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>


<!-- For all browsers
<link rel="stylesheet" href="https://www.earthdatascience.org/assets/css/main.css">-->
<link rel="stylesheet" href="https://www.earthdatascience.org/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->


    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>

    <script src="https://www.earthdatascience.org/assets/js/copy-code.js"></script>
  </head>

  <body>


    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<!-- search bar begin  - turning off for now-->

<div class="search">
<form role="search" method="get" action="https://www.earthdatascience.org/search/">
    <input id="q" name="q"
           placeholder="Search earth data science site" type="text">
</form>
<!--<span class='cu-boulder'><a href="http://www.colorado.edu/earthlab" target="_blank">Earth Lab University of Colorado - Boulder Home </a></span> -->
</div>


<!-- search bar END -->

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://www.earthdatascience.org/"><img src="/images/earth-lab-logo.png" alt="Earth Lab - Earth Data Science" style="height:80%;width:85%"></a></li>
          
            
            <li class="masthead__menu-item"><a href="https://www.earthdatascience.org/tutorials/">Tutorials</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://www.earthdatascience.org/courses/">Courses</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://www.earthdatascience.org/workshops/">Workshops</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://www.earthdatascience.org/tools/">Tools</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://www.earthdatascience.org/blog/">Blog</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://www.earthdatascience.org/about/">About</a></li>
          

        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    



  <div class="page__hero--overlay" style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://www.earthdatascience.org/images/header-images/earth-data-analytics-professional-certificate-banner.jpg');">
  <div class="wrapper">
        <h1 class="page__title" itemprop="headline">
          Earth Data Analytics Online Certificate
        </h1>
        <p><a href="https://earthlab.colorado.edu/earth-data-analytics-professional-graduate-certificate?utm_source=earthdatascience&utm_medium=website&utm_campaign=certificate-2022&utm_id=certificate-2022" target = "_blank" class="btn btn--light-outline btn--large">Enroll now! Learn more.</a></p>
  </div>
</div>





  
    













<nav class="breadcrumbs" role="menubar" aria-label="breadcrumbs">
 <ol itemscope itemtype="http://schema.org/BreadcrumbList">
 <a href="https://www.earthdatascience.org"></a>
 
 
 <!-- there is an offset of 1 so subtract 2 from the final crumb number-->
 
   
   
     <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
       <a href="https://www.earthdatascience.org/" itemprop="item"><span itemprop="name">Home</span></a>
       <meta itemprop="position" content="1" />
     </li>
     <span class="sep">/</span>
   
    
        
        <li><a href="https://www.earthdatascience.org/courses/">Courses </a>
        <meta itemprop="position" content="2" />
        <span class="sep">/</span></li>
    
  
   
    
        
        <li><a href="https://www.earthdatascience.org/courses/intro-to-earth-analytics/">Intro to earth analytics </a>
        <meta itemprop="position" content="3" />
        <span class="sep">/</span></li>
    
  
   
    
        
        <li><a href="https://www.earthdatascience.org/courses/intro-to-earth-analytics/spatial-data-vector-shapefiles/">Spatial data vector shapefiles </a>
        <meta itemprop="position" content="4" />
        <span class="sep">/</span></li>
    
  
   
    
        <li class="current">Customize your Maps in Python using Matplotlib: GIS in Python</li>
    
  
</ol>
</nav>

<!-- from min mistakes -->




  


<div id="main" role="main">
  



  <div class="sidebar sticky">
  
  
    
      
      
      
    
    


    

    
     <!--  Might be able to delete this This is the code that populates the side bar navigation if there is a class-->
      







<!-- make sure we're only grabbing pages for the course -->



<!--<h3>Week 4 Lessons</h3>-->
<!-- i don't think the code below is used as modules is defined lower down as well. -->

<!-- This is how modules are sorted on the left hand side bar -->






<h5><a href="https://www.earthdatascience.org/courses/earth-analytics-python/" ><i class="fa fa-home" aria-hidden="true"></i> Earth analytics python</a></h5>

<!-- Just get the pages from this course -->






<nav class="nav__list">







<ul>
  <li><span class="nav__sub-title"><i class="fa fa-book" aria-hidden="true"></i> Units</span>
   <ul>

       

        

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 1 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/python-open-science-toolbox/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 EARTH ANALYTICS PYTHON COURSE - WEEK ONE</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                                <li>
                                    <a href="https://www.earthdatascience.org/courses/earth-analytics-python/python-open-science-toolbox/use-data-for-science/"> 1.1   Use Data For Science </a>
                                </li>
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 2 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/lidar-raster-data/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 LIDAR RASTER DATA IN PYTHON</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 3 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/spatial-data-vector-shapefiles/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 INTRODUCTION TO SHAPEFILES AND VECTOR DATA IN OPEN SOURCE PYTHON - SPATIAL DATA</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            

            <!-- This is for the activate section in the nav which is grey -->

            
                
                    <li class='active-section'> <a href="https://www.earthdatascience.org/courses/earth-analytics-python/lidar-remote-sensing-uncertainty/"><i class="fa fa-folder-open" aria-hidden="true"></i>
                     4. LIDAR REMOTE SENSING UNCERTAINTY - COMPARE GROUND TO LIDAR MEASUREMENTS OF TREE HEIGHT IN PYTHON</a></li>

            

<div class='active-menu'>
      <ul>
        
        <!-- Note that class-order allows you to sort modules by class order if there are more than 1 in a class -->
        

        

        

         <li>Week 4 readings and homework for the earth-analytics-python course. </li> 
      </ul>

      <!-- BEGIN Learn how to lessons -->
       <ul>
         
         

         
         
             <li><span class="nav__sub-title grey"><i class="fa fa-caret-down" aria-hidden="true"></i> Spatial data: custom plots in python </span></li>
             
             
         
         <ul>

         

       <!-- count lessons -->

         

         
         

         
         


           
           <li><a href= https://www.earthdatascience.org/courses/intro-to-earth-analytics/spatial-data-vector-shapefiles/python-customize-map-legends-geopandas/ class='active'><!--4.1.1--> - Customize Python Maps</a></li>
           
           
         

         
         


           
           <li><a href= https://www.earthdatascience.org/courses/earth-analytics-python/spatial-data-vector-shapefiles/python-change-spatial-extent-of-map-matplotlib-geopandas/><!--4.1.2 --> - Adjust Map Extent</a></li>
           
           
         
        </ul>
         
       </ul>


     </div>


      <!-- END BEGIN Learn how to lessons -->

      <!--  -->
      

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 5 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/what-the-fork-who-did-this/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 WHAT THE FORK? TEST YOUR CODE TROUBLESHOOTING SKILLS IN PYTHON</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 6 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/multispectral-remote-sensing-in-python/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 MULTISPECTRAL IMAGERY PYTHON - NAIP, LANDSAT, FIRE & REMOTE SENSING</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 7 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/create-efficient-data-workflows/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 LEARN TO CREATE EFFICIENT DATA WORKFLOWS IN PYTHON</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 8 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/create-efficient-data-workflows-2/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 LEARN TO CREATE EFFICIENT DATA WORKFLOWS IN PYTHON</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 9 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/multispectral-remote-sensing-modis/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 QUANTIFY THE IMPACTS OF A FIRE USING MODIS AND LANDSAT REMOTE SENSING DATA IN PYTHON</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 10 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/hdf4-remote-sensing-modis/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 WORK WITH MODIS HDF4 DATA IN OPEN SOURCE PYTHON</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 11 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/using-apis-natural-language-processing-twitter/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 PROGRAMMATIC DATA ACCESS</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 12 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/communicate-your-science/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 MIDTERM REVIEW - SCIENCE COMMUNICATION</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 13 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/contribute-to-open-source/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 YOU CAN CONTRIBUTE TO OPEN SOURCE SOFTWARE! HOW TO GET STARTED IN PYTHON</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                                <li>
                                    <a href="https://www.earthdatascience.org/courses/earth-analytics-python/contribute-to-open-source/intro-to-open-source-software-python/"> 13.1   Contribute To Open Source </a>
                                </li>
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    

            <!-- Only list the week if it's not the week for the current landing page -->
            
                <li> <b>SECTION 14 <a href="https://www.earthdatascience.org/courses/earth-analytics-python/use-time-series-data-in-python/"> <!--<i class="fa fa-folder-o" aria-hidden="true"></i>-->
                 TIME SERIES DATA IN PYTHON</a></b>
                </li>

                    <!-- list the chapters for each section  updating this to show a chapter number if it's a textbook-->
                    
                     <ul>
                        
                            
                        
                            
                        
                            
                        
                    </ul>


            

            <!-- This is for the activate section in the nav which is grey -->

            

    
  </ul></li>
 </ul>


 <ul>
   <li><span class="nav__sub-title"><i class="fa fa-folder-open" aria-hidden="true"></i> Overview</span>
    <ul>
     
          
         <li> <a href="https://www.earthdatascience.org/courses/earth-analytics-python/">
           Earth Analytics Home </a></li>
         

     
          
         <li> <a href="https://www.earthdatascience.org/courses/earth-analytics-python/earth-analytics-syllabus/">
           Course Syllabus </a></li>
         

     
   </ul>
 </li>
</ul>
</nav>

<h5><a href="https://www.earthdatascience.org/courses/earth-analytics-python/" ><i class="fa fa-home" aria-hidden="true"></i> earth-analytics-python Home</a></h5>

    

    

  
  </div>






<!-- begin science / science themes side bar nav -->



  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">

    <meta itemprop="headline" content="Customize your Maps in Python using Matplotlib: GIS in Python">
    <meta itemprop="description" content="In this lesson you will review how to customize matplotlib maps created using vector data in Python. You will review how to add legends, titles and how to customize map colors.">
    <meta itemprop="datePublished" content="September 11, 2019">
    <meta itemprop="dateModified" content="January 21, 2022">

    <div class="page__inner-wrap">
        <header>
          

          <!-- BEGIN: insert a welcome to the module block on pages that are part of a module set -->

          <!-- END: insert welcome block -->

          
              

            
                <h1 class="page__title" itemprop="headline">
                Lesson 1. 
                 Customize your Maps in Python using Matplotlib: GIS in Python

                
                </h1>
            

          

          
            <div class="page__meta">
              
              
              <a href="https://www.earthdatascience.org/authors/chris-holdgraf">Chris Holdgraf</a>, 
              
              
              <a href="https://www.earthdatascience.org/authors/leah-wasser">Leah Wasser</a>
              
            </div>
          

            <br/>

            
            <div class="notice--warning header" markdown="1">
            
              
                  <h1> <i class="fa fa-6 fa-book" aria-hidden="true"></i> Custom Plots in Python - Earth analytics python course module</h1>
                  Welcome to the first lesson in the <strong>Custom Plots in Python</strong> module.
                  This tutorial covers the basics of creating custom plot legends in Python
               
            
            </div>
            

              
            

            <!-- For tools pages add authors and tool title -->

            
        </header>



      <section class="page__content" itemprop="text">

        <!-- would like to include the TOC automatically but this does weird things-->
        
          
            <aside class="sidebar__right">
<nav class="toc">
    <header><h4 class="nav__title"><i class="fa fa-file-text"></i> In This Lesson</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#learning-objectives" id="markdown-toc-learning-objectives"><i class="fa fa-graduation-cap" aria-hidden="true"></i> Learning Objectives</a></li>
  <li><a href="#what-you-need" id="markdown-toc-what-you-need"><i class="fa fa-check-square-o fa-2" aria-hidden="true"></i> What You Need</a></li>
  <li><a href="#create-custom-maps-with-python" id="markdown-toc-create-custom-maps-with-python">Create Custom Maps with Python</a></li>
  <li><a href="#replace-missing-data-values" id="markdown-toc-replace-missing-data-values">Replace Missing Data Values</a></li>
  <li><a href="#plot-by-attribute" id="markdown-toc-plot-by-attribute">Plot by Attribute</a></li>
  <li><a href="#optional-challenge-plot-line-width-by-attribute" id="markdown-toc-optional-challenge-plot-line-width-by-attribute"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Optional Challenge: Plot Line Width by Attribute</a></li>
  <li><a href="#customize-plot-legend" id="markdown-toc-customize-plot-legend">Customize Plot Legend</a></li>
  <li><a href="#plot-lines-by-attribute" id="markdown-toc-plot-lines-by-attribute">Plot Lines by Attribute</a></li>
  <li><a href="#add-a-point-shapefile-to-your-map" id="markdown-toc-add-a-point-shapefile-to-your-map">Add a Point Shapefile to your Map</a></li>
  <li><a href="#clip-intersect-the-data" id="markdown-toc-clip-intersect-the-data">Clip (Intersect) the Data</a></li>
  <li><a href="#optional---create-custom-legend-labels" id="markdown-toc-optional---create-custom-legend-labels">OPTIONAL - Create Custom Legend Labels</a></li>
  <li><a href="#set-plot-attributes-globally" id="markdown-toc-set-plot-attributes-globally">Set Plot Attributes Globally</a></li>
</ul>

  </nav>
</aside>

<div class="notice--success">

  <h2 id="learning-objectives"><i class="fa fa-graduation-cap" aria-hidden="true"></i> Learning Objectives</h2>

  <p>After completing this tutorial, you will be able to:</p>

  <ul>
    <li>Create a map containing multiple vector datasets, colored by unique attributes in <code class="language-plaintext highlighter-rouge">Python</code>.</li>
    <li>Add a custom legend to a map in <code class="language-plaintext highlighter-rouge">Python</code> with subheadings, unique colors.</li>
  </ul>

  <h2 id="what-you-need"><i class="fa fa-check-square-o fa-2" aria-hidden="true"></i> What You Need</h2>

  <p>You will need a computer with internet access to complete this lesson and the data for week 5 of the course.</p>

  <p><a href="https://ndownloader.figshare.com/files/12459464" data-proofer-ignore="" class="btn btn--success btn--x-large"><i class="fa fa-download" aria-hidden="true"></i> Download Spatial Lidar Teaching Data Subset data</a></p>

  <p>or using the <code class="language-plaintext highlighter-rouge">earthpy</code> package: <code class="language-plaintext highlighter-rouge">et.data.get_data("spatial-vector-lidar")</code></p>

</div>

<h2 id="create-custom-maps-with-python">Create Custom Maps with Python</h2>

<p>In this lesson you will learn how to customize map symbology or the colors and symbols used to represent vector data, in Python. There are many different ways to create maps in <code class="language-plaintext highlighter-rouge">Python</code>. In this lesson, you will use the <code class="language-plaintext highlighter-rouge">geopandas</code>  and <code class="language-plaintext highlighter-rouge">matplotlib</code>.</p>

<p>To begin, import all of the required libraries.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import libraries
</span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="n">gpd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">box</span>
<span class="kn">import</span> <span class="nn">earthpy</span> <span class="k">as</span> <span class="n">et</span>

<span class="n">os</span><span class="p">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">et</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">HOME</span><span class="p">,</span> <span class="s">'earth-analytics'</span><span class="p">,</span> <span class="s">'data'</span><span class="p">))</span>

<span class="c1"># Get the data
</span><span class="n">data</span> <span class="o">=</span> <span class="n">et</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">get_data</span><span class="p">(</span><span class="s">'spatial-vector-lidar'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="import-data">Import Data</h3>

<p>Next, import and explore your spatial data. In this case you are importing the same roads layer that you used in earlier lessons which is stored in shapefile (<code class="language-plaintext highlighter-rouge">.shp</code>) format.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import roads shapefile
</span><span class="n">sjer_roads</span> <span class="o">=</span> <span class="n">gpd</span><span class="p">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s">"spatial-vector-lidar"</span><span class="p">,</span> 
                                        <span class="s">"california"</span><span class="p">,</span> 
                                        <span class="s">"madera-county-roads"</span><span class="p">,</span> 
                                        <span class="s">"tl_2013_06039_roads.shp"</span><span class="p">))</span>
<span class="c1"># View data type
</span><span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">[</span><span class="s">'RTTYP'</span><span class="p">]))</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.series.Series'&gt;
</code></pre></div></div>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># View unique attributes for each road in the data
</span><span class="k">print</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">[</span><span class="s">'RTTYP'</span><span class="p">].</span><span class="n">unique</span><span class="p">())</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['M' None 'S' 'C']
</code></pre></div></div>

<h2 id="replace-missing-data-values">Replace Missing Data Values</h2>

<p>It looks like you have some missing values in your road types. You want to plot all
road types even those that are set to <code class="language-plaintext highlighter-rouge">None</code> - which is python’s default missing data value. Change the roads with an <code class="language-plaintext highlighter-rouge">RTTYP</code> attribute of <code class="language-plaintext highlighter-rouge">None</code> to “unknown”.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Map each value to a new value
</span><span class="n">sjer_roads</span><span class="p">[</span><span class="s">'RTTYP'</span><span class="p">].</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">nan</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">sjer_roads</span><span class="p">[</span><span class="s">'RTTYP'</span><span class="p">].</span><span class="n">unique</span><span class="p">())</span>
</code></pre></div></div>

<div class="language-plaintext output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['M' 'Unknown' 'S' 'C']
</code></pre></div></div>

<p class="notice--success"><i class="fa fa-star"></i> <strong>Data Tip:</strong> There are many different ways to deal with missing data in Python. Another way to replace all values of None is to use the <code class="language-plaintext highlighter-rouge">.isnull()</code> function like this:
<code class="language-plaintext highlighter-rouge">sjer_roads.loc[sjer_roads['RTTYP'].isnull(), 'RTTYP'] = 'Unknown' </code></p>

<p>If you plot your data using the standard geopandas <code class="language-plaintext highlighter-rouge">.plot()</code>, geopandas will select colors for your lines. You can add a legend using the <code class="language-plaintext highlighter-rouge">legend=True</code> argument however notice that the legend is composed of circles representing each line type rather than a line. You also don’t have full control over what color is applied to which line, line width and other symbology attributes.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sjer_roads</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s">'RTTYP'</span><span class="p">,</span>
                <span class="n">categorical</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="c1"># adjust legend location
</span><span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">get_legend</span><span class="p">()</span>
<span class="n">leg</span><span class="p">.</span><span class="n">set_bbox_to_anchor</span><span class="p">((</span><span class="mf">1.15</span><span class="p">,</span><span class="mf">0.5</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_axis_off</span><span class="p">()</span>

<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_9_0.png" alt="Geopandas plot of roads colored according to an attribute." />
<figcaption>Geopandas plot of roads colored according to an attribute.</figcaption>

</figure>

<h2 id="plot-by-attribute">Plot by Attribute</h2>

<p>To plot a vector layer by attribute value so each road layer is colored 
according to it’s respective attribute value, and so the legend also represents that same symbology you need to do three things.</p>

<ol>
  <li>You need to create a dictionary that associates a particular color with a particular attribute value</li>
  <li>You then need to loop through and apply that color to each attribute value</li>
  <li>Finally you need to add a <code class="language-plaintext highlighter-rouge">label</code> argument to your plot so you can call <code class="language-plaintext highlighter-rouge">ax.legend()</code> to make your final legend.</li>
</ol>

<p>To begin, create a dictionary that defines what color you want each road type to be plotting using.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create a dictionary where you assign each attribute value to a particular color
</span><span class="n">roadPalette</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="s">'blue'</span><span class="p">,</span>
               <span class="s">'S'</span><span class="p">:</span> <span class="s">'green'</span><span class="p">,</span>
               <span class="s">'C'</span><span class="p">:</span> <span class="s">'purple'</span><span class="p">,</span>
               <span class="s">'Unknown'</span><span class="p">:</span> <span class="s">'grey'</span><span class="p">}</span>
<span class="n">roadPalette</span>
</code></pre></div></div>

<div class="language-plaintext output execute_result highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'M': 'blue', 'S': 'green', 'C': 'purple', 'Unknown': 'grey'}
</code></pre></div></div>

<p>Next, you loop through each attribute value and plot the lines with that attribute value using the color specified in the dictionary. To ensure your legend generates properly, you add a <code class="language-plaintext highlighter-rouge">label=</code> argument to your plot call. The label value will be the attribute value that you used to plot. Below that value is defined by the <code class="language-plaintext highlighter-rouge">ctype</code> variable.</p>

<p>Then you can call <code class="language-plaintext highlighter-rouge">ax.legend()</code> to create a legend.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Plot data
</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Loop through each attribute type and plot it using the colors assigned in the dictionary
</span><span class="k">for</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_roads</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'RTTYP'</span><span class="p">):</span>
    <span class="c1"># Define the color for each group using the dictionary
</span>    <span class="n">color</span> <span class="o">=</span> <span class="n">roadPalette</span><span class="p">[</span><span class="n">ctype</span><span class="p">]</span>
    <span class="c1"># Plot each group using the color defined above
</span>    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">label</span><span class="o">=</span><span class="n">ctype</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="p">.</span><span class="mi">5</span><span class="p">),</span> <span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span> <span class="mi">12</span><span class="p">})</span>
<span class="n">ax</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Madera County Roads'</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_13_0.png" alt="One way to customize plots is to create a dictionary that contains the symbology or colors and symbols that you wish to use for each attribute type in the map and legend." />
<figcaption>One way to customize plots is to create a dictionary that contains the symbology or colors and symbols that you wish to use for each attribute type in the map and legend.</figcaption>

</figure>

<h3 id="adjust-line-width">Adjust Line Width</h3>

<p>You can adjust the width of your plot lines using the <code class="language-plaintext highlighter-rouge">linewidth=</code> attribute. If you set the <code class="language-plaintext highlighter-rouge">linewidth</code> to 4, you can create a truly ugly plot. In this example every line is <code class="language-plaintext highlighter-rouge">width=4</code>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Loop through each group (unique attribute value) in the roads layer and assign it a color
</span><span class="k">for</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_roads</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'RTTYP'</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">roadPalette</span><span class="p">[</span><span class="n">ctype</span><span class="p">]</span>
    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">label</span><span class="o">=</span><span class="n">ctype</span><span class="p">,</span>
              <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Make all lines thicker
</span>
<span class="c1"># Add title and legend to plot
</span><span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Madera County Roads'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_15_0.png" alt="Here the line width is adjusted on the roads layer." />
<figcaption>Here the line width is adjusted on the roads layer.</figcaption>

</figure>

<h3 id="adjust-line-width-by-attribute">Adjust Line Width by Attribute</h3>

<p>Similar to how you adjust colors, you can create a dictionary to adjust line widths. Then you can call <code class="language-plaintext highlighter-rouge">dictionaryName[ctype]</code>
where dictionaryName is a dictionary of what line width you want to assign to each attribute
value and ctype is the attribute value.</p>

<p><code class="language-plaintext highlighter-rouge">lineWidths = {'M': 1, 'S': 1, 'C': 4, 'Unknown': .5}</code></p>

<p>Here you are assigning the linewidth of each respective attibute value a line width as follows:</p>

<ul>
  <li>M: 1</li>
  <li>S: 1</li>
  <li>C: 4</li>
  <li>Unknown = 4</li>
</ul>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create dictionary to map each attribute value to a line width
</span><span class="n">lineWidths</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'C'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">}</span>

<span class="c1"># Plot data adjusting the linewidth attribute
</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="k">for</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_roads</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'RTTYP'</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">roadPalette</span><span class="p">[</span><span class="n">ctype</span><span class="p">]</span>
    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">label</span><span class="o">=</span><span class="n">ctype</span><span class="p">,</span>
              <span class="c1"># Assign each group to a line width using the dictionary created above
</span>              <span class="n">linewidth</span><span class="o">=</span><span class="n">lineWidths</span><span class="p">[</span><span class="n">ctype</span><span class="p">])</span>
<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Madera County </span><span class="se">\n</span><span class="s"> Line width varies by TYPE Attribute Value'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_17_0.png" alt="You can refine plot symbology to make nicer looking plots." />
<figcaption>You can refine plot symbology to make nicer looking plots.</figcaption>

</figure>

<div class="notice--warning">

  <h2 id="optional-challenge-plot-line-width-by-attribute"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Optional Challenge: Plot Line Width by Attribute</h2>

  <p>You can customize the width of each line, according to specific attribute value, too. To do this, you create a vector of line width values, and map that vector to the factor levels - using the same syntax that you used above for colors.</p>

  <p>HINT: <code class="language-plaintext highlighter-rouge">lwd=(vector of line width thicknesses)[spatialObject$factorAttribute]</code></p>

  <p>Create a plot of roads using the following line thicknesses:</p>
  <ol>
    <li>
      <p><strong>unknown</strong> lwd = 3</p>
    </li>
    <li>
      <p><strong>M</strong> lwd = 1</p>
    </li>
    <li>
      <p><strong>S</strong> lwd = 2</p>
    </li>
    <li>
      <p><strong>C</strong> lwd = 1.5</p>
    </li>
  </ol>

</div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_19_0.png" alt="Geopandas plot of roads colored according to an attribute." />
<figcaption>Geopandas plot of roads colored according to an attribute.</figcaption>

</figure>

<h2 id="customize-plot-legend">Customize Plot Legend</h2>

<p>Above you created a legend using the <code class="language-plaintext highlighter-rouge">label=</code> argument and <code class="language-plaintext highlighter-rouge">ax.legend()</code>. You may want to move your legend around to make a cleaner map. You can use the <code class="language-plaintext highlighter-rouge">loc=</code> argument in the call to <code class="language-plaintext highlighter-rouge">ax.legend()</code> to adjust your legend location. This location can be numeric or descriptive.</p>

<p>Below you specify the <code class="language-plaintext highlighter-rouge">loc=</code> to be in the <strong>lower right</strong> hand part of the plot.</p>

<p><code class="language-plaintext highlighter-rouge">ax.legend(loc='lower right')</code></p>

<p>When you add a legend, you use the following elements to customize legend labels and colors:</p>

<ul>
  <li><strong>loc=(how-far-right, how-far-above-0)</strong>: specify an x and Y location of the plot Or generally specify the location e.g. ‘bottom right’, ‘top’, ‘top right’, etc. If you use numeric values the first value is the position to the RIGHT of the plot and the second is the vertical position (how far above 0). Otherwise you can provide text for example “lower right” or “upper left”.</li>
  <li><strong>fontsize:</strong> the size of the fonts used in the legend</li>
  <li><strong>frameon:</strong> Boolean Values: True of False - if you want a box around your legend use <code class="language-plaintext highlighter-rouge">True</code></li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">bbox_to_anchor=(1, 1)</code> argument is also often helpful to customization the location further. Read more about that argument <a href="https://matplotlib.org/users/legend_guide.html" target="_blank">here in the matplotlib documentation</a>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lineWidths</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'C'</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Loop through each attribute value and assign each 
# with the correct color &amp; width specified in the dictionary
</span><span class="k">for</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_roads</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'RTTYP'</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">roadPalette</span><span class="p">[</span><span class="n">ctype</span><span class="p">]</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">ctype</span>
    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">linewidth</span><span class="o">=</span><span class="n">lineWidths</span><span class="p">[</span><span class="n">ctype</span><span class="p">],</span>
              <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>


<span class="n">ax</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Madera County </span><span class="se">\n</span><span class="s"> Line width varies by TYPE Attribute Value'</span><span class="p">)</span>

<span class="c1"># Place legend in the lower right hand corner of the plot
</span><span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">'lower right'</span><span class="p">,</span>
          <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
          <span class="n">frameon</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_21_0.png" alt="If you set the label argument in your plot, that will be added to your legend when you call ax.legend()." />
<figcaption>If you set the label argument in your plot, that will be added to your legend when you call ax.legend().</figcaption>

</figure>

<p>See what happens when you set the frameon attribute of your legend to <code class="language-plaintext highlighter-rouge">False</code> and adjust the line widths - does your legend change? Also notice below the <code class="language-plaintext highlighter-rouge">loc=()</code> argument is given a tuple - two  numbers that define the x and y location of the legend relative to the plot figure region.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">lineWidths</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'C'</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="k">for</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_roads</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'RTTYP'</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">roadPalette</span><span class="p">[</span><span class="n">ctype</span><span class="p">]</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">ctype</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">'unknown'</span>
    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">linewidth</span><span class="o">=</span><span class="n">lineWidths</span><span class="p">[</span><span class="n">ctype</span><span class="p">],</span>
              <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

<span class="n">ax</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Madera County </span><span class="se">\n</span><span class="s"> Line width varies by TYPE Attribute Value'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">.</span><span class="mi">5</span><span class="p">),</span>
          <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
          <span class="n">frameon</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
          <span class="n">title</span><span class="o">=</span><span class="s">"LEGEND"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_23_0.png" alt="Geopandas plot of roads colored according to an attribute." />
<figcaption>Geopandas plot of roads colored according to an attribute.</figcaption>

</figure>

<p>Adjust the plot colors.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">roadPalette</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="s">'springgreen'</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="s">"blue"</span><span class="p">,</span>
               <span class="s">'C'</span><span class="p">:</span> <span class="s">"magenta"</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="s">"grey"</span><span class="p">}</span>
<span class="n">lineWidths</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'C'</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="k">for</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_roads</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'RTTYP'</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">roadPalette</span><span class="p">[</span><span class="n">ctype</span><span class="p">]</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">ctype</span>
    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">linewidth</span><span class="o">=</span><span class="n">lineWidths</span><span class="p">[</span><span class="n">ctype</span><span class="p">],</span>
              <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Madera County Roads </span><span class="se">\n</span><span class="s"> Pretty Colors'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">'lower right'</span><span class="p">,</span>
          <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
          <span class="n">frameon</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_25_0.png" alt="Geopandas plot of roads colored according to an attribute." />
<figcaption>Geopandas plot of roads colored according to an attribute.</figcaption>

</figure>

<h2 id="plot-lines-by-attribute">Plot Lines by Attribute</h2>

<p>Play with colors one more time. Create a plot that emphasizes only roads designated as C or S (County or State). To emphasize these types of roads, make the lines that are assigned the RTTYP attribute of C or S, THICKER than the other lines.</p>

<p>Be sure to add a title and legend to your map! You might consider a color palette that has all County and State roads displayed in a bright color. All other lines can be grey.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Define colors and line widths
</span><span class="n">roadPalette</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="s">'grey'</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="s">"blue"</span><span class="p">,</span>
               <span class="s">'C'</span><span class="p">:</span> <span class="s">"magenta"</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="s">"lightgrey"</span><span class="p">}</span>
<span class="n">lineWidths</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'C'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">}</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="k">for</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_roads</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'RTTYP'</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">roadPalette</span><span class="p">[</span><span class="n">ctype</span><span class="p">]</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">ctype</span>
    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">linewidth</span><span class="o">=</span><span class="n">lineWidths</span><span class="p">[</span><span class="n">ctype</span><span class="p">],</span>
              <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Madera County Roads</span><span class="se">\n</span><span class="s"> County and State recognized roads'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">'lower right'</span><span class="p">,</span>
          <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
          <span class="n">frameon</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_27_0.png" alt="Geopandas plot of roads colored according to an attribute." />
<figcaption>Geopandas plot of roads colored according to an attribute.</figcaption>

</figure>

<!-- C = County
I = Interstate
M = Common Name
O = Other
S = State recognized
U = U.S.-->

<h2 id="add-a-point-shapefile-to-your-map">Add a Point Shapefile to your Map</h2>

<p>Next, add another layer to your map to see how you can create a more complex map with a legend that represents both layers. You will add the same SJER_plot_centroids shapefile that you worked with in previous lessons to your map.</p>

<p>If you recall, this layer contains 3 plot_types: grass, soil and trees.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import points layer
</span><span class="n">sjer_plots</span> <span class="o">=</span> <span class="n">gpd</span><span class="p">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s">"spatial-vector-lidar"</span><span class="p">,</span>
                                        <span class="s">"california"</span><span class="p">,</span>
                                        <span class="s">"neon-sjer-site"</span><span class="p">,</span>
                                        <span class="s">"vector_data"</span><span class="p">,</span>
                                        <span class="s">"SJER_plot_centroids.shp"</span><span class="p">))</span>
<span class="c1"># View first 5 rows
</span><span class="n">sjer_plots</span><span class="p">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>

<div class="output execute_result">
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Plot_ID</th>
      <th>Point</th>
      <th>northing</th>
      <th>easting</th>
      <th>plot_type</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>SJER1068</td>
      <td>center</td>
      <td>4111567.818</td>
      <td>255852.376</td>
      <td>trees</td>
      <td>POINT (255852.376 4111567.818)</td>
    </tr>
    <tr>
      <th>1</th>
      <td>SJER112</td>
      <td>center</td>
      <td>4111298.971</td>
      <td>257406.967</td>
      <td>trees</td>
      <td>POINT (257406.967 4111298.971)</td>
    </tr>
    <tr>
      <th>2</th>
      <td>SJER116</td>
      <td>center</td>
      <td>4110819.876</td>
      <td>256838.760</td>
      <td>grass</td>
      <td>POINT (256838.760 4110819.876)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>SJER117</td>
      <td>center</td>
      <td>4108752.026</td>
      <td>256176.947</td>
      <td>trees</td>
      <td>POINT (256176.947 4108752.026)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>SJER120</td>
      <td>center</td>
      <td>4110476.079</td>
      <td>255968.372</td>
      <td>grass</td>
      <td>POINT (255968.372 4110476.079)</td>
    </tr>
  </tbody>
</table>
</div>

<p>Just like you did above, create a dictionary that specifies the colors associated with each plot type. 
Then you can plot your data just like you did with the lines</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pointsPalette</span> <span class="o">=</span> <span class="p">{</span><span class="s">'trees'</span><span class="p">:</span> <span class="s">'chartreuse'</span><span class="p">,</span>
                 <span class="s">'grass'</span><span class="p">:</span> <span class="s">'darkgreen'</span><span class="p">,</span> <span class="s">'soil'</span><span class="p">:</span> <span class="s">'burlywood'</span><span class="p">}</span>
<span class="n">lineWidths</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'C'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">}</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="k">for</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_plots</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'plot_type'</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">pointsPalette</span><span class="p">[</span><span class="n">ctype</span><span class="p">]</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">ctype</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctype</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">'unknown'</span>
    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
              <span class="n">markersize</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">'Study area plot locations</span><span class="se">\n</span><span class="s"> by plot type (grass, soil and trees)'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
          <span class="n">frameon</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
          <span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">.</span><span class="mi">1</span><span class="p">),</span>
          <span class="n">title</span><span class="o">=</span><span class="s">"LEGEND"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_31_0.png" alt="A similar approach can be taken to customize points on a plot." />
<figcaption>A similar approach can be taken to customize points on a plot.</figcaption>

</figure>

<h3 id="overlay-points-on-top-of-roads">Overlay points on top of roads</h3>

<p>Next, plot the plot data on top of the roads layer. Then create a custom legend that contains both lines and points.</p>

<p>NOTE: In this example the projection for the roads layer is already changed and the layer has been cropped! You will have to do the same before this code will work.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sjer_aoi</span> <span class="o">=</span> <span class="n">gpd</span><span class="p">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s">"spatial-vector-lidar"</span><span class="p">,</span>
                                      <span class="s">"california"</span><span class="p">,</span>
                                      <span class="s">"neon-sjer-site"</span><span class="p">,</span>
                                      <span class="s">"vector_data"</span><span class="p">,</span>
                                      <span class="s">"SJER_crop.shp"</span><span class="p">))</span>

<span class="c1"># Reproject the data
</span><span class="n">sjer_roads_utm</span> <span class="o">=</span> <span class="n">sjer_roads</span><span class="p">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">crs</span><span class="o">=</span><span class="n">sjer_aoi</span><span class="p">.</span><span class="n">crs</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="clip-intersect-the-data">Clip (Intersect) the Data</h2>

<p>Next, clip the roads layer to the boundary of the sjer_aoi layer. This will remove all roads and road segments that are outside of your square AOI layer.</p>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_35_0.png" />

</figure>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sjer_roads_utm_cl</span> <span class="o">=</span> <span class="n">sjer_roads_utm</span>
</code></pre></div></div>

<div class="notice--info">

  <h2 id="optional---create-custom-legend-labels">OPTIONAL - Create Custom Legend Labels</h2>

  <p>You do not need to do this for your homework but below you can see how you’d add custom labels to your legend. You need to do the following</p>

  <ol>
    <li>You need to loop through each “Group” that you wish to plot to create an collection object (discussed below)</li>
    <li>Then you need to create the legend using those collections.</li>
  </ol>

  <p>To begin to customize legends using matplotlib you need to work with collections. Matplotlib stores groups of points, lines or polygons as a collection. In the example above each road type is stored as a collection of type <code class="language-plaintext highlighter-rouge">path</code> for line. If you call collections AFTER the call to plot in matplotlib, you can see how many collections were created.</p>

  <p>Notice below there are 3 collections - one for each road type.</p>

</div>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># View list of collections created for the plot above.
</span><span class="n">ax</span><span class="p">.</span><span class="n">collections</span>
</code></pre></div></div>

<div class="language-plaintext output execute_result highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[&lt;matplotlib.collections.PathCollection at 0x7f36762a4700&gt;,
 &lt;matplotlib.collections.PathCollection at 0x7f358c4936d0&gt;,
 &lt;matplotlib.collections.PathCollection at 0x7f36761cf370&gt;]
</code></pre></div></div>

<p>You can subset a collection using standard list subsetting.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get the first 2 (out of 3) collection objects
</span><span class="n">lines</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">collections</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">lines</span>
</code></pre></div></div>

<div class="language-plaintext output execute_result highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[&lt;matplotlib.collections.PathCollection at 0x7f36762a4700&gt;,
 &lt;matplotlib.collections.PathCollection at 0x7f358c4936d0&gt;]
</code></pre></div></div>

<p>When working with collections pay close attention to the collection type:</p>

<p><code class="language-plaintext highlighter-rouge">PathCollection</code> represents a point
<code class="language-plaintext highlighter-rouge">LineCollection</code> represents a line</p>

<p>By plotting the data within a for loop, you can customize the line width, color and any other attribute that you wish. You can then use those attributes to create a custom legend. Below you create a loop that cycles through each group (each road type) and applies dictionary values for color and line width. Notice you also define the label in each cycle to be the group name (road type in this example).</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create line dictionary to specify colors and line widths
</span><span class="n">roadPalette</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="s">'green'</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="s">"blue"</span><span class="p">,</span>
               <span class="s">'C'</span><span class="p">:</span> <span class="s">"magenta"</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="s">"lightgrey"</span><span class="p">}</span>
<span class="n">lineWidths</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'C'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">}</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="k">for</span> <span class="n">rtype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_roads_utm_cl</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'RTTYP'</span><span class="p">):</span>
    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">roadPalette</span><span class="p">[</span><span class="n">rtype</span><span class="p">],</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">linewidth</span><span class="o">=</span><span class="n">lineWidths</span><span class="p">[</span><span class="n">rtype</span><span class="p">],</span>
              <span class="n">label</span><span class="o">=</span><span class="n">rtype</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">"Map of Roads for SJER Field Site"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"Roads Type"</span><span class="p">,</span>
          <span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">1.1</span><span class="p">,</span> <span class="p">.</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_43_0.png" alt="Custom legends in matplotlib using collections" />
<figcaption>Custom legends in matplotlib using collections</figcaption>

</figure>

<p>Once you have created your plot loop, you can then loop through each collection, and grab the label. Matplotlib also has the color and attributes of that collection stored so it can create the legend symbology using that label.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create line dictionary to specify colors and line widths
</span><span class="n">roadPalette</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="s">'green'</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="s">"blue"</span><span class="p">,</span>
               <span class="s">'C'</span><span class="p">:</span> <span class="s">"magenta"</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="s">"lightgrey"</span><span class="p">}</span>
<span class="n">lineWidths</span> <span class="o">=</span> <span class="p">{</span><span class="s">'M'</span><span class="p">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'C'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">:</span> <span class="p">.</span><span class="mi">5</span><span class="p">}</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Plot roads using a for loop to allow for a custom legend
</span><span class="k">for</span> <span class="n">rtype</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">sjer_roads_utm_cl</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'RTTYP'</span><span class="p">):</span>
    <span class="n">data</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">roadPalette</span><span class="p">[</span><span class="n">rtype</span><span class="p">],</span>
              <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
              <span class="n">linewidth</span><span class="o">=</span><span class="n">lineWidths</span><span class="p">[</span><span class="n">rtype</span><span class="p">],</span>
              <span class="n">label</span><span class="o">=</span><span class="n">rtype</span><span class="p">)</span>

<span class="c1"># Get all three collections - one for each line type
</span><span class="n">lines</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">collections</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>

<span class="n">leg1</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="p">[</span><span class="n">line</span><span class="p">.</span><span class="n">get_label</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">],</span>
                 <span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">1.1</span><span class="p">,</span> <span class="p">.</span><span class="mi">1</span><span class="p">),</span>
                 <span class="n">frameon</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">title</span><span class="o">=</span><span class="s">'Roads'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">leg1</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_45_0.png" alt="Once you have setup a loop, you can access the collections and define the legend using the collection attributes." />
<figcaption>Once you have setup a loop, you can access the collections and define the legend using the collection attributes.</figcaption>

</figure>

<p>When you create a legend in <code class="language-plaintext highlighter-rouge">Python</code>, you will add each feature element to it by defining the label element within your for loop as follows:</p>

<p><code class="language-plaintext highlighter-rouge">label = c_label</code></p>

<p>And then specifying it in the <code class="language-plaintext highlighter-rouge">data.plot()</code> function.</p>

<p>The code looks like this:</p>

<p><code class="language-plaintext highlighter-rouge">for ctype, data in sjer_plots.groupby('plot_type'):
    color = pointsPalette[ctype]
    label = ctype
    data.plot(color=color, ax=ax, label=label)</code></p>

<p>Next, add subheadings to your legend. Here, you will add a “Plots” and a “Roads” subheading to make the legend easier to read. To do this you will create 2 legend elements, each with a specific title that will create the subheading.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1"># Set up legend
</span><span class="n">points</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">collections</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">lines</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">collections</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
<span class="n">leg1</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="p">[</span><span class="n">point</span><span class="p">.</span><span class="n">get_label</span><span class="p">()</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">],</span> 
       <span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">1.1</span><span class="p">,</span> <span class="p">.</span><span class="mi">1</span><span class="p">),</span> 
       <span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s">'family'</span><span class="p">:</span> <span class="s">'serif'</span><span class="p">},</span>
       <span class="n">frameon</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
       <span class="n">title</span><span class="o">=</span><span class="s">'Roads'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">leg1</span><span class="p">)</span>

<span class="n">leg2</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="p">[</span><span class="n">line</span><span class="p">.</span><span class="n">get_label</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">],</span> 
                 <span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">1.1</span><span class="p">,</span> <span class="p">.</span><span class="mi">3</span><span class="p">),</span> 
                 <span class="n">prop</span><span class="o">=</span><span class="p">{</span><span class="s">'size'</span><span class="p">:</span> <span class="mi">16</span><span class="p">},</span>
                 <span class="n">frameon</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
                 <span class="n">title</span><span class="o">=</span><span class="s">'Markers'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">leg2</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="customize-legend-fonts">Customize legend fonts</h3>

<p>Note that you can customize the look of legend elements using the <code class="language-plaintext highlighter-rouge">prop=</code> argument. Below you set the font family to cursive and the font size to 16.</p>

<p><code class="language-plaintext highlighter-rouge">prop={'size': 16, 'family': 'cursive'}</code></p>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_51_0.png" alt="Geopandas plot of roads colored according to an attribute." />
<figcaption>Geopandas plot of roads colored according to an attribute.</figcaption>

</figure>

<h3 id="refine-legend">Refine legend</h3>

<p>You can refine each element of the legend. To adjust the legend sub heading titles 
you use</p>

<p><code class="language-plaintext highlighter-rouge">plt.setp(leg1.get_title())</code></p>

<p>where leg1 is the variable name for the first legend element (the plot types in this case). You then can add various text attributes including fontsize, weight and family.</p>

<p><code class="language-plaintext highlighter-rouge">plt.setp(leg1.get_title(), fontsize='15', weight='bold')</code></p>

<h2 id="set-plot-attributes-globally">Set Plot Attributes Globally</h2>

<p>There are different ways to adjust title font sizes. Below you use a call to  <code class="language-plaintext highlighter-rouge">plt.rcParams</code> to set the fonts universally for ALL PLOTS in your notebook. This is a nice option to use if you want to maintain the same plot look throughout your document.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'font.family'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'sans'</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'font.size'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">22</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'legend.fontsize'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'small'</span>
</code></pre></div></div>

<figure class="output display_data">

<img src="https://www.earthdatascience.org/images/courses/plot-data-in-python-textbook/01-plot-with-matplotlib/plotting-geopandas/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots/2019-09-11-intro-to-spatial-plotting-matplotlib-01-customize-matplotlib-plots_56_0.png" alt="Geopandas plot of roads colored according to an attribute." />
<figcaption>Geopandas plot of roads colored according to an attribute.</figcaption>

</figure>


          

        

        <!-- if the page is a course lesson, add pagination -->

        
         <!-- This is clunky code that forces pagination across lesson sets -->
<!-- NOTE: it won't include slideshows as written which makes sense -->
<!-- add forced pagination -->
<!-- first, get total lesson count -->

<div class="previous--next">





<!-- if it's page one - then no previous button -->
<!-- how do i figure out the link? i have to loop through again? -->


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    

    
      

      
      
    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    

    
      

      
      
       <a href="https://www.earthdatascience.org/courses/earth-analytics-python/spatial-data-vector-shapefiles/python-change-spatial-extent-of-map-matplotlib-geopandas/" class="btn btn--info btn--large btn-success" style="float:right" >
         Adjust Map Extent
         <i class="fa fa-4 fa-arrow-circle-right" aria-hidden="true"></i></a>
      
    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


    
  
  <!-- ELSE if it's a module -->
  


  <!-- ELSE if it's a module -->
  
      
    


  <!-- ELSE if it's a module -->
  
      
    

</div>

        
      </section>

      <footer class="page__meta">
        
        









        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2022-01-21">January 21, 2022</time></p>
        
        <!-- Add license information w/ DOI to the bottom -->
        
  
     The Earth analytics python course is subject to the
     <a href="https://www.earthdatascience.org/license" target="_blank">CC BY-SA 4.0 License </a>.
      Citation DOI: <a href="https://zenodo.org/badge/latestdoi/161369201" target="_blank"> https://zenodo.org/badge/latestdoi/161369201</a>
  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  


      </footer>

      


<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=https://www.earthdatascience.org/courses/intro-to-earth-analytics/spatial-data-vector-shapefiles/python-customize-map-legends-geopandas/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.earthdatascience.org/courses/intro-to-earth-analytics/spatial-data-vector-shapefiles/python-customize-map-legends-geopandas/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://www.earthdatascience.org/courses/intro-to-earth-analytics/spatial-data-vector-shapefiles/python-customize-map-legends-geopandas/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.earthdatascience.org/courses/intro-to-earth-analytics/spatial-data-vector-shapefiles/python-customize-map-legends-geopandas/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
<br><br>
  <a href="https://earthlab.colorado.edu/earth-data-analytics-professional-graduate-certificate?utm_source=earthdatascience&utm_medium=website&utm_campaign=certificate-2022&utm_id=certificate-2022" target="_blank">
    <img src="https://www.earthdatascience.org/images/earth-data-analytics-professional-certificate-banner.png" alt="Get a professional Certificate in Earth Data Analytics at University of Colorado, Boulder" width="40%"></a>
</section>


       
    </div>

    
      


<div class="page__comments">
  <h4 class="page__comments-title">Leave a Comment</h4>
  
    <section id="disqus_thread"></section>
  
</div>
    
  </article>

  
  
    <div class="page__related">
      
        <h4 class="page__related-title">You May Also Enjoy</h4>
      
      <div class="grid__wrapper">
        
          




<div class="grid__item">
  
    <a href="https://www.earthdatascience.org/courses/earth-analytics-bootcamp/plot-data-python">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Plot Data With Matplotlib
</h2>


     
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  1 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">

     This Week

  


</p>
    </article>
  </a>
</div>

        
          




<div class="grid__item">
  
    <a href="https://www.earthdatascience.org/courses/use-data-open-source-python/hierarchical-data-formats-hdf/summarize-climate-data-by-season/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Calculate Seasonal Summary Values from Climate Data Variables Stored in NetCDF 4 Format: Work With MACA v2 Climate Data in Python
</h2>


     
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  26 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">Learn how to calculate seasonal summary values for MACA 2 climate data using xarray and region mask in open source Python.
</p>
    </article>
  </a>
</div>

        
          




<div class="grid__item">
  
    <a href="https://www.earthdatascience.org/courses/use-data-open-source-python/hierarchical-data-formats-hdf/subset-netcdf4-climate-data-spatially-aoi/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">Calculate Summary Values Using Spatial Areas of Interest (AOIs) including Shapefiles for Climate Data Variables Stored in NetCDF 4 Format: Work With MACA v2 Climate Data in Python
</h2>


     
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  32 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">Climate datasets stored in netcdf 4 format often cover the entire globe or an entire country. Learn how to subset climate data spatially and by time slices u...</p>
    </article>
  </a>
</div>

        
          




<div class="grid__item">
  
    <a href="https://www.earthdatascience.org/courses/use-data-open-source-python/hierarchical-data-formats-hdf/use-netcdf-in-python-xarray/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
      <h2 class="archive__item-title" itemprop="headline">How to Open and Process NetCDF 4 Data Format in Open Source Python
</h2>


     
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  26 minute read
	
</p>
      
      <p class="archive__item-excerpt" itemprop="description">Historic and projected climate data are most often stored in netcdf 4 format. Learn how to open and process MACA version 2 climate data for the Continental U...</p>
    </article>
  </a>
</div>

        
      </div>
    </div>
  
</div>



    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->


<!-- Adding analytics code -->

        



<div class="page__footer-follow">
  <ul class="social-icons">
    <li>
      <strong>&copy; 2025 Earth Lab -
      <a href="https://www.earthdatascience.org/license"> All materials on this site
        are subject to the CC BY-SA 4.0 License. </a>
      </strong>
    </li>
  </ul>
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/earthlabcu"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/earthlab"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://www.earthdatascience.org/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<!--
<div class="page__footer-copyright">Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
-->

      </footer>
    </div>

    <script src="https://www.earthdatascience.org/assets/js/main.min.js"></script>






  
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'earthlabcu';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>





<script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>

    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-84081999-1', 'auto');
    ga('send', 'pageview');
</script>



  </body>
</html>

