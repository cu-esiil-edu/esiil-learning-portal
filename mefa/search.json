[
  {
    "objectID": "notebooks/07-phenocam/phenocam.html",
    "href": "notebooks/07-phenocam/phenocam.html",
    "title": "Explore PhenoCam Data",
    "section": "",
    "text": "Some code adapted from the 2020 NEON Tutorial by Bijan Seyednasrollah",
    "crumbs": [
      "MEFA Phenocam Workshop",
      "Explore PhenoCam Data"
    ]
  },
  {
    "objectID": "notebooks/07-phenocam/phenocam.html#introduction-to-phenocam",
    "href": "notebooks/07-phenocam/phenocam.html#introduction-to-phenocam",
    "title": "Explore PhenoCam Data",
    "section": "Introduction to PhenoCam",
    "text": "Introduction to PhenoCam\nEstablished in 2008, the PhenoCam Network is a collection of &gt;700 digital cameras that take regular (~ every 30 min) pictures of ecosystem canopies around the world. The name PhenoCam comes from the combination of the words “phenology” and “camera”, because the images are an easy and effective way to study the phenology, or the timing of seasonal changes, of vegetation across diverse ecosystems. The images are available in near-real time to view on the PhenoCam website, and can also be downloaded through the phenocamapi R package, which we’ll cover in this tutorial. There are currently over 60 million images available!\n\n\n\nPhenoCam locations across North America (screenshot from phenocam.nau.edu).\n\n\n\n\n\nIllustration of a PhenoCam (red circle) over a tree canopy collecting phenology data (Image from Richardson 2019, illustrator: Victor Leshyk).\n\n\n\nQuantifying Greenness\nBeyond being pretty pictures, PhenoCam images also provide a quantitative way to track vegetation phenology by measuring the intensity of canopy greenness. Digital images are stored as three different color channels - red, green, and blue (RGB) - which are the primary colors of light, and combine in different ratios to create all the visible colors in a photograph. Old-style TVs use this same method, as does your smartphone.\n\n\n\nThe primary colors of light combine to create all visible colors in digital images.\n\n\nEach digital pixel has a numerical value for each color channel (RGB) that represents its intensity. We can use these values to quantify the relative intensity of green compared to the overall brightness of the image. We call this the Green Chromatic Coordinate (GCC) and calculate it using the equation below.\n\n\n\nEquation to calculate the relative greenness (GCC) of a digital image.\n\n\nHowever, since PhenoCam images usually capture other things besides just the vegetation canopy (e.g., sky, ground, roads, buildings), each site has established portions of the image, or regions of interest (ROIs), that are analyzed for greenness. For example, at this forested site in Canada (lacclair), only the trees in the foreground are included in the GCC calculation:\n\n\n\nExample of an ROI (unshaded portion) for a forest site.\n\n\nAnd at this shrub site, only the shrub plants are included in the ROI and bare ground is excluded.\n\n\n\nROI (unshaded portion) for a shrub site- bare ground is excluded.\n\n\nWhen GCC is calculated over a long time period at a site, a timeseries of vegetation greenness can be created. Below is the GCC timeseries for the “laccair” forest site shown above over the past 9 years. Notice the clear seasonal cycle of vegetation green-up in the spring followed by leaf color change and senescence (brown-down/death) in autumn.\n\n\n\nTimeseries of canopy greeness (GCC) at a forest site in Canada (lacclair).\n\n\n\n\nSeasonal Transition Dates\nThese GCC timeseries can be used to extract seasonal transition dates across the years. For example, to determine the timing of spring green-up, we can use the amplitude (height) of each annual peak to determine when (what day of the year) vegetation at the site has reached either 10%, 25%, or 50% of its maximum greenness. We consider this to be the start of spring green-up. We use a similar method to extract the start of autumn brown-down.\n\n\n\nThe dates of spring green-up (green symbols) and autumn brown-down (brown symbols) can be extracted from the GCC timeseries.\n\n\nOver a long time period, the timing of seasonal transition dates can be used to track shifts in vegetation phenology, such as with climate change. This dataset can also be used to determine which environmental and biologic factors (e.g., temperature, rainfall, sunlight) influence the timing of spring leaf-out and autumn color changes.\n\n\n\nSeasonal transition dates at a deciduous forest site in Canada (lacclair) over the past 9 years.\n\n\n\n\nYour turn!\nThanks for learning about PhenoCam. Now you’ll have the chance to access images and data from a PhenoCam site of your choosing following the tutorial below!",
    "crumbs": [
      "MEFA Phenocam Workshop",
      "Explore PhenoCam Data"
    ]
  },
  {
    "objectID": "notebooks/07-phenocam/phenocam.html#accessing-phenocam-data",
    "href": "notebooks/07-phenocam/phenocam.html#accessing-phenocam-data",
    "title": "Explore PhenoCam Data",
    "section": "Accessing PhenoCam Data",
    "text": "Accessing PhenoCam Data\nWe’ll be using the phenocamapi R package to directly download PhenoCam data. An API is an application programming interface (API), which is a way for two or more applications/computers to talk with one another. In this case, it allows us to directly access data from the PhenoCam database.\nThen, you’ll choose a site to view some images and download greenness data. Finally, you’ll create a gif (short movie) of your site through time.\nFirst, we need to open the required packages. A package is a collection of functions/tools to complete a desired task. For example, you need a certain set of tools to build a birdhouse, but a different set of tools to bake a cake. In this case, the phenocamapi and phenocamr packages have the tools to interact with and download phenocam data. The other packages listed below assist with visualization and formatting.\n\nlibrary(phenocamapi)\nlibrary(phenocamr)\nlibrary(jpeg)\nlibrary(purrr) \nlibrary(magick)\nlibrary(lubridate)\nlibrary(ggplot2)\nlibrary(pals)\nlibrary(maps)\nlibrary(plotly)\n\nNext, indicate a location (file path) where you want the PhenoCam images to save. For this workshop, we’ll create a new file within GitHub Codespaces called pheno_images.\n\n\n\n\n\n\nTip\n\n\n\nIn the future, if you’re using R Studio locally on your computer, you can enter the path to a local directory, or folder, on your computer instead (e.g., “/Users/username/Desktop/pheno_images”). Make sure to use the right character to separate folder names – forward slash (/) on Unix/Mac systems and backslash (\\) on Windows. Notice that we use the file.path() function, which uses the correct file separator on all systems.\n\n\n\n# Designate directory (file path)\ndir = file.path('.', 'pheno_images')\n\n# Create test_images folder\ndir.create(dir)\n\n# View directory\ndir\n\n[1] \"./pheno_images\"\n\n\nFirst, we’ll download a table to see all the available PhenoCam sites and associated metadata. For example, each entry lists a site’s geographic coordinates, date of first and last image, primary vegetation type (see table below for abbreviations), and mean annual temperature and precipitation, among other things.\nVegetation types:\n\n\n\nAbbreviation\nVegetation Type\n\n\n\n\nAG\nAgriculture\n\n\nDB\nDeciduous Broadleaf\n\n\nEB\nEvergreen Broadleaf\n\n\nEN\nEvergreen Needleleaf\n\n\nDN\nDeciduous Needleleaf\n\n\nGR\nGrassland\n\n\nMX\nMixed Forest\n\n\nNV\nNon-vegetated\n\n\nSH\nShrub\n\n\nTN\nTundra\n\n\nUN\nUnderstory\n\n\nWL\nWetland\n\n\n\n\n# List metadata of all sites\nsitelist_table &lt;- get_phenos() \n\nsitelist_table\n\nYou can filter the table by any of the available attributes (column names). For example, I created a subset of only grasslands (GR) sites below.\n\n# Create a subset of only grassland sites \nGR_sites &lt;- subset(sitelist_table, primary_veg_type == \"GR\")  \nGR_sites\n\n                    site      lat        lon  elev active utc_offset date_first\n                  &lt;char&gt;    &lt;num&gt;      &lt;num&gt; &lt;num&gt; &lt;lgcl&gt;      &lt;num&gt;     &lt;char&gt;\n  1:       archboldbahia 27.16560  -81.21611     8   TRUE         -5 2017-03-21\n  2:            arsgacp2 31.43950  -83.59146   101  FALSE          2 2016-04-27\n  3:      bitterbrush001 48.15400 -119.94560   667   TRUE         -8 2020-09-20\n  4: blueoakheadquarters 37.38270 -121.73930   572   TRUE         -8 2022-01-24\n  5:             bozeman 45.78306 -110.77778  2332  FALSE         -7 2015-08-16\n ---                                                                           \n145:         uiefprairie 40.06462  -88.19847   224   TRUE         -6 2008-10-22\n146:            usgseros 43.73430  -96.62340   448   TRUE         -6 2014-09-04\n147:       utepgreenroof 31.76860 -106.50390  1190   TRUE         -7 2022-01-13\n148:               vaira 38.41328 -120.95064   129   TRUE         -8 2009-01-01\n149:             waahila 21.30170 -157.81520    55   TRUE        -10 2015-12-11\n      date_last infrared                                  contact1\n         &lt;char&gt;   &lt;char&gt;                                    &lt;char&gt;\n  1: 2024-07-22        Y Amartya Saha &lt;asaha@archbold-station.org&gt;\n  2: 2018-01-23        Y    David Bosch &lt;David.Bosch@ars.usda.gov&gt;\n  3: 2024-05-25        Y Brandon Sackmann &lt;bssackmann@gsi-net.com&gt;\n  4: 2024-07-22        Y Zachariah Tuhtill &lt;ztuthill@berkeley.edu&gt;\n  5: 2019-12-18        Y           Paul Stoy &lt;paul.stoy@gmail.com&gt;\n ---                                                              \n145: 2024-01-26        N    Carl Bernacchi &lt;bernacch@illinois.edu&gt;\n146: 2024-07-22        Y                Jesslyn &lt;jfbrown@usgs.gov&gt;\n147: 2024-07-22        Y      Gesuri Ramirez &lt;gramirez12@utep.edu&gt;\n148: 2024-07-09        Y Dennis Baldocchi &lt;Baldocchi@berkeley.edu&gt;\n149: 2024-07-22        Y    Clay Trauernicht &lt;trauerni@hawaii.edu&gt;\n                                                contact2\n                                                  &lt;char&gt;\n  1: Elizabeth Boughton &lt;eboughton@archbold-station.org&gt;\n  2:                                                    \n  3:            Brandon Sackmann &lt;bssackmann@gsienv.com&gt;\n  4:                Zachary Harlow &lt;harlow@berkeley.edu&gt;\n  5:                                                    \n ---                                                    \n145:                 Timothy A Mies &lt;tmies@illinois.edu&gt;\n146:              Ken Mayer &lt;kenneth.mayer.ctr@usgs.gov&gt;\n147:               Vanessa Lougheed &lt;vlougheed@utep.edu&gt;\n148:           Joseph Verfaillie &lt;jverfail@berkeley.edu&gt;\n149:                        Ryan Mudd &lt;rmudd@hawaii.edu&gt;\n                                                                          site_description\n                                                                                    &lt;char&gt;\n  1:                                             Archbold Biological Station, Florida, USA\n  2:                           Southeast Watershed Research Laboratory EC2 Tifton, Georgia\n  3: Parcel 1 East at Midpoint (Shrub-Steppe - Post Wildfire ca. 2014), Methow, Washington\n  4:                      Residence Meadow, Blue Oak Ranch Reserve, Santa Clara County, CA\n  5:                                Bangtail Study Area, Montana State University, Montana\n ---                                                                                      \n145:            Restored prairie at the University of Illinois Energy Farm, Urbana, IL USA\n146:                          Earth Resources Observation and Science Center, South Dakota\n147:             Green Roof, University of Texas at El Paso, Biology Building, El Paso, TX\n148:                                                Vaira Ranch, Amador County, California\n149:                        Waahila Ridge, University of Hawaii at Manoa, Honolulu, Hawaii\n     site_type                 group camera_description camera_orientation\n        &lt;char&gt;                &lt;char&gt;             &lt;char&gt;             &lt;char&gt;\n  1:         I                  LTAR  StarDot NetCam SC                  N\n  2:         I                  LTAR               &lt;NA&gt;               &lt;NA&gt;\n  3:         I                  &lt;NA&gt;  StarDot NetCam SC                  W\n  4:         I                  &lt;NA&gt;  StarDot NetCam SC                  N\n  5:         I AmericaView AMERIFLUX  StarDot NetCam SC                  N\n ---                                                                      \n145:        II              PhenoCam          AXIS 211M                  N\n146:         I           AmericaView  StarDot NetCam SC                  N\n147:         I                  &lt;NA&gt; StarDot NetCam SC.                  E\n148:         I    PhenoCam AMERIFLUX  StarDot NetCam SC                 NW\n149:         I                        StarDot NetCam SC                ENE\n     flux_data flux_networks       flux_sitenames\n        &lt;lgcl&gt;        &lt;list&gt;               &lt;char&gt;\n  1:     FALSE     &lt;list[0]&gt;                 &lt;NA&gt;\n  2:     FALSE     &lt;list[0]&gt;                 &lt;NA&gt;\n  3:     FALSE     &lt;list[0]&gt;                     \n  4:     FALSE     &lt;list[0]&gt;                     \n  5:      TRUE     &lt;list[1]&gt; US-MTB (forthcoming)\n ---                                             \n145:      TRUE     &lt;list[1]&gt;                     \n146:     FALSE     &lt;list[0]&gt;                     \n147:     FALSE     &lt;list[0]&gt;                 &lt;NA&gt;\n148:      TRUE     &lt;list[1]&gt;               US-Var\n149:     FALSE     &lt;list[0]&gt;                     \n                                                                                                                                                                                                                                                                                                                                                                dominant_species\n                                                                                                                                                                                                                                                                                                                                                                          &lt;char&gt;\n  1:                                                                                                                                                                                                                                                                                                                                                                            \n  2:                                                                                                                                                                                                                                                                                                                                                                            \n  3:                                                                                                                                                                                                                                                                                                                                                                            \n  4:                                                                                                                                                                                                                                                                                                                             Avena spp., Quercus lobata, Elymus trachycaulus\n  5:                                                                                                                                                                                                                                                                                                                                                          Festuca idahoensis\n ---                                                                                                                                                                                                                                                                                                                                                                            \n145: Andropogon gerardii (Big bluestem), Coreopsis tripteris (Tall tickseed), Elymus canadensis (Canada wild rye), Helianthus grosseserratus (Sawtooth sunflower), Heliopsis helianthoides (Early sunflower), Ratibida pinnata (Yellow coneflower), Rudbeckia subtomentosa (Sweet blackeyed Susan), Schizachyrium scoparium (Little bluestem), Solidago rigida (Stiff goldenrod)\n146:                                                                                                                                                                                                                                                                                           Andropogon gerardii, Poa pratensis, Bouteloua curtipendula, Melilotus officinalis\n147:                                                                                                                                                                                                                                                                                                           Thymophylla pentachaeta, Gaillardia pulchella, Berlandiera lyrata\n148:                                                                                                                                                                                                                                                     Brachypodium distachyon, Hypochaeris glabra, Trifolium dubium, Trifolium hirtum, Dichelostemma volubile, Erodium botrys\n149:                                                                                                                                                                                                                                                                                                                                                         Megathyrsus maximus\n     primary_veg_type secondary_veg_type site_meteorology MAT_site MAP_site\n               &lt;char&gt;             &lt;char&gt;           &lt;lgcl&gt;    &lt;num&gt;    &lt;num&gt;\n  1:               GR               &lt;NA&gt;            FALSE       NA       NA\n  2:               GR               &lt;NA&gt;            FALSE       NA       NA\n  3:               GR                 SH            FALSE      8.7      323\n  4:               GR                 DB            FALSE     13.4      600\n  5:               GR                 EN            FALSE      5.0      850\n ---                                                                       \n145:               GR               &lt;NA&gt;             TRUE     11.1     1042\n146:               GR                 SH             TRUE      7.6      670\n147:               GR               &lt;NA&gt;            FALSE     18.0      247\n148:               GR               &lt;NA&gt;             TRUE     15.8      559\n149:               GR                 SH             TRUE     22.5     1150\n     MAT_daymet MAP_daymet MAT_worldclim MAP_worldclim koeppen_geiger ecoregion\n          &lt;num&gt;      &lt;num&gt;         &lt;num&gt;         &lt;num&gt;         &lt;char&gt;     &lt;num&gt;\n  1:      22.85       1302          22.5          1208            Cfa         8\n  2:      19.00       1251          18.7          1213            Cfa         8\n  3:       8.35        420           7.3           340            Dsb        10\n  4:      14.35        501          14.3           646            Csb        11\n  5:       2.30        981           0.9           728            Dfb         6\n ---                                                                           \n145:      11.10       1063          10.9           971            Dfa         8\n146:       7.50        699           7.0           626            Dfa         9\n147:      17.75        234          17.3           219            BWk        10\n148:      16.65        659          15.9           583            Csa        11\n149:      24.20       1639          24.0          1152             As        NA\n     landcover_igbp dataset_version1\n              &lt;num&gt;           &lt;lgcl&gt;\n  1:             14               NA\n  2:             14               NA\n  3:              1               NA\n  4:              8               NA\n  5:             10               NA\n ---                                \n145:             12               NA\n146:             12               NA\n147:             13               NA\n148:              8               NA\n149:             13               NA\n                                                                                                                                                                                                                                                   site_acknowledgements\n                                                                                                                                                                                                                                                                  &lt;char&gt;\n  1:                                                                                                        This research was a contribution from the Long-Term Agroecosystem Research (LTAR) network. LTAR is supported by the United States Department of Agriculture.\n  2:                                                                                                        This research was a contribution from the Long-Term Agroecosystem Research (LTAR) network. LTAR is supported by the United States Department of Agriculture.\n  3:                                                                                                                                                                 Research at this site is supported by GSI Environmental Inc. (http://www.gsi-net.com), Olympia, WA.\n  4:                                                                                                     Blue Oak Ranch Reserve is part of the University of California Natural Reserve System. Blue Oak Ranch is administered bu the University of California, Berkeley\n  5: Research at the Bozeman site is supported by Colorado State University and the AmericaView program (grants G13AC00393, G11AC20461, G15AC00056) with phenocam equipment and deployment sponsored by the Department of Interior North Central Climate Science Center.\n ---                                                                                                                                                                                                                                                                    \n145:                                                                                                                     The UIUC Energy Farm flux towers are supported by the Global Change and Photosynthesis Research Unit of the USDA Agricultural Research Service.\n146:                                                                                                                                      This site is supported by AmericaView, the USGS Land Remote Sensing program, and the DOI North Central Climate Science Center.\n147:                                                                                                                                                                                                                                                                    \n148:                                                                                                                                                                                                                                                                    \n149:                                                                                                                              Hawaii RREA Program (USDA-NIFA), HAWN-01-025, College of Tropical Agriculture and Human Resources at the University of Hawaii at Manoa\n                             modified flux_networks_name\n                               &lt;char&gt;             &lt;char&gt;\n  1: 2022-10-19T13:24:12.256706-04:00               &lt;NA&gt;\n  2: 2022-10-19T13:26:15.042047-04:00               &lt;NA&gt;\n  3: 2020-10-30T10:48:53.990761-04:00               &lt;NA&gt;\n  4: 2021-04-12T09:54:24.431967-04:00               &lt;NA&gt;\n  5: 2016-11-01T15:42:19.771057-04:00          AMERIFLUX\n ---                                                    \n145: 2017-05-16T14:04:31.190825-04:00              OTHER\n146: 2017-05-24T16:16:07.599517-04:00               &lt;NA&gt;\n147: 2023-11-18T13:35:23.500156-05:00               &lt;NA&gt;\n148: 2019-05-23T15:54:21.000061-04:00          AMERIFLUX\n149: 2017-09-20T13:34:52.922933-04:00               &lt;NA&gt;\n            flux_networks_url flux_networks_description\n                       &lt;char&gt;                    &lt;char&gt;\n  1:                     &lt;NA&gt;                      &lt;NA&gt;\n  2:                     &lt;NA&gt;                      &lt;NA&gt;\n  3:                     &lt;NA&gt;                      &lt;NA&gt;\n  4:                     &lt;NA&gt;                      &lt;NA&gt;\n  5: http://ameriflux.lbl.gov         AmeriFlux Network\n ---                                                   \n145:                                 Other/Unaffiliated\n146:                     &lt;NA&gt;                      &lt;NA&gt;\n147:                     &lt;NA&gt;                      &lt;NA&gt;\n148: http://ameriflux.lbl.gov         AmeriFlux Network\n149:                     &lt;NA&gt;                      &lt;NA&gt;\n\n\n\n\n\n\n\n\nChallenge\n\n\n\nCan you subset the sitelist_table by a different primary vegetation type? How about by a different variable (table column)? Use the code cell below.",
    "crumbs": [
      "MEFA Phenocam Workshop",
      "Explore PhenoCam Data"
    ]
  },
  {
    "objectID": "notebooks/07-phenocam/phenocam.html#create-a-map-of-the-phenocam-sites",
    "href": "notebooks/07-phenocam/phenocam.html#create-a-map-of-the-phenocam-sites",
    "title": "Explore PhenoCam Data",
    "section": "Create a Map of the PhenoCam Sites",
    "text": "Create a Map of the PhenoCam Sites\nNow, we’ll create an interactive map to view all the PhenoCam sites colored by their primary vegetation type. First, using our sitelist_table that we downloaded above, we filter out any sites for which a primary vegetation type isn’t listed or an “NA” is entered. We’ll call this new data table “sitelist_table2”.\n\n# Remove sites with NA and empty cells for primary_veg_type\nsitelist_table2 &lt;- sitelist_table[!(is.na(sitelist_table$primary_veg_typ) | sitelist_table$primary_veg_typ==\"\"), ]\n\nThen, we’ll create a static map of the PhenoCam sites using their latitude and longitude (included in “sitelist_table2”). We’ll overlay this onto a basemap of the world and US states.\n\n# Download basemaps of the world and US states\nworld_map &lt;- map_data(\"world\")\nstate_map &lt;- map_data(\"state\")\n\n## Create map of sites\nSite_map &lt;- ggplot() +\n    # Add world map  \n    geom_polygon(data = world_map, aes(x = long, y = lat, group = group), \n                fill = \"white\", color = \"black\") +\n    # Add state map\n    geom_polygon(data = state_map, aes(x = long, y = lat, group = group), \n                fill = NA, color = \"black\") +  \n    # Add PhenoCam sites as points\n    geom_point(data = sitelist_table2, aes(x = lon, y = lat,\n                color = primary_veg_type,\n                text = paste(\"Site:\", site)), size = 3) +\n    # Choose legend colors  \n    scale_color_manual(values=as.vector(trubetskoy(11))) + \n    # Add title and labels  \n    labs(title = \"PhenoCam Sites by Vegetation Type\", x = \"Longitude\", \n        y = \"Latitude\", color = \"Primary Veg Type\") +\n    # Indicate map theme (general appearance)\n    theme_minimal() +\n    # Center title and increase font size\n    theme(plot.title = element_text(hjust = 0.5, size = 20))\n  \n# View map\nSite_map\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nChallenge\n\n\n\nCan you change the title of the map? Make the change and re-run the code cell above.\n\n\nLet’s make the map interactive! You can hover over sites to see their details, draw a box around a specific area to zoom into the region, and click on various legend entries to toggle them on or off. Double click on the map to zoom back out.\n\n# Make map interactive\nggplotly(Site_map)\n\n\n\n\n\n\nDownload & Plot Canopy Greenness\nNow, let’s view some PhenoCam images and greenness data. Choose a site to explore, and enter the site name and relevant information in the cell below. For example, I chose the site “lacclair”, which represents a deciduous broadleaf (“DB”) vegetation type, and I chose to look at images from the year 2022. You’ll also need to specify which region of interest (ROI) to use for your site. Recall that some sites have multiple ROIs, each with a unique ID number. You can view the possible ROIs for your site on the PhenoCam website.\n\n# Choose site to explore \n# Enter name exactly as it appears in the table/on the website\nsite_name = \"lacclair\"\n\n# Indicate vegetation type (listed on site page)\nveg = \"DB\"\n\n# Choose data year (for downloading images later)\nyear = 2022\n\n# Indicate ROI ID\nROI = 1000\n\n# View the objects to make sure correct\nsite_name\n\n[1] \"lacclair\"\n\nveg\n\n[1] \"DB\"\n\nyear\n\n[1] 2022\n\nROI\n\n[1] 1000\n\n\nFirst, we’ll download canopy greenness (GCC = green chromatic coordinate) timeseries data for your chosen site. The GCC data are already condensed down to 1-day and 3-day data products (type = ‘3day’ or ‘1day’). See Richardson et al. (2018) for more information about PhenoCam data processing.\n\n# Download GCC timeseries\nGCC_timeseries &lt;- get_pheno_ts(site = site_name, \n                               vegType = veg, \n                               roiID = ROI, \n                               type = '3day')\nGCC_timeseries\n\n            date  year   doy image_count                midday_filename\n          &lt;char&gt; &lt;int&gt; &lt;int&gt;       &lt;int&gt;                         &lt;char&gt;\n   1: 2014-08-24  2014   236          48 lacclair_2014_08_24_120005.jpg\n   2: 2014-08-27  2014   239          11 lacclair_2014_08_27_100006.jpg\n   3: 2014-08-30  2014   242          12 lacclair_2014_08_29_140006.jpg\n   4: 2014-09-02  2014   245           0                           None\n   5: 2014-09-05  2014   248           0                           None\n  ---                                                                  \n1206: 2024-07-09  2024   191          79 lacclair_2024_07_09_120005.jpg\n1207: 2024-07-12  2024   194          78 lacclair_2024_07_12_120007.jpg\n1208: 2024-07-15  2024   197          77 lacclair_2024_07_15_120005.jpg\n1209: 2024-07-18  2024   200          77 lacclair_2024_07_18_120005.jpg\n1210: 2024-07-21  2024   203          52 lacclair_2024_07_21_120005.jpg\n       midday_r  midday_g midday_b midday_gcc midday_rcc    r_mean    r_std\n          &lt;num&gt;     &lt;num&gt;    &lt;num&gt;      &lt;num&gt;      &lt;num&gt;     &lt;num&gt;    &lt;num&gt;\n   1: 112.49521 107.31002 64.79199    0.37706    0.39528 101.21337 10.45700\n   2: 102.96825  99.27311 58.65611    0.38051    0.39467  99.80690  7.75972\n   3: 101.57938  96.23061 61.00618    0.37181    0.39248 105.63914  3.39082\n   4:        NA        NA       NA         NA         NA        NA       NA\n   5:        NA        NA       NA         NA         NA        NA       NA\n  ---                                                                      \n1206:  66.14564  78.34146 44.05530    0.41551    0.35083  82.81701  7.76660\n1207:  87.48138  94.75240 53.68124    0.40164    0.37082  80.05064 11.47252\n1208:  97.34581 100.29843 56.42505    0.39477    0.38315  83.92396 10.45357\n1209:  87.71406  95.76012 53.93593    0.40335    0.36946  87.25429 12.35282\n1210:  69.31691  79.30429 53.96135    0.39147    0.34217  91.37739 11.80802\n        g_mean    g_std   b_mean   b_std gcc_mean gcc_std  gcc_50  gcc_75\n         &lt;num&gt;    &lt;num&gt;    &lt;num&gt;   &lt;num&gt;    &lt;num&gt;   &lt;num&gt;   &lt;num&gt;   &lt;num&gt;\n   1: 97.89047  7.24635 60.17627 3.34001  0.37778 0.00470 0.37674 0.37769\n   2: 96.45416  5.20932 57.23162 3.03065  0.38071 0.00416 0.37808 0.38492\n   3: 99.59658  3.11701 61.88915 1.38803  0.37282 0.00109 0.37296 0.37386\n   4:       NA       NA       NA      NA       NA      NA      NA      NA\n   5:       NA       NA       NA      NA       NA      NA      NA      NA\n  ---                                                                    \n1206: 90.10821  6.40263 49.61383 3.33149  0.40506 0.00754 0.40578 0.40980\n1207: 87.79014 12.32619 50.89394 5.60068  0.40052 0.01586 0.40370 0.40804\n1208: 89.77162  9.85251 52.03008 4.48633  0.39741 0.01141 0.39967 0.40304\n1209: 92.37210 10.32294 56.18593 6.00066  0.39161 0.01098 0.39093 0.39995\n1210: 94.75258  9.74749 56.80837 6.60961  0.39045 0.00691 0.38991 0.39626\n       gcc_90 rcc_mean rcc_std  rcc_50  rcc_75  rcc_90 max_solar_elev snow_flag\n        &lt;num&gt;    &lt;num&gt;   &lt;num&gt;   &lt;num&gt;   &lt;num&gt;   &lt;num&gt;          &lt;num&gt;    &lt;lgcl&gt;\n   1: 0.38626  0.38951 0.01273 0.39466 0.39571 0.39645       54.28096        NA\n   2: 0.38687  0.39336 0.00810 0.39596 0.40017 0.40124       53.23820        NA\n   3: 0.37391  0.39544 0.00168 0.39603 0.39664 0.39692       52.16943        NA\n   4:      NA       NA      NA      NA      NA      NA             NA        NA\n   5:      NA       NA      NA      NA      NA      NA             NA        NA\n  ---                                                                          \n1206: 0.41254  0.37169 0.01263 0.37131 0.37936 0.38281       65.35487        NA\n1207: 0.41201  0.36520 0.01433 0.36726 0.37245 0.37985       64.97203        NA\n1208: 0.40679  0.37110 0.01590 0.37350 0.37818 0.38276       64.53198        NA\n1209: 0.40318  0.36881 0.02170 0.37148 0.37907 0.38367       64.03578        NA\n1210: 0.39878  0.37542 0.01358 0.37568 0.38213 0.38974       63.48545        NA\n      outlierflag_gcc_mean outlierflag_gcc_50 outlierflag_gcc_75\n                    &lt;lgcl&gt;             &lt;lgcl&gt;             &lt;lgcl&gt;\n   1:                   NA                 NA                 NA\n   2:                   NA                 NA                 NA\n   3:                   NA                 NA                 NA\n   4:                   NA                 NA                 NA\n   5:                   NA                 NA                 NA\n  ---                                                           \n1206:                   NA                 NA                 NA\n1207:                   NA                 NA                 NA\n1208:                   NA                 NA                 NA\n1209:                   NA                 NA                 NA\n1210:                   NA                 NA                 NA\n      outlierflag_gcc_90  YEAR   DOY   YYYYMMDD\n                  &lt;lgcl&gt; &lt;int&gt; &lt;int&gt;     &lt;char&gt;\n   1:                 NA  2014   236 2014-08-24\n   2:                 NA  2014   239 2014-08-27\n   3:                 NA  2014   242 2014-08-30\n   4:                 NA  2014   245 2014-09-02\n   5:                 NA  2014   248 2014-09-05\n  ---                                          \n1206:                 NA  2024   191 2024-07-09\n1207:                 NA  2024   194 2024-07-12\n1208:                 NA  2024   197 2024-07-15\n1209:                 NA  2024   200 2024-07-18\n1210:                 NA  2024   203 2024-07-21\n\n\nNow, we’ll plot the GCC timeseries to see how canopy greenness changes over time at your chosen site. From the “GCC_timeseries” table, we’ll plot the variable called “gcc_90”, which corresponds to the 90th percentile of GCC values across the 3-day window within the designated ROI. Using the 90th percentile (rather than the mean) reduces the influence of changing weather and brightness across the images. See Richardson et al. (2018) for more details on data products and processing.\n\n# Put date into date format\nGCC_timeseries[,date:=as.Date(date)]\n\n# Adjust plot area margins\npar(mar=c(5, 6, 4, 2))\n\n# Create line plot\nplot(GCC_timeseries$date, GCC_timeseries$gcc_90,\n     # Choose line color & type\n     col = \"darkgreen\", type = \"b\",\n     # Change font size\n     cex = 1.5, cex.lab = 2, cex.axis = 2, cex.main = 3,\n     # Add axis labels\n     xlab = \"Date\", ylab = \"GCC\", \n     # Add title\n     main = paste0(site_name, \": \", \"Canopy Greenness Timeseries\"))\n\n\n\n\n\n\n\n\nNote: Since the plot isn’t saved as an object, it only appears in the built-in plot viewer for R. However, you can right click on the plot to copy and paste it elsewhere. If you accidentally close a plot and want to see it again, just re-run the code cell that created it.\n\n\nExplore Seasonal Transition Dates\nWe can also download and plot the 50% seasonal transition dates (spring green-up and fall brown-down) for your site. We’ll use another package called “phenocamr” to download the transition dates.\n\n# Download csv files of (1) GCC timeseries and (2) transition dates\n# They will save in your designated directory (dir)\ndownload_phenocam(site = site_name,\n                  veg_type = veg,\n                  frequency = 3,\n                  phenophase = TRUE,\n                  out_dir = dir)\n\n# Read in the transition date csv file:\n\n# Designate file location\ntrans_dates_path &lt;- paste0(dir, \"/\", site_name, \"_\", veg, \"_\", ROI, \"_3day_transition_dates.csv\")\n\n# Read in file\ntrans_dates &lt;- read.table(trans_dates_path,\n                 header = TRUE,\n                 sep = \",\")\n\ntrans_dates\n\n       site veg_type roi_id direction gcc_value transition_10 transition_25\n1  lacclair       DB   1000    rising    gcc_90    2015-05-09    2015-05-13\n2  lacclair       DB   1000    rising    gcc_90    2016-05-16    2016-05-18\n3  lacclair       DB   1000    rising    gcc_90    2017-05-13    2017-05-17\n4  lacclair       DB   1000    rising    gcc_90    2018-05-15    2018-05-19\n5  lacclair       DB   1000    rising    gcc_90    2019-05-19    2019-05-23\n6  lacclair       DB   1000    rising    gcc_90    2020-05-17    2020-05-20\n7  lacclair       DB   1000    rising    gcc_90    2021-05-08    2021-05-11\n8  lacclair       DB   1000    rising    gcc_90    2022-05-08    2022-05-10\n9  lacclair       DB   1000    rising    gcc_90    2023-05-07    2023-05-11\n10 lacclair       DB   1000    rising    gcc_90    2024-05-08    2024-05-11\n11 lacclair       DB   1000    rising    gcc_75    2015-05-08    2015-05-13\n12 lacclair       DB   1000    rising    gcc_75    2016-05-16    2016-05-18\n13 lacclair       DB   1000    rising    gcc_75    2017-05-13    2017-05-17\n14 lacclair       DB   1000    rising    gcc_75    2018-05-16    2018-05-19\n15 lacclair       DB   1000    rising    gcc_75    2019-05-19    2019-05-23\n16 lacclair       DB   1000    rising    gcc_75    2020-05-17    2020-05-20\n17 lacclair       DB   1000    rising    gcc_75    2021-05-08    2021-05-11\n18 lacclair       DB   1000    rising    gcc_75    2022-05-08    2022-05-11\n19 lacclair       DB   1000    rising    gcc_75    2023-05-07    2023-05-11\n20 lacclair       DB   1000    rising    gcc_75    2024-05-08    2024-05-12\n21 lacclair       DB   1000    rising    gcc_50    2015-05-08    2015-05-13\n22 lacclair       DB   1000    rising    gcc_50    2016-05-16    2016-05-19\n23 lacclair       DB   1000    rising    gcc_50    2017-05-14    2017-05-17\n24 lacclair       DB   1000    rising    gcc_50    2018-05-15    2018-05-19\n25 lacclair       DB   1000    rising    gcc_50    2019-05-19    2019-05-24\n26 lacclair       DB   1000    rising    gcc_50    2020-05-17    2020-05-20\n27 lacclair       DB   1000    rising    gcc_50    2021-05-08    2021-05-11\n28 lacclair       DB   1000    rising    gcc_50    2022-05-08    2022-05-11\n29 lacclair       DB   1000    rising    gcc_50    2023-05-08    2023-05-12\n30 lacclair       DB   1000    rising    gcc_50    2024-05-09    2024-05-12\n31 lacclair       DB   1000    rising  gcc_mean    2015-05-08    2015-05-13\n32 lacclair       DB   1000    rising  gcc_mean    2016-05-16    2016-05-18\n33 lacclair       DB   1000    rising  gcc_mean    2017-05-13    2017-05-17\n34 lacclair       DB   1000    rising  gcc_mean    2018-05-15    2018-05-19\n35 lacclair       DB   1000    rising  gcc_mean    2019-05-19    2019-05-24\n36 lacclair       DB   1000    rising  gcc_mean    2020-05-17    2020-05-20\n37 lacclair       DB   1000    rising  gcc_mean    2021-05-07    2021-05-11\n38 lacclair       DB   1000    rising  gcc_mean    2022-05-08    2022-05-11\n39 lacclair       DB   1000    rising  gcc_mean    2023-05-07    2023-05-12\n40 lacclair       DB   1000    rising  gcc_mean    2024-05-08    2024-05-12\n41 lacclair       DB   1000   falling    gcc_90    2023-10-01    2023-09-29\n42 lacclair       DB   1000   falling    gcc_90    2022-09-30    2022-09-27\n43 lacclair       DB   1000   falling    gcc_90    2021-09-29    2021-09-23\n44 lacclair       DB   1000   falling    gcc_90    2020-09-23    2020-09-20\n45 lacclair       DB   1000   falling    gcc_90    2019-10-04    2019-09-24\n46 lacclair       DB   1000   falling    gcc_90    2018-10-04    2018-10-01\n47 lacclair       DB   1000   falling    gcc_90    2017-10-05    2017-09-28\n48 lacclair       DB   1000   falling    gcc_90    2016-10-02    2016-09-29\n49 lacclair       DB   1000   falling    gcc_90    2015-10-09    2015-10-04\n50 lacclair       DB   1000   falling    gcc_90    2014-09-29    2014-09-25\n51 lacclair       DB   1000   falling    gcc_75    2023-10-01    2023-09-29\n52 lacclair       DB   1000   falling    gcc_75    2022-10-01    2022-09-28\n53 lacclair       DB   1000   falling    gcc_75    2021-10-01    2021-09-26\n54 lacclair       DB   1000   falling    gcc_75    2020-09-23    2020-09-20\n55 lacclair       DB   1000   falling    gcc_75    2019-10-04    2019-09-24\n56 lacclair       DB   1000   falling    gcc_75    2018-10-04    2018-10-01\n57 lacclair       DB   1000   falling    gcc_75    2017-10-05    2017-09-29\n58 lacclair       DB   1000   falling    gcc_75    2016-10-03    2016-09-30\n59 lacclair       DB   1000   falling    gcc_75    2015-10-09    2015-10-05\n60 lacclair       DB   1000   falling    gcc_75    2014-09-29    2014-09-25\n61 lacclair       DB   1000   falling    gcc_50    2023-10-01    2023-09-28\n62 lacclair       DB   1000   falling    gcc_50    2022-10-01    2022-09-28\n63 lacclair       DB   1000   falling    gcc_50    2021-10-01    2021-09-27\n64 lacclair       DB   1000   falling    gcc_50    2020-09-23    2020-09-20\n65 lacclair       DB   1000   falling    gcc_50    2019-09-26    2019-09-19\n66 lacclair       DB   1000   falling    gcc_50    2018-10-04    2018-10-01\n67 lacclair       DB   1000   falling    gcc_50    2017-09-23    2017-09-15\n68 lacclair       DB   1000   falling    gcc_50    2016-10-03    2016-09-30\n69 lacclair       DB   1000   falling    gcc_50    2015-10-08    2015-10-04\n70 lacclair       DB   1000   falling    gcc_50    2014-09-28    2014-09-25\n71 lacclair       DB   1000   falling  gcc_mean    2023-10-01    2023-09-28\n72 lacclair       DB   1000   falling  gcc_mean    2022-10-01    2022-09-28\n73 lacclair       DB   1000   falling  gcc_mean    2021-10-01    2021-09-27\n74 lacclair       DB   1000   falling  gcc_mean    2020-09-23    2020-09-20\n75 lacclair       DB   1000   falling  gcc_mean    2019-09-26    2019-09-19\n76 lacclair       DB   1000   falling  gcc_mean    2018-10-04    2018-10-01\n77 lacclair       DB   1000   falling  gcc_mean    2017-09-24    2017-09-15\n78 lacclair       DB   1000   falling  gcc_mean    2016-10-02    2016-09-29\n79 lacclair       DB   1000   falling  gcc_mean    2015-10-08    2015-10-04\n80 lacclair       DB   1000   falling  gcc_mean    2014-09-28    2014-09-25\n   transition_50 transition_10_lower_ci transition_25_lower_ci\n1     2015-05-19             2015-05-07             2015-05-12\n2     2016-05-23             2016-05-15             2016-05-17\n3     2017-05-23             2017-05-11             2017-05-16\n4     2018-05-23             2018-05-14             2018-05-18\n5     2019-05-30             2019-05-18             2019-05-22\n6     2020-05-24             2020-05-16             2020-05-19\n7     2021-05-16             2021-05-06             2021-05-10\n8     2022-05-16             2022-05-07             2022-05-09\n9     2023-05-17             2023-05-05             2023-05-10\n10    2024-05-16             2024-05-07             2024-05-10\n11    2015-05-19             2015-05-07             2015-05-12\n12    2016-05-23             2016-05-15             2016-05-17\n13    2017-05-23             2017-05-12             2017-05-16\n14    2018-05-24             2018-05-14             2018-05-18\n15    2019-05-30             2019-05-18             2019-05-22\n16    2020-05-24             2020-05-16             2020-05-19\n17    2021-05-16             2021-05-07             2021-05-10\n18    2022-05-16             2022-05-07             2022-05-10\n19    2023-05-17             2023-05-05             2023-05-10\n20    2024-05-16             2024-05-07             2024-05-11\n21    2015-05-19             2015-05-06             2015-05-12\n22    2016-05-23             2016-05-15             2016-05-18\n23    2017-05-23             2017-05-12             2017-05-16\n24    2018-05-24             2018-05-14             2018-05-18\n25    2019-06-01             2019-05-17             2019-05-23\n26    2020-05-25             2020-05-16             2020-05-19\n27    2021-05-16             2021-05-06             2021-05-10\n28    2022-05-17             2022-05-07             2022-05-10\n29    2023-05-18             2023-05-06             2023-05-11\n30    2024-05-17             2024-05-07             2024-05-11\n31    2015-05-19             2015-05-05             2015-05-12\n32    2016-05-23             2016-05-15             2016-05-17\n33    2017-05-23             2017-05-12             2017-05-16\n34    2018-05-24             2018-05-14             2018-05-18\n35    2019-05-31             2019-05-18             2019-05-23\n36    2020-05-25             2020-05-16             2020-05-19\n37    2021-05-16             2021-05-05             2021-05-10\n38    2022-05-16             2022-05-07             2022-05-10\n39    2023-05-18             2023-05-05             2023-05-11\n40    2024-05-16             2024-05-07             2024-05-11\n41    2023-09-23             2023-10-02             2023-09-30\n42    2022-09-18             2022-10-01             2022-09-28\n43    2021-09-14             2021-09-30             2021-09-24\n44    2020-09-15             2020-09-24             2020-09-21\n45    2019-09-12             2019-10-06             2019-09-26\n46    2018-09-25             2018-10-05             2018-10-02\n47    2017-09-10             2017-10-07             2017-10-01\n48    2016-09-19             2016-10-03             2016-09-30\n49    2015-09-25             2015-10-10             2015-10-06\n50    2014-09-19             2014-09-30             2014-09-26\n51    2023-09-23             2023-10-02             2023-09-30\n52    2022-09-20             2022-10-02             2022-09-29\n53    2021-09-15             2021-10-02             2021-09-27\n54    2020-09-15             2020-09-24             2020-09-21\n55    2019-09-12             2019-10-06             2019-09-26\n56    2018-09-24             2018-10-05             2018-10-02\n57    2017-09-11             2017-10-07             2017-10-01\n58    2016-09-22             2016-10-04             2016-10-01\n59    2015-09-24             2015-10-10             2015-10-06\n60    2014-09-19             2014-09-30             2014-09-26\n61    2023-09-22             2023-10-02             2023-09-29\n62    2022-09-21             2022-10-02             2022-09-29\n63    2021-09-16             2021-10-02             2021-09-28\n64    2020-09-14             2020-09-24             2020-09-21\n65    2019-09-09             2019-09-28             2019-09-21\n66    2018-09-25             2018-10-05             2018-10-02\n67    2017-09-03             2017-09-28             2017-09-17\n68    2016-09-22             2016-10-04             2016-10-01\n69    2015-09-25             2015-10-09             2015-10-06\n70    2014-09-19             2014-09-29             2014-09-26\n71    2023-09-22             2023-10-02             2023-09-29\n72    2022-09-21             2022-10-02             2022-09-29\n73    2021-09-16             2021-10-02             2021-09-28\n74    2020-09-15             2020-09-24             2020-09-21\n75    2019-09-09             2019-09-28             2019-09-21\n76    2018-09-25             2018-10-05             2018-10-02\n77    2017-09-03             2017-09-28             2017-09-17\n78    2016-09-20             2016-10-03             2016-09-30\n79    2015-09-25             2015-10-09             2015-10-05\n80    2014-09-19             2014-09-29             2014-09-26\n   transition_50_lower_ci transition_10_upper_ci transition_25_upper_ci\n1              2015-05-17             2015-05-11             2015-05-14\n2              2016-05-21             2016-05-17             2016-05-20\n3              2017-05-21             2017-05-15             2017-05-19\n4              2018-05-22             2018-05-17             2018-05-20\n5              2019-05-29             2019-05-22             2019-05-25\n6              2020-05-23             2020-05-19             2020-05-21\n7              2021-05-14             2021-05-10             2021-05-12\n8              2022-05-14             2022-05-10             2022-05-12\n9              2023-05-15             2023-05-09             2023-05-12\n10             2024-05-14             2024-05-10             2024-05-13\n11             2015-05-17             2015-05-11             2015-05-15\n12             2016-05-22             2016-05-18             2016-05-20\n13             2017-05-21             2017-05-15             2017-05-19\n14             2018-05-22             2018-05-17             2018-05-21\n15             2019-05-29             2019-05-22             2019-05-25\n16             2020-05-23             2020-05-19             2020-05-21\n17             2021-05-14             2021-05-10             2021-05-12\n18             2022-05-14             2022-05-10             2022-05-12\n19             2023-05-16             2023-05-09             2023-05-13\n20             2024-05-15             2024-05-10             2024-05-13\n21             2015-05-18             2015-05-11             2015-05-15\n22             2016-05-22             2016-05-18             2016-05-20\n23             2017-05-21             2017-05-16             2017-05-19\n24             2018-05-22             2018-05-17             2018-05-21\n25             2019-05-30             2019-05-21             2019-05-26\n26             2020-05-23             2020-05-19             2020-05-21\n27             2021-05-15             2021-05-10             2021-05-13\n28             2022-05-15             2022-05-10             2022-05-13\n29             2023-05-16             2023-05-10             2023-05-14\n30             2024-05-15             2024-05-11             2024-05-13\n31             2015-05-17             2015-05-10             2015-05-15\n32             2016-05-22             2016-05-18             2016-05-20\n33             2017-05-21             2017-05-15             2017-05-19\n34             2018-05-22             2018-05-17             2018-05-21\n35             2019-05-29             2019-05-21             2019-05-26\n36             2020-05-23             2020-05-19             2020-05-22\n37             2021-05-15             2021-05-10             2021-05-12\n38             2022-05-15             2022-05-10             2022-05-13\n39             2023-05-16             2023-05-09             2023-05-13\n40             2024-05-15             2024-05-10             2024-05-13\n41             2023-09-24             2023-09-29             2023-09-27\n42             2022-09-21             2022-09-28             2022-09-24\n43             2021-09-16             2021-09-26             2021-09-20\n44             2020-09-17             2020-09-21             2020-09-19\n45             2019-09-15             2019-09-30             2019-09-21\n46             2018-09-27             2018-10-02             2018-09-29\n47             2017-09-13             2017-10-03             2017-09-24\n48             2016-09-22             2016-09-30             2016-09-27\n49             2015-09-28             2015-10-07             2015-10-02\n50             2014-09-21             2014-09-27             2014-09-23\n51             2023-09-24             2023-09-29             2023-09-27\n52             2022-09-22             2022-09-29             2022-09-26\n53             2021-09-18             2021-09-29             2021-09-23\n54             2020-09-17             2020-09-21             2020-09-19\n55             2019-09-15             2019-09-30             2019-09-21\n56             2018-09-27             2018-10-02             2018-09-29\n57             2017-09-13             2017-10-03             2017-09-25\n58             2016-09-25             2016-10-01             2016-09-28\n59             2015-09-27             2015-10-07             2015-10-03\n60             2014-09-21             2014-09-27             2014-09-23\n61             2023-09-24             2023-09-29             2023-09-27\n62             2022-09-23             2022-09-30             2022-09-26\n63             2021-09-19             2021-09-29             2021-09-24\n64             2020-09-16             2020-09-21             2020-09-18\n65             2019-09-12             2019-09-23             2019-09-17\n66             2018-09-27             2018-10-02             2018-09-29\n67             2017-09-07             2017-09-18             2017-09-12\n68             2016-09-25             2016-10-01             2016-09-28\n69             2015-09-28             2015-10-06             2015-10-02\n70             2014-09-21             2014-09-26             2014-09-23\n71             2023-09-24             2023-09-29             2023-09-27\n72             2022-09-23             2022-09-30             2022-09-26\n73             2021-09-18             2021-09-29             2021-09-24\n74             2020-09-16             2020-09-21             2020-09-18\n75             2019-09-11             2019-09-23             2019-09-17\n76             2018-09-27             2018-10-02             2018-09-29\n77             2017-09-07             2017-09-18             2017-09-12\n78             2016-09-23             2016-09-30             2016-09-27\n79             2015-09-27             2015-10-06             2015-10-02\n80             2014-09-21             2014-09-26             2014-09-23\n   transition_50_upper_ci threshold_10 threshold_25 threshold_50 min_gcc\n1              2015-05-20      0.32282      0.33873      0.37633 0.31121\n2              2016-05-24      0.32499      0.33779      0.37759 0.31397\n3              2017-05-24      0.32248      0.33773      0.37307 0.31226\n4              2018-05-24      0.32232      0.34202      0.37272 0.31386\n5              2019-05-31      0.32244      0.33885      0.37458 0.31313\n6              2020-05-25      0.32011      0.34083      0.37363 0.31375\n7              2021-05-17      0.32547      0.34155      0.37830 0.31473\n8              2022-05-17      0.32461      0.33626      0.38019 0.31399\n9              2023-05-18      0.32445      0.34029      0.37266 0.31464\n10             2024-05-17      0.32472      0.33738      0.37670 0.31496\n11             2015-05-20      0.31866      0.33558      0.37064 0.30999\n12             2016-05-24      0.32174      0.33357      0.37112 0.31283\n13             2017-05-24      0.32059      0.33546      0.36948 0.31127\n14             2018-05-25      0.32389      0.33758      0.37576 0.31279\n15             2019-05-31      0.32118      0.33668      0.37051 0.31226\n16             2020-05-25      0.31855      0.33719      0.36704 0.31297\n17             2021-05-17      0.32337      0.33863      0.37405 0.31395\n18             2022-05-17      0.32346      0.34071      0.37400 0.31298\n19             2023-05-18      0.32342      0.33760      0.36679 0.31341\n20             2024-05-17      0.32282      0.34070      0.37152 0.31404\n21             2015-05-20      0.31712      0.33193      0.36312 0.30813\n22             2016-05-24      0.31952      0.33766      0.36566 0.31100\n23             2017-05-24      0.32024      0.33181      0.36440 0.30988\n24             2018-05-25      0.31909      0.33510      0.36836 0.31181\n25             2019-06-02      0.32033      0.33658      0.36865 0.31091\n26             2020-05-26      0.31685      0.33317      0.36564 0.31093\n27             2021-05-17      0.32236      0.33523      0.36513 0.31276\n28             2022-05-18      0.32051      0.33494      0.37103 0.31152\n29             2023-05-19      0.32150      0.33616      0.36426 0.31162\n30             2024-05-18      0.32242      0.33585      0.37177 0.31266\n31             2015-05-20      0.31752      0.33225      0.36299 0.30792\n32             2016-05-24      0.31905      0.33013      0.36527 0.31063\n33             2017-05-24      0.31745      0.33228      0.36524 0.30940\n34             2018-05-25      0.31905      0.33496      0.36944 0.31150\n35             2019-06-01      0.31925      0.33625      0.36611 0.31045\n36             2020-05-26      0.31650      0.33260      0.36501 0.31088\n37             2021-05-17      0.32026      0.33561      0.36605 0.31213\n38             2022-05-17      0.32013      0.33493      0.36437 0.31116\n39             2023-05-19      0.32017      0.33688      0.36402 0.31122\n40             2024-05-17      0.32047      0.33689      0.36570 0.31221\n41             2023-09-22      0.32361      0.33570      0.36651 0.31526\n42             2022-09-12      0.32957      0.34284      0.37344 0.32091\n43             2021-09-12      0.33496      0.34930      0.37477 0.32794\n44             2020-09-14      0.32582      0.34045      0.36759 0.31781\n45             2019-09-11      0.32359      0.33968      0.36880 0.31465\n46             2018-09-24      0.33077      0.34534      0.37294 0.32247\n47             2017-09-07      0.32647      0.34261      0.36958 0.31694\n48             2016-09-17      0.32538      0.34071      0.36928 0.32072\n49             2015-09-23      0.32234      0.34016      0.36704 0.31508\n50             2014-09-17      0.32300      0.33886      0.36762 0.31522\n51             2023-09-22      0.32144      0.33349      0.36361 0.31318\n52             2022-09-18      0.32330      0.33677      0.36721 0.31372\n53             2021-09-14      0.32634      0.34137      0.36982 0.31992\n54             2020-09-14      0.32351      0.33787      0.36455 0.31566\n55             2019-09-10      0.32177      0.33797      0.36557 0.31267\n56             2018-09-23      0.32608      0.33982      0.36938 0.31839\n57             2017-09-08      0.32458      0.33937      0.36495 0.31593\n58             2016-09-20      0.31773      0.33338      0.36150 0.31229\n59             2015-09-22      0.32028      0.33507      0.36365 0.31350\n60             2014-09-18      0.32070      0.33634      0.36479 0.31392\n61             2023-09-21      0.31641      0.33522      0.36283 0.31226\n62             2022-09-19      0.31967      0.33314      0.36122 0.31013\n63             2021-09-15      0.32325      0.33679      0.36382 0.31616\n64             2020-09-13      0.31725      0.33122      0.36232 0.31228\n65             2019-09-07      0.33268      0.34498      0.36730 0.32536\n66             2018-09-24      0.32100      0.33482      0.36185 0.31325\n67             2017-08-29      0.34361      0.35342      0.37297 0.33639\n68             2016-09-20      0.31407      0.33000      0.35807 0.30856\n69             2015-09-22      0.32094      0.33659      0.35899 0.31472\n70             2014-09-17      0.31935      0.33071      0.35947 0.31181\n71             2023-09-21      0.31665      0.33533      0.36256 0.31253\n72             2022-09-19      0.31991      0.33347      0.36120 0.31030\n73             2021-09-15      0.32351      0.33689      0.36347 0.31656\n74             2020-09-14      0.31713      0.33137      0.35863 0.31202\n75             2019-09-07      0.33283      0.34452      0.36674 0.32569\n76             2018-09-24      0.32137      0.33508      0.36224 0.31374\n77             2017-08-29      0.34358      0.35315      0.37255 0.33639\n78             2016-09-18      0.31838      0.33457      0.36058 0.31344\n79             2015-09-22      0.32063      0.33564      0.35892 0.31488\n80             2014-09-18      0.31920      0.33075      0.35983 0.31192\n   max_gcc\n1  0.42854\n2  0.43286\n3  0.42545\n4  0.42960\n5  0.43448\n6  0.42840\n7  0.42853\n8  0.43271\n9  0.42341\n10 0.42878\n11 0.42078\n12 0.42606\n13 0.42119\n14 0.42474\n15 0.42756\n16 0.42005\n17 0.42414\n18 0.42774\n19 0.41974\n20 0.42169\n21 0.41454\n22 0.41907\n23 0.41386\n24 0.41356\n25 0.41849\n26 0.41021\n27 0.41591\n28 0.42054\n29 0.41541\n30 0.41674\n31 0.41247\n32 0.41709\n33 0.41243\n34 0.41557\n35 0.41740\n36 0.41109\n37 0.41511\n38 0.41667\n39 0.41461\n40 0.41629\n41 0.41750\n42 0.42371\n43 0.42002\n44 0.41341\n45 0.41916\n46 0.41994\n47 0.42112\n48 0.41526\n49 0.41561\n50 0.41800\n51 0.41393\n52 0.41947\n53 0.41461\n54 0.40856\n55 0.41603\n56 0.41499\n57 0.41391\n58 0.40830\n59 0.41041\n60 0.41273\n61 0.41028\n62 0.41160\n63 0.40713\n64 0.40459\n65 0.40684\n66 0.40525\n67 0.40905\n68 0.40387\n69 0.40288\n70 0.40611\n71 0.40697\n72 0.41087\n73 0.40692\n74 0.40369\n75 0.40661\n76 0.40617\n77 0.40870\n78 0.40444\n79 0.40248\n80 0.40544\n\n\nNow we’ll plot the transition dates on the GCC timeseries.\n\n# Pull out transition dates from the trans_dates table\n\n# Select the rising (spring dates) for 50% threshold of Gcc 90\ntd_rise &lt;- trans_dates[trans_dates$direction == \"rising\" & trans_dates$gcc_value == \"gcc_90\",]\n\n# Select the falling (fall dates) for 50% threshold of Gcc 90\ntd_fall &lt;- trans_dates[trans_dates$direction == \"falling\" & trans_dates$gcc_value == \"gcc_90\",]\n\n\n# As above, create a simple line graph of the Green Chromatic Coordinate (GCC)\n\n# Plot- this time use \"type = 1\" to create a smooth line graph\nplot(GCC_timeseries$date, GCC_timeseries$gcc_90, \n     col = \"black\", type = \"l\",\n     cex = 2, cex.lab = 2, cex.axis = 2, cex.main = 3,\n     xlab = 'Date', ylab = 'GCC', \n     main = paste0(site_name, ': ', 'Seasonal Transition Dates'))\n\n\n# Add points to show transition dates:\n\n# Spring green-up\npoints(x = as.Date(td_rise$transition_50, origin = \"1970-01-01\"),\n       y = td_rise$threshold_50,\n       pch = 19, cex = 2,\n       col = \"green\")\n\n# Fall brown-down\npoints(x = as.Date(td_fall$transition_50, origin = \"1970-01-01\"),\n       y = td_fall$threshold_50,\n       pch = 19, cex = 2,\n       col = \"brown\")\n\n\n\n\n\n\n\n\nNow, let’s explore the variability of seasonal transition dates throughout the available data years. This works best if you chose a site with a longer timeseries. We’ll first convert the transition dates into a “day-of-year” (DOY) format (e.g., Jan 1 = DOY 1, Jan 2 = DOY 2, etc.), and then plot those by year.\n\n# Convert green-up dates to date format and then DOY\ntd_spring_dates &lt;- as.Date(td_rise$transition_50,format='%Y-%m-%d')\ntd_spring_DOY &lt;- lubridate::yday(td_spring_dates)\n\n# Convert brown-down dates to date format and then DOY\ntd_fall_dates &lt;- as.Date(td_fall$transition_50,format='%Y-%m-%d')\ntd_fall_DOY &lt;- lubridate::yday(td_fall_dates)\n\n# Extract spring data years\nyears_spr &lt;- as.numeric(format(td_spring_dates,'%Y'))\n\n# Create table of years and spring transition dates\ntrans_table_spring &lt;- data.frame(years_spr, td_spring_DOY)\n\n# Plot spring green-up dates\nplot(trans_table_spring[,1],trans_table_spring[,2], \n    type = \"b\", col = \"darkgreen\",\n    cex = 2, cex.lab = 2, cex.axis = 2, cex.main = 3,\n    xlab = 'Year', ylab = 'Spring Transition Date (DOY)',\n    main = paste0(site_name, ': ', 'Date of Spring Onset Through the Years'))\n\n\n\n\n\n\n\n\nAnd now plot the fall brown-down transition dates.\n\n# Extract fall data years\nyears_fall &lt;- as.numeric(format(td_fall_dates,'%Y'))\n\n# Create table of years and fall transition dates\ntrans_table_fall &lt;- data.frame(years_fall, td_fall_DOY)\n\n# Plot fall brown-down dates\nplot(trans_table_fall[,1],trans_table_fall[,2], \n     type = \"b\", col = \"brown\",\n     cex = 2, cex.lab = 2, cex.axis = 2, cex.main = 3,\n     xlab = 'Year', ylab = 'Autumn Transition Date (DOY)',\n     main = paste0(site_name, ': ', 'Date of Autumn Onset Through the Years'))\n\n\n\n\n\n\n\n\nAs you can see, there is a decent amount of year-to-year variability in when a site greens up (spring) or browns down (fall), directly impacting the total length of the growing sesason. This variability is largely due to differences in weather, such as precipitation and temperature. Climate change is also shifting seasonal transition dates, which can impact many other variables, such as plant-animal interactions and ecosystem carbon and water storage.\n\n\nDownload PhenoCam Images\nNext, we’ll download some photos from your chosen site. Images are typically taken every 30 minutes, but for simplicity, we’ll just download 1 image per month in order to visualize phenology changes. This code downloads the midday (~12 pm) image for the 15th day (“days = 15”) of each month (“months = 1:12”) for the year you chose above. The images will appear in the folder you designated above (dir).\n\n# Download PhenoCam images\ndownload_midday_images(site = site_name,\n                       y = year, \n                       months = 1:12, \n                       days = 15,\n                       download_dir = dir)\n\nNow, we’ll use those images to create a photo collage that displays changes in phenology throughout the year. First, we’ll set it up and check that it’s working correctly. You should have 12 images (1 per month), so when you run the code below, “n” should equal 12. If not, look in your “dir” (pheno_images) folder and make sure it only includes images for a single PhenoCam site. If you have more than 12, right click on the images you don’t want and delete them from the folder.\n\n# Isolate images from your designated directory\n# Pics are jpeg format\nmiddays_path &lt;- dir(dir, pattern = \"*.jpg\", full.names = TRUE)\n\n# See a sample of image directory paths to make sure it worked\nhead(middays_path)\n\n[1] \"./pheno_images/lacclair_2022_01_15_120011.jpg\"\n[2] \"./pheno_images/lacclair_2022_02_15_120010.jpg\"\n[3] \"./pheno_images/lacclair_2022_03_15_120007.jpg\"\n[4] \"./pheno_images/lacclair_2022_04_15_120008.jpg\"\n[5] \"./pheno_images/lacclair_2022_05_15_120005.jpg\"\n[6] \"./pheno_images/lacclair_2022_06_15_120006.jpg\"\n\n# Determine number of images (should be 12, 1 per month)\nn &lt;- length(middays_path)\nn\n\n[1] 12\n\n\nThen we’ll create the layout.\n\n# Set up image layout (4 rows & 3 columns)\npar(mar= c(0,0,0,0), mfrow=c(4,3), oma=c(0,23,3,23))\n\n# Create monthly image layout with labels (this can take 1-2 min)\nfor(i in 1:n){\n  img &lt;- jpeg::readJPEG(middays_path[i])\n  plot(0:1,0:1, type='n', axes= FALSE, xlab= '', ylab = '')\n  rasterImage(img, 0, 0, 1, 1)\n  mtext(month.name[i], line = -2)\n}\n\n# Add title (feel free to edit the title below)\nmtext(paste0(site_name, ': ', 'Canopy Greenness Through the Months'), font = 2, cex = 1.8, outer = TRUE)\n\n\n\n\n\n\n\n\nFinally, we’ll use those same images to create a gif that shows changes in phenology over time. This is great to use in presentations to visualize seasonal transitions!\n\n# Make timelapse gif of images\ngif &lt;- list.files(path = dir, pattern = \"*.jpg\", full.names = T) %&gt;% \n\n  purrr::map(image_read) %&gt;% \n  \n  image_join() %&gt;% \n  \n  # Add text to each image -  you can change the size, location, color below\n  image_annotate(paste(site_name,\"Jan-Dec\", year), \n                 location = \"+900+30\", \n                 size = 35, \n                 color = \"black\") %&gt;%\n  \n  # Frames per second (higher number = faster, lower number = slower)\n  image_animate(fps=0.5) %&gt;%\n  \n  # Designate file name & save to your directory\n  image_write(paste0(dir, \"/MonthlyGreenness_gif.gif\")) \n\n# The gif will be saved to the directory you indicated at the beginning \n# You can check the directory path below\ndir\n\n[1] \"./pheno_images\"\n\n\nAs an example, here’s the gif I made for the lacclair site. Your gif will be saved to the directory you indicated at the beginning (dir). If you want to save it, right click on the gif file name and select “download”.\n\n\n\nMonthly Greenness\n\n\n\n\nExplore another site!\nNow try this exercise with another PhenoCam site. Perhaps choose a different ecosystem type. Think about how seasonal greenness patterns differ between sites. What do you think causes these differences?\nTo do this, edit the cell near the beginning where you assign the site name, vegetation type, year, and ROI (in the “Download & Plot Canopy Greenness” section). Be sure to re-run that cell and all cells below it in sequential order.\nBut before trying a new site, run this code cell to re-set your plotting parameters and delete all the downloaded files in your “pheno_images” (dir) folder. Be sure to download your gif first if you want to save a copy.\n\n# Reset plotting parameters\ndev.off()\n\nnull device \n          1 \n\n# List all files in \"pheno_images\"\nf &lt;- list.files(dir, include.dirs = F, full.names = T, recursive = T)\n\n# Remove the files\nfile.remove(f)\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n\n\n\nThank you\nThanks for exploring PhenoCam data. Hopefully, you have a stronger appreciation for phenology now!",
    "crumbs": [
      "MEFA Phenocam Workshop",
      "Explore PhenoCam Data"
    ]
  }
]