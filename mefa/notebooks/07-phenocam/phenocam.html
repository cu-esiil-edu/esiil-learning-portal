<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.55">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>MEFA PhenoCam Activity</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../pages/00-course-overviews/mefa/00-home.qmd" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/ESIIL_portal.png" alt="ESIIL Learning Portal" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../pages/00-course-overviews/mefa/00-home.qmd"> 
<span class="menu-text">MEFA Phenocam Workshop</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="http://earthdatascience.org"> 
<span class="menu-text">Classic earthdatascience.org</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../notebooks/07-phenocam/phenocam.html">MEFA PhenoCam Activity</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../notebooks/07-phenocam/phenocam.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">MEFA PhenoCam Activity</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.github.com/a/-Z4A07Cz" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try it on GitHub!</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#explore-phenocam-data" id="toc-explore-phenocam-data" class="nav-link active" data-scroll-target="#explore-phenocam-data">Explore PhenoCam Data</a>
  <ul class="collapse">
  <li><a href="#introduction-to-phenocam" id="toc-introduction-to-phenocam" class="nav-link" data-scroll-target="#introduction-to-phenocam">Introduction to PhenoCam</a></li>
  <li><a href="#accessing-phenocam-data" id="toc-accessing-phenocam-data" class="nav-link" data-scroll-target="#accessing-phenocam-data">Accessing PhenoCam Data</a>
  <ul class="collapse">
  <li><a href="#download-phenocam-images" id="toc-download-phenocam-images" class="nav-link" data-scroll-target="#download-phenocam-images">Download PhenoCam Images</a></li>
  <li><a href="#explore-another-site" id="toc-explore-another-site" class="nav-link" data-scroll-target="#explore-another-site">Explore another site!</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="MEFA Phenocam Activity.md"><i class="bi bi-file-code"></i>Markdown</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<!-- Modified from https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/html/templates/banner/title-block.html -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
    <div class="esiil-title-goals page-columns page-full">
      <div class="quarto-title column-body">
                <h1 class="title">MEFA PhenoCam Activity</h1>
                                
              </div>
    
      
    <div class="no-row-height column-margin column-container"><div class="">
        
        <div class="quarto-title-meta">

            
          
            
          </div>
          
      </div></div></div>
</header>


<section id="explore-phenocam-data" class="level1">
<h1>Explore PhenoCam Data</h1>
<p>Created by Alison Post (July 2024)</p>
<p>Some code adapted from the <a href="https://www.neonscience.org/resources/learning-hub/tutorials/phenocam-api-intro">2020 NEON Tutorial</a> by Bijan Seyednasrollah</p>
<section id="introduction-to-phenocam" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-phenocam">Introduction to PhenoCam</h2>
<p>Established in 2008, the <a href="https://phenocam.nau.edu/webcam/">PhenoCam Network</a> is a collection of &gt;700 digital cameras that take regular (~ every 30 min) pictures of ecosystem canopies around the world. The name PhenoCam comes from the combination of the words “phenology” and “camera”, because the images are an easy and effective way to study the phenology, or the timing of seasonal changes, of vegetation across diverse ecosystems. The images are available in near-real time to view on the <a href="https://phenocam.nau.edu/webcam/">PhenoCam website</a>, and can also be downloaded through the <a href="https://github.com/PhenoCamNetwork/phenocamapi"><code>phenocamapi</code> R package</a>, which we’ll cover in this tutorial. There are currently over 60 million images available!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/notebooks/phenocam/PhenoCam_SiteMap.png" class="img-fluid figure-img" width="600"></p>
<figcaption>PhenoCam locations across North America (screenshot from phenocam.nau.edu).</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/notebooks/phenocam/PhenoCam_illustration_2.png" class="img-fluid figure-img" width="350"></p>
<figcaption>Illustration of a PhenoCam (red circle) over a tree canopy collecting phenology data (Image from <a href="https://nph.onlinelibrary.wiley.com/doi/full/10.1111/nph.15591">Richardson 2019</a>, illustrator: Victor Leshyk).</figcaption>
</figure>
</div>
<section id="quantifying-greenness" class="level4">
<h4 class="anchored" data-anchor-id="quantifying-greenness">Quantifying Greenness</h4>
<p>Beyond being pretty pictures, PhenoCam images also provide a quantitative way to track vegetation phenology by measuring the intensity of canopy greenness. Digital images are stored as three different color channels - red, green, and blue (RGB) - which are the primary colors of light, and combine in different ratios to create all the visible colors in a photograph. Old-style TVs use this same method, as does your smartphone.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/notebooks/phenocam/RGB_colors.png" class="img-fluid figure-img" width="250"></p>
<figcaption>The primary colors of light combine to create all visible colors in digital images.</figcaption>
</figure>
</div>
<p>Each digital pixel has a numerical value for each color channel (RGB) that represents its intensity. We can use these values to quantify the relative intensity of green compared to the overall brightness of the image. We call this the Green Chromatic Coordinate (GCC) and calculate it using the equation below.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/notebooks/phenocam/GCC_equation.png" class="img-fluid figure-img" width="250"></p>
<figcaption>Equation to calculate the relative greenness (GCC) of a digital image.</figcaption>
</figure>
</div>
<p>However, since PhenoCam images usually capture other things besides just the vegetation canopy (e.g., sky, ground, roads, buildings), each site has established portions of the image, or regions of interest (ROIs), that are analyzed for greenness. For example, at this forested site in Canada (lacclair), only the trees in the foreground are included in the GCC calculation:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/notebooks/phenocam/lacclair_ROI.png" class="img-fluid figure-img" width="350"></p>
<figcaption>Example of an ROI (unshaded portion) for a forest site.</figcaption>
</figure>
</div>
<p>And at this shrub site, only the shrub plants are included in the ROI and bare ground is excluded.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/notebooks/phenocam/shrub_ROI.png" class="img-fluid figure-img" width="350"></p>
<figcaption>ROI (unshaded portion) for a shrub site- bare ground is excluded.</figcaption>
</figure>
</div>
<p>When GCC is calculated over a long time period at a site, a timeseries of vegetation greenness can be created. Below is the GCC timeseries for the “laccair” forest site shown above over the past 9 years. Notice the clear seasonal cycle of vegetation green-up in the spring followed by leaf color change and senescence (brown-down/death) in autumn.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/notebooks/phenocam/lacclair_GCC.png" class="img-fluid figure-img" width="1800"></p>
<figcaption>Timeseries of canopy greeness (GCC) at a forest site in Canada (lacclair).</figcaption>
</figure>
</div>
</section>
<section id="seasonal-transition-dates" class="level4">
<h4 class="anchored" data-anchor-id="seasonal-transition-dates">Seasonal Transition Dates</h4>
<p>These GCC timeseries can be used to extract seasonal transition dates across the years. For example, to determine the timing of spring green-up, we can use the amplitude (height) of each annual peak to determine when (what day of the year) vegetation at the site has reached either 10%, 25%, or 50% of its maximum greenness. We consider this to be the start of spring green-up. We use a similar method to extract the start of autumn brown-down.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/notebooks/phenocam/transition dates.png" class="img-fluid figure-img" width="400"></p>
<figcaption>The dates of spring green-up (green symbols) and autumn brown-down (brown symbols) can be extracted from the GCC timeseries.</figcaption>
</figure>
</div>
<p>Over a long time period, the timing of seasonal transition dates can be used to track shifts in vegetation phenology, such as with climate change. This dataset can also be used to determine which environmental and biologic factors (e.g., temperature, rainfall, sunlight) influence the timing of spring leaf-out and autumn color changes.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/notebooks/phenocam/transition dates_timeseries.png" class="img-fluid figure-img"></p>
<figcaption>Seasonal transition dates at a deciduous forest site in Canada (lacclair) over the past 9 years.</figcaption>
</figure>
</div>
</section>
<section id="your-turn" class="level4">
<h4 class="anchored" data-anchor-id="your-turn">Your turn!</h4>
<p>Thanks for learning about PhenoCam. Now you’ll have the chance to access images and data from a PhenoCam site of your choosing following the tutorial below!</p>
</section>
</section>
<section id="accessing-phenocam-data" class="level2">
<h2 class="anchored" data-anchor-id="accessing-phenocam-data">Accessing PhenoCam Data</h2>
<p>We’ll be using the “<a href="https://github.com/PhenoCamNetwork/phenocamapi">phenocamapi” R package</a> to directly download PhenoCam data. An API is an <em>application programming interface</em> (API), which is a way for two or more applications/computers to talk with one another. In this case, it allows us to directly access data from the PhenoCam database.</p>
<p>Then, you’ll choose a site to view some images and download greenness data. Finally, you’ll create a gif (short movie) of your site through time.</p>
<p>First, we need to open the required packages. A package is a collection of functions/tools to complete a desired task. For example, you need a certain set of tools to build a birdhouse, but a different set of tools to bake a cake. In this case, the “phenocamapi” and “phenocamr” packages have the tools to interact with and download phenocam data. The other packages listed below assist with visualization and formatting.</p>
<pre class="{r}"><code>#| echo: false
#| output: false
install.packages(
    'phenocamr', lib=.libPaths()[1],
    repos = "http://cran.us.r-project.org")
remotes::install_github('PhenoCamNetwork/phenocamapi')</code></pre>
<pre class="{r}"><code>library(phenocamapi)
library(phenocamr)
library(jpeg)
library(purrr) 
library(magick)
library(lubridate)
library(ggplot2)
library(pals)
library(maps)
library(plotly)</code></pre>
<p>Next, indicate a location (file path) where you want the PhenoCam images to save. For this workshop, we’ll create a new file within GitHub Codespaces called “pheno_images”.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the future, if you’re using R Studio locally on your computer, you can enter a local directory for your computer instead (e.g., “C:/Users/alison/Desktop/pheno_images”). Make sure to use forward slashes (if using Windows, you’ll have to switch from the default backslashes to forward slashes).</p>
</div>
</div>
<pre class="{r}"><code># Designate directory (file path)
dir = file.path('.', 'pheno_images')

# Create test_images folder
dir.create(dir)

# View directory
dir</code></pre>
<p>First, we’ll download a table to see all the available PhenoCam sites and associated metadata. For example, each entry lists a site’s geographic coordinates, date of first and last image, primary vegetation type (see table below for abbreviations), and mean annual temperature and precipitation, among other things.</p>
<p>Vegetation types:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Abbreviation</th>
<th>Vegetation Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AG</td>
<td>Agriculture</td>
</tr>
<tr class="even">
<td>DB</td>
<td>Deciduous Broadleaf</td>
</tr>
<tr class="odd">
<td>EB</td>
<td>Evergreen Broadleaf</td>
</tr>
<tr class="even">
<td>EN</td>
<td>Evergreen Needleleaf</td>
</tr>
<tr class="odd">
<td>DN</td>
<td>Deciduous Needleleaf</td>
</tr>
<tr class="even">
<td>GR</td>
<td>Grassland</td>
</tr>
<tr class="odd">
<td>MX</td>
<td>Mixed Forest</td>
</tr>
<tr class="even">
<td>NV</td>
<td>Non-vegetated</td>
</tr>
<tr class="odd">
<td>SH</td>
<td>Shrub</td>
</tr>
<tr class="even">
<td>TN</td>
<td>Tundra</td>
</tr>
<tr class="odd">
<td>UN</td>
<td>Understory</td>
</tr>
<tr class="even">
<td>WL</td>
<td>Wetland</td>
</tr>
</tbody>
</table>
<pre class="{r}"><code># List metadata of all sites
sitelist_table &lt;- get_phenos() 

# View table and available metadata (column names)
View(sitelist_table)
colnames(sitelist_table)</code></pre>
<p>You can filter the table by any of the available attributes (column names). For example, I created a subset of only grasslands (GR) sites below.</p>
<pre class="{r}"><code># Create a subset of only grassland sites 
GR_sites &lt;- subset(sitelist_table, primary_veg_type == "GR")  

# View the first few grassland entries and entire table
View(GR_sites)</code></pre>
<p><strong>Challenge</strong>: Can you subset the sitelist_table by a different primary vegetation type? How about by a different variable (table column)? Use the code cell below.</p>
<pre class="{r}"><code></code></pre>
<section id="create-a-map-of-the-phenocam-sites" class="level4">
<h4 class="anchored" data-anchor-id="create-a-map-of-the-phenocam-sites">Create a Map of the PhenoCam Sites</h4>
<p>Now, we’ll create an interactive map to view all the PhenoCam sites colored by their primary vegetation type. First, using our “sitelist_table” that we downloaded above, we filter out any sites for which a primary vegetation type isn’t listed or an “NA” is entered. We’ll call this new data table “sitelist_table2”.</p>
<pre class="{r}"><code># Remove sites with NA and empty cells for primary_veg_type
sitelist_table2 &lt;- sitelist_table[!(is.na(sitelist_table$primary_veg_typ) | sitelist_table$primary_veg_typ==""), ]</code></pre>
<p>Then, we’ll create a static map of the PhenoCam sites using their latitude and longitude (included in “sitelist_table2”). We’ll overlay this onto a basemap of the world and US states.</p>
<pre class="{r}"><code># Download basemaps of the world and US states
world_map &lt;- map_data("world")
state_map &lt;- map_data("state")

## Create map of sites
Site_map &lt;- ggplot() +
    # Add world map  
    geom_polygon(data = world_map, aes(x = long, y = lat, group = group), 
                fill = "white", color = "black") +
    # Add state map
    geom_polygon(data = state_map, aes(x = long, y = lat, group = group), 
                fill = NA, color = "black") +  
    # Add PhenoCam sites as points
    geom_point(data = sitelist_table2, aes(x = lon, y = lat,
                color = primary_veg_type,
                text = paste("Site:", site)), size = 3) +
    # Choose legend colors  
    scale_color_manual(values=as.vector(trubetskoy(11))) + 
    # Add title and labels  
    labs(title = "PhenoCam Sites by Vegetation Type", x = "Longitude", 
        y = "Latitude", color = "Primary Veg Type") +
    # Indicate map theme (general appearance)
    theme_minimal() +
    # Center title and increase font size
    theme(plot.title = element_text(hjust = 0.5, size = 20))
  
# View map
Site_map</code></pre>
<p><strong>Challenge</strong>: Can you change the title of the map? Make the change and re-run the code cell above.</p>
<p>Let’s make the map interactive! You can hover over sites to see their details, draw a box around a specific area to zoom into the region, and click on various legend entries to toggle them on or off. Double click on the map to zoom back out.</p>
<pre class="{r}"><code># Make map interactive
ggplotly(Site_map)</code></pre>
</section>
<section id="download-plot-canopy-greenness" class="level4">
<h4 class="anchored" data-anchor-id="download-plot-canopy-greenness">Download &amp; Plot Canopy Greenness</h4>
<p>Now, let’s view some PhenoCam images and greenness data. Choose a site to explore, and enter the site name and relevant information in the cell below. For example, I chose the site “lacclair”, which represents a deciduous broadleaf (“DB”) vegetation type, and I chose to look at images from the year 2022. You’ll also need to specify which region of interest (ROI) to use for your site. Recall that some sites have multiple ROIs, each with a unique ID number. You can view the possible ROIs for your site on the <a href="https://phenocam.nau.edu/webcam/">PhenoCam website.</a></p>
<pre class="{r}"><code># Choose site to explore 
# Enter name exactly as it appears in the table/on the website
site_name = "lacclair"

# Indicate vegetation type (listed on site page)
veg = "DB"

# Choose data year (for downloading images later)
year = 2022

# Indicate ROI ID
ROI = 1000

# View the objects to make sure correct
site_name
veg
year
ROI</code></pre>
<p>First, we’ll download canopy greenness (GCC = green chromatic coordinate) timeseries data for your chosen site. The GCC data are already condensed down to 1-day and 3-day data products (type = ‘3day’ or ‘1day’). See <a href="https://www.nature.com/articles/sdata201828">Richardson et al.&nbsp;(2018)</a> for more information about PhenoCam data processing.</p>
<pre class="{r}"><code># Download GCC timeseries
GCC_timeseries &lt;- get_pheno_ts(site = site_name, 
                               vegType = veg, 
                               roiID = ROI, 
                               type = '3day')

# View table and available data (column names)
View(GCC_timeseries) 
colnames(GCC_timeseries)</code></pre>
<p>Now, we’ll plot the GCC timeseries to see how canopy greenness changes over time at your chosen site. From the “GCC_timeseries” table, we’ll plot the variable called “gcc_90”, which corresponds to the 90th percentile of GCC values across the 3-day window within the designated ROI. Using the 90th percentile (rather than the mean) reduces the influence of changing weather and brightness across the images. See <a href="https://www.nature.com/articles/sdata201828">Richardson et al.&nbsp;(2018)</a> for more details on data products and processing.</p>
<pre class="{r}"><code># Put date into date format
GCC_timeseries[,date:=as.Date(date)]

# Adjust plot area margins
par(mar=c(5, 6, 4, 2))

# Create line plot
plot(GCC_timeseries$date, GCC_timeseries$gcc_90,
     # Choose line color &amp; type
     col = "darkgreen", type = "b",
     # Change font size
     cex = 1.5, cex.lab = 2, cex.axis = 2, cex.main = 3,
     # Add axis labels
     xlab = "Date", ylab = "GCC", 
     # Add title
     main = paste0(site_name, ": ", "Canopy Greenness Timeseries"))
</code></pre>
<p><em>Note: Since the plot isn’t saved as an object, it only appears in the built-in plot viewer for R. However, you can right click on the plot to copy and paste it elsewhere. If you accidentally close a plot and want to see it again, just re-run the code cell that created it.</em></p>
</section>
<section id="explore-seasonal-transition-dates" class="level4">
<h4 class="anchored" data-anchor-id="explore-seasonal-transition-dates">Explore Seasonal Transition Dates</h4>
<p>We can also download and plot the 50% seasonal transition dates (spring green-up and fall brown-down) for your site. We’ll use another package called “<a href="https://github.com/bluegreen-labs/phenocamr/tree/master">phenocamr”</a> to download the transition dates.</p>
<pre class="{r}"><code># Download csv files of (1) GCC timeseries and (2) transition dates
# They will save in your designated directory (dir)
download_phenocam(site = site_name,
                  veg_type = veg,
                  frequency = 3,
                  phenophase = TRUE,
                  out_dir = dir)

# Read in the transition date csv file:

# Designate file location
trans_dates_path &lt;- paste0(dir, "/", site_name, "_", veg, "_", ROI, "_3day_transition_dates.csv")

#Read in file
trans_dates &lt;- read.table(trans_dates_path,
                 header = TRUE,
                 sep = ",")

#View file
View(trans_dates)</code></pre>
<p>Now we’ll plot the transition dates on the GCC timeseries.</p>
<pre class="{r}"><code># Pull out transition dates from the trans_dates table

# Select the rising (spring dates) for 50% threshold of Gcc 90
td_rise &lt;- trans_dates[trans_dates$direction == "rising" &amp; trans_dates$gcc_value == "gcc_90",]

# Select the falling (fall dates) for 50% threshold of Gcc 90
td_fall &lt;- trans_dates[trans_dates$direction == "falling" &amp; trans_dates$gcc_value == "gcc_90",]


# As above, create a simple line graph of the Green Chromatic Coordinate (GCC)

# Plot- this time use "type = 1" to create a smooth line graph
plot(GCC_timeseries$date, GCC_timeseries$gcc_90, 
     col = "black", type = "l",
     cex = 2, cex.lab = 2, cex.axis = 2, cex.main = 3,
     xlab = 'Date', ylab = 'GCC', 
     main = paste0(site_name, ': ', 'Seasonal Transition Dates'))


# Add points to show transition dates:

# Spring green-up
points(x = as.Date(td_rise$transition_50, origin = "1970-01-01"),
       y = td_rise$threshold_50,
       pch = 19, cex = 2,
       col = "green")

# Fall brown-down
points(x = as.Date(td_fall$transition_50, origin = "1970-01-01"),
       y = td_fall$threshold_50,
       pch = 19, cex = 2,
       col = "brown")</code></pre>
<p>Now, let’s explore the variability of seasonal transition dates throughout the available data years. This works best if you chose a site with a longer timeseries. We’ll first convert the transition dates into a “day-of-year” (DOY) format (e.g., Jan 1 = DOY 1, Jan 2 = DOY 2, etc.), and then plot those by year.</p>
<pre class="{r}"><code># Convert green-up dates to date format and then DOY
td_spring_dates &lt;- as.Date(td_rise$transition_50,format='%Y-%m-%d')
td_spring_DOY &lt;- lubridate::yday(td_spring_dates)

# Convert brown-down dates to date format and then DOY
td_fall_dates &lt;- as.Date(td_fall$transition_50,format='%Y-%m-%d')
td_fall_DOY &lt;- lubridate::yday(td_fall_dates)

# Extract spring data years
years_spr &lt;- as.numeric(format(td_spring_dates,'%Y'))

# Create table of years and spring transition dates
trans_table_spring &lt;- data.frame(years_spr, td_spring_DOY)

# Plot spring green-up dates
plot(trans_table_spring[,1],trans_table_spring[,2], 
    type = "b", col = "darkgreen",
    cex = 2, cex.lab = 2, cex.axis = 2, cex.main = 3,
    xlab = 'Year', ylab = 'Spring Transition Date (DOY)',
    main = paste0(site_name, ': ', 'Date of Spring Onset Through the Years'))</code></pre>
<p>And now plot the fall brown-down transition dates.</p>
<pre class="{r}"><code># Extract fall data years
years_fall &lt;- as.numeric(format(td_fall_dates,'%Y'))

# Create table of years and fall transition dates
trans_table_fall &lt;- data.frame(years_fall, td_fall_DOY)

# Plot fall brown-down dates
plot(trans_table_fall[,1],trans_table_fall[,2], 
     type = "b", col = "brown",
     cex = 2, cex.lab = 2, cex.axis = 2, cex.main = 3,
     xlab = 'Year', ylab = 'Autumn Transition Date (DOY)',
     main = paste0(site_name, ': ', 'Date of Autumn Onset Through the Years'))</code></pre>
<p>As you can see, there is a decent amount of year-to-year variability in when a site greens up (spring) or browns down (fall), directly impacting the total length of the growing sesason. This variability is largely due to differences in weather, such as precipitation and temperature. Climate change is also shifting seasonal transition dates, which can impact many other variables, such as plant-animal interactions and ecosystem carbon and water storage.</p>
</section>
<section id="download-phenocam-images" class="level3">
<h3 class="anchored" data-anchor-id="download-phenocam-images">Download PhenoCam Images</h3>
<p>Next, we’ll download some photos from your chosen site. Images are typically taken every 30 minutes, but for simplicity, we’ll just download 1 image per month in order to visualize phenology changes. This code downloads the midday (~12 pm) image for the 15th day (“days = 15”) of each month (“months = 1:12”) for the year you chose above. The images will appear in the folder you designated above (dir).</p>
<pre class="{r}"><code># Download PhenoCam images
download_midday_images(site = site_name,
                       y = year, 
                       months = 1:12, 
                       days = 15,
                       download_dir = dir)</code></pre>
<p>Now, we’ll use those images to create a photo collage that displays changes in phenology throughout the year. First, we’ll set it up and check that it’s working correctly. You should have 12 images (1 per month), so when you run the code below, “n” should equal 12. If not, look in your “dir” (pheno_images) folder and make sure it only includes images for a single PhenoCam site. If you have more than 12, right click on the images you don’t want and delete them from the folder.</p>
<pre class="{r}"><code># Isolate images from your designated directory
# Pics are jpeg format
middays_path &lt;- dir(dir, pattern = "*.jpg", full.names = TRUE)

# See a sample of image directory paths to make sure it worked
head(middays_path)

# Determine number of images (should be 12, 1 per month)
n &lt;- length(middays_path)
n</code></pre>
<p>Then we’ll create the layout.</p>
<pre class="{r}"><code># Set up image layout (4 rows &amp; 3 columns)
par(mar= c(0,0,0,0), mfrow=c(4,3), oma=c(0,23,3,23))

# Create monthly image layout with labels (this can take 1-2 min)
for(i in 1:n){
  img &lt;- jpeg::readJPEG(middays_path[i])
  plot(0:1,0:1, type='n', axes= FALSE, xlab= '', ylab = '')
  rasterImage(img, 0, 0, 1, 1)
  mtext(month.name[i], line = -2)
}

# Add title (feel free to edit the title below)
mtext(paste0(site_name, ': ', 'Canopy Greenness Through the Months'), font = 2, cex = 1.8, outer = TRUE)</code></pre>
<p>Finally, we’ll use those same images to create a gif that shows changes in phenology over time. This is great to use in presentations to visualize seasonal transitions!</p>
<pre class="{r}"><code># Make timelapse gif of images
gif &lt;- list.files(path = dir, pattern = "*.jpg", full.names = T) %&gt;% 

  purrr::map(image_read) %&gt;% 
  
  image_join() %&gt;% 
  
  # Add text to each image -  you can change the size, location, color below
  image_annotate(paste(site_name,"Jan-Dec", year), 
                 location = "+900+30", 
                 size = 35, 
                 color = "black") %&gt;%
  
  # Frames per second (higher number = faster, lower number = slower)
  image_animate(fps=0.5) %&gt;%
  
  # Designate file name &amp; save to your directory
  image_write(paste0(dir,"/MonthlyGreenness_gif.gif")) 

# The gif will be saved to the directory you indicated at the beginning 
# You can check the directory path below
dir</code></pre>
<p>As an example, here’s the gif I made for the lacclair site. Your gif will be saved to the directory you indicated at the beginning (dir). If you want to save it, right click on the gif file name and select “download”.</p>
<p><img src="images/MonthlyGreenness_gif.gif" align="left" width="750">/</p>
</section>
<section id="explore-another-site" class="level3">
<h3 class="anchored" data-anchor-id="explore-another-site">Explore another site!</h3>
<p>Now try this exercise with another PhenoCam site. Perhaps choose a different ecosystem type. Think about how seasonal greenness patterns differ between sites. What do you think causes these differences?</p>
<p>To do this, edit the cell near the beginning where you assign the site name, vegetation type, year, and ROI (in the “Download &amp; Plot Canopy Greenness” section). Be sure to re-run that cell and all cells below it in sequential order.</p>
<p>**<strong>But before trying a new site, run this code cell</strong> to re-set your plotting parameters and delete all the downloaded files in your “pheno_images” (dir) folder. Be sure to download your gif first if you want to save a copy.</p>
<pre class="{r}"><code># Reset plotting parameters
dev.off()

# List all files in "pheno_images"
f &lt;- list.files(dir, include.dirs = F, full.names = T, recursive = T)

# Remove the files
file.remove(f)</code></pre>
<section id="thank-you" class="level4">
<h4 class="anchored" data-anchor-id="thank-you">Thank you</h4>
<p>Thanks for exploring PhenoCam data. Hopefully, you have a stronger appreciation for phenology now!</p>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?!((http:|https:)\/\/))");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../pages/00-course-overviews/mefa/00-home.qmd" class="pagination-link" aria-label="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://esiil.org/">
<p>About ESIIL</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>